{"version":3,"sources":["assets/images/Logo_ViableCities_240pxl.png","assets/images/about/image1.png","assets/images/about/image2.png","assets/images/projects/1-Aktivitetsbaserad-modellering.png","assets/images/projects/2-DDS-energieffektiv-vard.jpg","assets/images/projects/3-Digitalt-kontrollerade-odlingssystem.jpg","assets/images/projects/4-Effektiv-energiplanering.jpg","assets/images/projects/5-Hotmodellering.jpg","assets/images/projects/6-Hallbara-urbana-livstillar.jpg","assets/images/projects/7-Klimatkampen-Uppsala.jpg","assets/images/projects/8-Ladda-lagra-lanka.png","assets/images/projects/9-MERiT.jpg","assets/images/projects/10-Mo-Bo.jpg","assets/images/projects/11-Matt-och-steg.jpg","assets/images/projects/12-SAMIR.jpg","assets/images/projects/13-Sensorer-for-luftmiljo.jpg","assets/images/projects/14-R-energi.JPG","assets/images/projects/15-Sharing-Cities-Sweden.jpg","assets/images/projects/16-Matbutik.jpg","assets/images/projects/17-Smart-Village.png","assets/images/projects/18-Smaskalig-elforsorjning.jpg","assets/images/projects/19-Urban-ICT-Arena.jpg","assets/images/projects/20-Vardeskapande-med-oppna-data.jpg","assets/images/projects/21-3De.jpg","Header.jsx","matrix/MatrixUtility.js","matrix/MatrixTooltip.jsx","matrix/MatrixCircleMenu.jsx","ProjectNavigator.js","matrix/Matrix.jsx","map/Map.jsx","partners/Partners.jsx","filters/Matchmaking.jsx","filters/Filters.jsx","ColorLegendItem.jsx","ColorLegend.jsx","ScaleLegend.jsx","Sidebar.jsx","About.jsx","info-box/InfoBoxSection.jsx","info-box/projectImages.js","info-box/InfoBox.jsx","info-box/AnimatedInfoBox.jsx","App.jsx","usePreloadImages.js","serviceWorker.js","index.js"],"names":["module","exports","Header","viewLinks","map","view","viewMatch","props","location","pathname","includes","toLowerCase","projectMatch","match","key","className","to","onClick","this","toggleAbout","href","rel","target","Component","withRouter","col2focus","1","2","3","4","theme2row","testbeds","innovation","financing","management","intelligence","row2theme","5","focusLabel","themeLabel","type2class","Forskningsprojekt","Innovationsprojekt","Förstudie","circleRadius","area","Math","sqrt","PI","circleSizes","ticks","value","project","label","format","display","budget","survey_answers","funded","replace","partners","Set","other_financiers","other_recipients","length","locations","projectTypes","projectTypeColors","scaleOrdinal","range","rgb","domain","packData","data","scaleX","scaleY","circleSize","obj","row","col","forEach","pins","theme","push","r","maxEnclose","sort","a","b","packSiblings","max","packEnclose","rScale","min","step","pin","arr","x","y","parseNewlinesY","texts","each","text","select","words","split","attr","dy","parseFloat","word","i","append","newlinesXTransform","parseNewlinesX","ind","insert","createLabelBackground","bbox","node","getBBox","parentNode","width","height","classed","MatrixTooltip","nextProps","style","top","margin","offset","left","project_title","MatrixCircleMenu","transform","cx","cy","x1","x2","y1","y2","d","t","filter","Object","values","valueField","textField","onChange","updateCircleSize","ProjectNavigator","rootPath","_hasChangedSinceInit","history","matchPath","path","exact","id","filteredData","GetProjectId","find","project_id","prevLocation","params","masterTransition","transition","duration","ease","easePolyOut","exponent","Matrix","state","hoveredProject","guideMode","right","bottom","projectNavigator","draw","bind","svg","svgRef","svgInner","circleSizeWrapper","circleSizeWrapperRef","scalePoint","padding","circles","on","event","tagName","goToRoot","debounce","window","addEventListener","prevProps","prevState","updateHovered","updateClicked","isEqual","updateData","setState","removeEventListener","init","svgWrapperRef","clientHeight","clientWidth","projectExists","stretch","aspectRatio","optimalHeight","optimalWidth","oldWidth","oldHeight","dimensionsChanged","selectors","yAxis","themesLabel","xAxis","focusAreasLabel","keys","s","call","tickPadding","axisLeft","tickSize","yAxisSelection","selection","selectAll","empty","e","axisTop","xAxisSelection","prevProject","projectId","prevProjectId","hasChangedSinceInit","change","datum","neighborSelector","join","redirectToRoot","packedData","updateScaleData","sortedPackedData","minSize","maxSize","labelNumbers","circleRadii","significantFigures","Number","parseInt","toPrecision","number","buildScaleData","circle","exit","remove","enter","project_type","goToProject","ref","svgWrapper","Map","scaleLegendDebounce","updateScaleLegend","zoom","d3","scaleExtent","zoomed2","g","projection","rotate","scale","center","translate","multiple_projects_box","projects","cities_container","tooltip","tooltip2","tooltip3","tooltip3_showed","project_count_city","cities_circles","cities","coordinates","html","name","offsetX","offsetY","topojson","europe","objects","features","sweden","subunits","j","dat","mockData_real","tetra","da","leng","JSON","parse","stringify","loc_circles","tetr","ob","xx_loc","ab","xx","k","tt","xxx","project_circles","c","project_coordinates","apply","tx","id_real","projects_listed","afa","circle_transform","circle_size_increase","project_size_increase","getAttribute","radius","Partners","omrade_titles","0","helix_colors","helix_colors_borders","omrade_titles_x","omrade_titles_y","projectSpace","projspace_title_x","projspace_title_y","project_no","bubbles","nodes","view_option","forceStrength","createNewNodes","button_collection","normal_button","move_bubbles","helix_button","expand_button","projspace_title","mockData","button_collections","project_buttons","change_view_spec","omradeCenters","class","simulation","velocityDecay","force","strength","charge","ticked","stop","maxAmount","total_amount","radiusScale","bubblesE","kategori","organisation","merge","omradeData","years","temp_str","projData2","projTitlesObj","opt","omrade_view","project_view","alpha","restart","toggle_title","projs","pow","proj_opt","rawData","q_o","Civilsamhälle","Forskning","Näringsliv","myNodes","Organisation","random","Projects","Kategori","scaleFactor","Matchmaking","expanded","handleChange","position","substring","parsePosition","valueCopy","index","findIndex","item","splice","checked","rows","ROWS","COLS","type","isChecked","disabled","enabled","columns","defaultProps","intersection","_intersection","ListItem","count","Filters","filteredBy","titles","keywords","matchmaking","filterValues","prevFilteredData","componentData","projectLocations","projectPartners","projectKeywords","add","financier","recipient","keyword","filterBy","some","has","partner","every","entries","filteredByAllExcept","ret","set","get","reduce","colRange","nonEmpty","nextState","newFilteredData","updateFilteredData","buildTitlesList","buildLocationList","buildPartnerList","buildKeywordList","buildMatchmakingList","placeholder","itemComponent","ColorLegendItem","color","background","RouteColorLegend","items","labels","ColorLegend","matrixLabels","partnersLabels","legends","matrix","route","native","from","opacity","leave","undefined","div","ScaleLegend","parent","parentRef","lineWidth","labelWidth","scaleData","fixedData","slice","reverse","svgHeight","svgHeightChange","parentWidth","parentWidthChange","Sidebar","noPartners","src","logo","alt","visibility","About","about","currentTarget","image1","image2","InfoBoxSection","toggle","initToggle","onToggle","title","children","p1","p2","p3","p4","p5","6","p6","7","p7","8","p8","9","p9","10","p10","11","p11","12","p12","13","p13","14","p15","15","p14","16","p16","17","p17","18","p18","19","p19","20","p20","21","p21","InfoBox","lastProject","stringList","str","acc","cur","project_organization","project_manager","dates","description","link","website","views","vizViews","viewName","backgroundImage","projectImages","total_cost","start","end","decorateItems","AnimatedInfoBox","projectDetails","App","useState","setFilteredData","setScaleData","setAbout","useLayoutEffect","url","Image","newData","basename","process","render","Boolean","hostname","ReactDOM","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.ec99d211.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,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\"","module.exports = \"data:image/png;base64,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\"","module.exports = __webpack_public_path__ + \"static/media/image2.6026cdaf.png\";","module.exports = __webpack_public_path__ + \"static/media/1-Aktivitetsbaserad-modellering.1074af03.png\";","module.exports = __webpack_public_path__ + \"static/media/2-DDS-energieffektiv-vard.289abdde.jpg\";","module.exports = __webpack_public_path__ + \"static/media/3-Digitalt-kontrollerade-odlingssystem.1d19642a.jpg\";","module.exports = __webpack_public_path__ + \"static/media/4-Effektiv-energiplanering.ea5820f2.jpg\";","module.exports = __webpack_public_path__ + \"static/media/5-Hotmodellering.b9fbeb16.jpg\";","module.exports = __webpack_public_path__ + \"static/media/6-Hallbara-urbana-livstillar.0c4ecf15.jpg\";","module.exports = __webpack_public_path__ + \"static/media/7-Klimatkampen-Uppsala.fba5b34a.jpg\";","module.exports = __webpack_public_path__ + \"static/media/8-Ladda-lagra-lanka.a75f29f3.png\";","module.exports = __webpack_public_path__ + \"static/media/9-MERiT.483be082.jpg\";","module.exports = __webpack_public_path__ + \"static/media/10-Mo-Bo.87f2f9fc.jpg\";","module.exports = __webpack_public_path__ + \"static/media/11-Matt-och-steg.80797cbb.jpg\";","module.exports = __webpack_public_path__ + \"static/media/12-SAMIR.d14d2eb6.jpg\";","module.exports = __webpack_public_path__ + \"static/media/13-Sensorer-for-luftmiljo.4362eb63.jpg\";","module.exports = __webpack_public_path__ + \"static/media/14-R-energi.05d591b6.JPG\";","module.exports = __webpack_public_path__ + \"static/media/15-Sharing-Cities-Sweden.0c3256df.jpg\";","module.exports = __webpack_public_path__ + \"static/media/16-Matbutik.1f0245a6.jpg\";","module.exports = __webpack_public_path__ + \"static/media/17-Smart-Village.c9934f37.png\";","module.exports = __webpack_public_path__ + \"static/media/18-Smaskalig-elforsorjning.83dc4dda.jpg\";","module.exports = __webpack_public_path__ + \"static/media/19-Urban-ICT-Arena.d10de260.jpg\";","module.exports = __webpack_public_path__ + \"static/media/20-Vardeskapande-med-oppna-data.c4bb7c0c.jpg\";","module.exports = __webpack_public_path__ + \"static/media/21-3De.05da2369.jpg\";","import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { withRouter } from \"react-router\";\r\nimport \"./Header.css\";\r\n\r\nclass Header extends Component {\r\n  render() {\r\n    const views = [\"Map\", \"Matrix\", \"Partners\"];\r\n    const viewLinks = views.map(view => {\r\n      const viewMatch = this.props.location.pathname.includes(\r\n        view.toLowerCase()\r\n      );\r\n      const projectMatch = this.props.location.pathname.match(\r\n        /\\/project\\/(\\d+)/\r\n      );\r\n      return (\r\n        <li\r\n          key={view}\r\n          className={`header-links__item ${\r\n            viewMatch ? \"header-links__item--active\" : \"\"\r\n          }`}\r\n        >\r\n          <Link\r\n            className=\"header-links__item-link\"\r\n            to={`/${view.toLowerCase() +\r\n              (projectMatch !== null && view !== \"Partners\"\r\n                ? `/project/${projectMatch[1]}`\r\n                : \"\")}`}\r\n          >\r\n            {view}\r\n          </Link>\r\n        </li>\r\n      );\r\n    });\r\n\r\n    return (\r\n      <div className=\"header\">\r\n        <div className=\"header-content\">\r\n          <div className=\"header-content__left\">\r\n            <ul className=\"header-links\">{viewLinks}</ul>\r\n          </div>\r\n          <div className=\"header-content__right\">\r\n            <ul className=\"header-links\">\r\n              <li className=\"header-links__item\">\r\n                <button\r\n                  className=\"header-links__item-link\"\r\n                  onClick={this.props.toggleAbout}\r\n                >\r\n                  About\r\n                </button>\r\n              </li>\r\n              <li className=\"header-links__item header-links__item--primary\">\r\n                <a\r\n                  className=\"header-links__item-link\"\r\n                  href=\"https://goo.gl/forms/bX9jxwEtvLveayls2\"\r\n                  rel=\"noopener noreferrer\"\r\n                  target=\"_blank\"\r\n                >\r\n                  Lämna Feedback\r\n                </a>\r\n              </li>\r\n            </ul>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nHeader.propTypes = {\r\n  toggleAbout: PropTypes.func.isRequired\r\n};\r\n\r\nexport default withRouter(Header);\r\n","import {\n  scaleOrdinal,\n  rgb,\n  packSiblings,\n  packEnclose,\n  select,\n  range,\n  format\n} from \"d3\";\n\nexport const col2focus = {\n  1: \"focus_lifestyle\",\n  2: \"focus_planning\",\n  3: \"focus_mobility\",\n  4: \"focus_infrastructure\"\n};\n\nexport const theme2row = {\n  testbeds: 1,\n  innovation: 2,\n  financing: 3,\n  management: 4,\n  intelligence: 5\n};\n\nexport const row2theme = {\n  1: \"testbeds\",\n  2: \"innovation\",\n  3: \"financing\",\n  4: \"management\",\n  5: \"intelligence\"\n};\n\nexport const focusLabel = {\n  1: \"Livsstil och  konsumtion\",\n  2: \"Planering och  byggd miljö\",\n  3: \"Mobilitet och  tillgänglighet\",\n  4: \"Integrerad  infrastruktur\"\n};\n\nexport const themeLabel = {\n  1: \"Testbäddar och  living labs\",\n  2: \"Innovation och  entreprenörskap\",\n  3: \"Finansierings- och  affärsmodeller\",\n  4: \"Styrning\",\n  5: \"Intelligens,  cybersäkerhet  och etik\"\n};\n\nexport const type2class = {\n  Forskningsprojekt: \"research\",\n  Innovationsprojekt: \"innovation\",\n  Förstudie: \"prestudy\"\n};\n\nexport function circleRadius(area) {\n  return Math.sqrt(area / Math.PI);\n}\n\nexport function ticks(project) {\n  //return Object.values(col2focus).reduce((sum, focusArea) => sum + project.survey_answers[focusArea].length, 0);\n}\n\nexport const circleSizes = {\n  ticks: {\n    value: project => 1,\n    label: label => `${format(\"d\")(label)} tick`,\n    display: \"Tick\",\n    key: \"ticks\"\n  },\n  budget: {\n    value: (project, normalize = false) => project.survey_answers.budget.funded,\n    label: label => `${format(\",\")(label).replace(/,/g, \" \")} kr`,\n    display: \"Budget\",\n    key: \"budget\"\n  },\n  partners: {\n    value: project =>\n      [\n        ...new Set([\n          ...project.survey_answers.other_financiers,\n          ...project.survey_answers.other_recipients\n        ])\n      ].length,\n    label: label => `${format(\"d\")(label)} partners`,\n    display: \"Partners\",\n    key: \"partners\"\n  },\n  locations: {\n    value: project => project.survey_answers.locations.length,\n    label: label => `${format(\"d\")(label)} platser`,\n    display: \"Platser\",\n    key: \"locations\"\n  }\n};\n\nexport const projectTypes = [\n  \"Forskningsprojekt\",\n  \"Innovationsprojekt\",\n  \"Förstudie\"\n];\nexport const projectTypeColors = scaleOrdinal()\n  .range([rgb(0, 125, 145), rgb(151, 194, 142), rgb(234, 154, 0)]) // pms 3145, pms 2255, pms 2011\n  .domain(projectTypes);\n\nexport function packData(data, scaleX, scaleY, circleSize) {\n  // first, group together circles that are\n  // at the same position in the matrix\n  const obj = {};\n  for (let row = 1; row <= 5; ++row) {\n    obj[row] = {};\n    for (let col = 1; col <= 4; ++col) {\n      obj[row][col] = [];\n    }\n  }\n  data.data.forEach(project => {\n    const pins = []; // so that a circle can find its buddies\n    for (let col = 1; col <= 4; ++col) {\n      project.survey_answers[col2focus[col]].forEach(theme => {\n        pins.push({\n          row: theme2row[theme],\n          col\n        });\n        obj[theme2row[theme]][col].push({\n          row: theme2row[theme],\n          col,\n          pins,\n          survey_answers: project.survey_answers,\n          r: circleRadius(circleSize.value(project))\n        });\n      });\n    }\n  });\n\n  // first pass: pack circles and find the \"optimal scale\"\n  // and redo the circle radii to use that scale\n  let maxEnclose = 0;\n  for (let row = 1; row <= 5; ++row) {\n    for (let col = 1; col <= 4; ++col) {\n      if (!obj[row][col].length) continue; // if empty continue\n      obj[row][col].sort((a, b) => b.r - a.r);\n      //obj[row][col].sort((a, b) => a.survey_answers.project_title.localeCompare(b.survey_answers.project_title));\n      packSiblings(obj[row][col]);\n      maxEnclose = Math.max(maxEnclose, packEnclose(obj[row][col]).r);\n    }\n  }\n  const optimalEncloseRadius = Math.min(scaleX.step() / 2, scaleY.step() / 2); // * 0.95?\n  const rScale = optimalEncloseRadius / maxEnclose;\n  for (let row = 1; row <= 5; ++row) {\n    for (let col = 1; col <= 4; ++col) {\n      obj[row][col].forEach(pin => {\n        pin.r = circleRadius(circleSize.value(pin)) * rScale;\n      });\n    }\n  }\n\n  // second pass: pack again, fix positions\n  // and return as a flat list\n  const arr = [];\n  for (let row = 1; row <= 5; ++row) {\n    for (let col = 1; col <= 4; ++col) {\n      packSiblings(obj[row][col]).forEach(pin => {\n        arr.push({\n          ...pin,\n          x: pin.x + scaleX(col),\n          y: pin.y + scaleY(row),\n          rScale\n        });\n      });\n    }\n  }\n  return arr;\n}\n\nexport function buildScaleData(packedData, circleSize) {\n  if (!packedData.length) return null;\n\n  const sortedPackedData = [...packedData].sort(\n    (a, b) => circleSize.value(a) - circleSize.value(b)\n  );\n  const minSize = circleSize.value(sortedPackedData[0]);\n  const maxSize = circleSize.value(\n    sortedPackedData[sortedPackedData.length - 1]\n  );\n  const rScale = packedData[0].rScale;\n\n  let labelNumbers = [];\n  const circleRadii = [];\n\n  const significantFigures = Number.parseInt(maxSize) > 1000000 ? 1 : 2;\n\n  labelNumbers[0] = Number.parseInt(maxSize).toPrecision(significantFigures);\n  labelNumbers[1] = Number.parseInt(maxSize / 2).toPrecision(\n    significantFigures\n  );\n  labelNumbers[2] = Number.parseInt(maxSize / 10).toPrecision(\n    significantFigures\n  );\n  labelNumbers = labelNumbers.map(number =>\n    Number.parseInt(number) === 0 ? 1 : Number.parseInt(number)\n  );\n\n  circleRadii[0] = circleRadius(labelNumbers[0]) * rScale;\n  circleRadii[1] = circleRadius(labelNumbers[1]) * rScale;\n  circleRadii[2] = circleRadius(labelNumbers[2]) * rScale;\n\n  if (\n    Number.parseInt(maxSize).toPrecision(significantFigures) ===\n    Number.parseInt(minSize).toPrecision(significantFigures)\n  )\n    return [\n      {\n        r: circleRadii[0],\n        label: circleSize.label(labelNumbers[0])\n      }\n    ];\n\n  if (\n    labelNumbers[0] === labelNumbers[1] ||\n    labelNumbers[1] === labelNumbers[2]\n  )\n    return [0, 2].map(i => ({\n      r: circleRadii[i],\n      label: circleSize.label(labelNumbers[i])\n    }));\n\n  return range(3).map(i => ({\n    r: circleRadii[i],\n    label: circleSize.label(labelNumbers[i])\n  }));\n}\n\n// inspired by https://bl.ocks.org/mbostock/7555321\n// replaces double spaces in the labels with fake \"newlines\"\n// (tspan elements) and fixes their positions\nexport function parseNewlinesY(texts) {\n  texts.each(function() {\n    const text = select(this);\n    const words = text.text().split(/ {2}/);\n    const x = text.attr(\"x\");\n    const dy = parseFloat(text.attr(\"dy\"));\n    text.text(null);\n    const lineHeight = 1.1; // em\n    words.forEach((word, i) => {\n      text\n        .append(\"tspan\")\n        .text(word)\n        .attr(\"x\", x)\n        .attr(\"y\", `-${((words.length - 1) * lineHeight) / 2}em`)\n        .attr(\"dy\", `${dy + i * lineHeight}em`);\n    });\n  });\n}\n// if the label should be rotated, change the rotate value here\nexport function newlinesXTransform(y) {\n  return `translate(0,${y})rotate(0)translate(0,${-y})`;\n}\nexport function parseNewlinesX(texts) {\n  texts.each(function() {\n    const text = select(this).attr(\"text-anchor\", \"middle\");\n    const words = text.text().split(/ {2}/);\n    const y = text.attr(\"y\");\n    text.text(null);\n    const lineHeight = 1.1; // em\n    words.forEach((word, i) => {\n      const ind = i === words.length - 1 ? 0 : 1;\n      text\n        .insert(\"tspan\", \":first-child\")\n        .text(word)\n        .attr(\"x\", 0)\n        .attr(\"dy\", `-${ind * lineHeight}em`);\n    });\n    text.attr(\"transform\", newlinesXTransform(y));\n  });\n}\nexport function createLabelBackground(texts) {\n  texts.each(function() {\n    const text = select(this);\n    const bbox = text.node().getBBox();\n    text\n      .select(function() {\n        return this.parentNode;\n      })\n      .insert(\"rect\", \":first-child\")\n      .attr(\"x\", bbox.x)\n      .attr(\"y\", bbox.y)\n      .attr(\"width\", bbox.width)\n      .attr(\"height\", bbox.height)\n      //.style('fill', 'red')\n      .classed(\"label-background\", true);\n  });\n}\n","import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport \"./MatrixTooltip.css\";\r\n\r\nconst topOffset = 10;\r\n\r\nclass MatrixTooltip extends Component {\r\n  shouldComponentUpdate(nextProps) {\r\n    if (nextProps.project !== this.props.project) return true;\r\n    return false;\r\n  }\r\n\r\n  render() {\r\n    if (!this.props.project) return null;\r\n\r\n    return (\r\n      <div\r\n        className=\"matrix-tooltip\"\r\n        style={{\r\n          top:\r\n            this.props.project.y +\r\n            this.props.margin.top -\r\n            this.props.project.r -\r\n            topOffset +\r\n            this.props.offset.y,\r\n          left:\r\n            this.props.project.x + this.props.margin.left + this.props.offset.x\r\n        }}\r\n      >\r\n        {this.props.project.survey_answers.project_title}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nMatrixTooltip.propTypes = {\r\n  project: PropTypes.object,\r\n  margin: PropTypes.shape({\r\n    top: PropTypes.number,\r\n    right: PropTypes.number,\r\n    bottom: PropTypes.number,\r\n    left: PropTypes.number\r\n  }).isRequired,\r\n  offset: PropTypes.shape({\r\n    x: PropTypes.number,\r\n    y: PropTypes.number\r\n  }).isRequired\r\n};\r\n\r\nexport default MatrixTooltip;\r\n","import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { DropdownList } from \"react-widgets\";\r\nimport { circleSizes } from \"./MatrixUtility\";\r\nimport \"./MatrixCircleMenu.css\";\r\n\r\nclass MatrixCircleMenu extends Component {\r\n  /**\r\n   * ALT POLYGONS FOR ARROWS:\r\n   *  <polygon points={`${offset} ${r}, ${t + offset} ${r + t}, ${t + offset} ${r - t}`} />\r\n   *  <polygon points={`${r * 2 - offset} ${r}, ${r * 2 - t - offset} ${r + t}, ${r * 2 - t - offset} ${r - t}`} />\r\n   */\r\n\r\n  render() {\r\n    const r = 12;\r\n    const t = 3;\r\n    const offset = 2;\r\n\r\n    return (\r\n      <div className=\"matrix-circle-menu\">\r\n        <div\r\n          className=\"matrix-circle-menu__svg-wrapper\"\r\n          style={{ width: r * 2 + 2, height: r * 2 + 2 }}\r\n        >\r\n          <svg width=\"100%\" height=\"100%\">\r\n            <g transform=\"translate(1, 1)\">\r\n              <circle cx={r} cy={r} r={r} />\r\n              <g\r\n                transform={`translate(${r}, ${r})rotate(45)translate(${-r}, ${-r})`}\r\n              >\r\n                <line x1={offset} x2={r * 2 - offset} y1={r} y2={r} />\r\n                <path\r\n                  d={`M ${t + offset} ${r + t} L ${offset} ${r} L ${t +\r\n                    offset} ${r - t}`}\r\n                />\r\n                <path\r\n                  d={`M ${r * 2 - t - offset} ${r + t} L ${r * 2 -\r\n                    offset} ${r} L ${r * 2 - t - offset} ${r - t}`}\r\n                />\r\n              </g>\r\n            </g>\r\n          </svg>\r\n        </div>\r\n        <div className=\"matrix-circle-menu__dropdown-wrapper\">\r\n          <DropdownList\r\n            filter={false}\r\n            data={Object.values(circleSizes)}\r\n            valueField=\"key\"\r\n            textField=\"display\"\r\n            value={this.props.circleSize}\r\n            onChange={this.props.updateCircleSize}\r\n          />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nMatrixCircleMenu.propTypes = {\r\n  circleSize: PropTypes.object.isRequired,\r\n  updateCircleSize: PropTypes.func.isRequired\r\n};\r\n\r\nexport default MatrixCircleMenu;\r\n","import { matchPath } from \"react-router\";\r\n\r\n// NOTE: For all methods that take props as an argument, it assumed that props is an object which contains\r\n// the history property and the filteredData property. If the history property is missing, make sure to\r\n// use the 'withRouter' higher-order-component on whatever component ProjectNavigator is used from.\r\nclass ProjectNavigator {\r\n  constructor(rootPath = \"\") {\r\n    this.rootPath = rootPath;\r\n    this._hasChangedSinceInit = false;\r\n  }\r\n\r\n  static GetProjectId(location) {\r\n    const match = matchPath(location.pathname, { path: `*/project/:id` });\r\n    if (match !== null) return match.params.id;\r\n    return -1;\r\n  }\r\n\r\n  hasChangedSinceInit() {\r\n    return this._hasChangedSinceInit;\r\n  }\r\n\r\n  change() {\r\n    this._hasChangedSinceInit = true;\r\n  }\r\n\r\n  redirectToRoot(history) {\r\n    history.replace(this.rootPath);\r\n  }\r\n\r\n  goToRoot(history, location) {\r\n    if (\r\n      matchPath(location.pathname, { path: this.rootPath, exact: true }) ===\r\n      null\r\n    ) {\r\n      this._hasChangedSinceInit = true;\r\n      history.push(this.rootPath);\r\n    }\r\n  }\r\n\r\n  goToProject(history, location, id) {\r\n    const path = `${this.rootPath}/project/${id}`;\r\n    if (matchPath(location.pathname, { path }) === null) {\r\n      this._hasChangedSinceInit = true;\r\n      history.push(path);\r\n    }\r\n  }\r\n\r\n  projectExists(location, filteredData) {\r\n    const id = ProjectNavigator.GetProjectId(location);\r\n    if (filteredData.data.find(d => d.survey_answers.project_id === id))\r\n      return true;\r\n    return false;\r\n  }\r\n\r\n  projectHasChanged(location, prevLocation) {\r\n    return (\r\n      ProjectNavigator.GetProjectId(location) !==\r\n      ProjectNavigator.GetProjectId(prevLocation)\r\n    );\r\n  }\r\n}\r\n\r\nexport const GetProjectId = ProjectNavigator.GetProjectId;\r\nexport default ProjectNavigator;\r\n","import React, { Component } from \"react\";\r\nimport { select, axisLeft, axisTop, event, scalePoint, easePolyOut } from \"d3\";\r\nimport {\r\n  themeLabel,\r\n  focusLabel,\r\n  packData,\r\n  buildScaleData,\r\n  parseNewlinesY,\r\n  newlinesXTransform,\r\n  parseNewlinesX,\r\n  createLabelBackground,\r\n  type2class,\r\n  circleSizes\r\n} from \"./MatrixUtility\";\r\nimport { withRouter } from \"react-router-dom\";\r\nimport MatrixTooltip from \"./MatrixTooltip\";\r\nimport MatrixCircleMenu from \"./MatrixCircleMenu\";\r\nimport PropTypes from \"prop-types\";\r\nimport isEqual from \"react-fast-compare\";\r\nimport debounce from \"lodash.debounce\";\r\nimport ProjectNavigator from \"../ProjectNavigator\";\r\nimport \"./Matrix.css\";\r\n\r\nconst masterTransition = transition =>\r\n  transition.duration(800).ease(easePolyOut.exponent(4));\r\n\r\nclass Matrix extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      hoveredProject: null,\r\n      circleSize: circleSizes.ticks,\r\n      guideMode: false\r\n    };\r\n\r\n    this.margin = { top: 100, right: 20, bottom: 20, left: 190 };\r\n    this.offset = { x: 0, y: 0 };\r\n    this.projectNavigator = new ProjectNavigator(\"/matrix\");\r\n    this.draw = this.draw.bind(this);\r\n    this.updateCircleSize = this.updateCircleSize.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.svg = select(this.svgRef);\r\n\r\n    // used for transforming the contents of the svg, if necessary\r\n    this.svgInner = this.svg.append(\"g\").classed(\"matrix-svg-inner\", true);\r\n\r\n    // used for moving around the circle menu\r\n    this.circleSizeWrapper = select(this.circleSizeWrapperRef).style(\r\n      \"transform\",\r\n      \"translate(0, 0)\"\r\n    );\r\n\r\n    this.scaleX = scalePoint()\r\n      .domain([1, 2, 3, 4])\r\n      .padding(0.5);\r\n    this.scaleY = scalePoint()\r\n      .domain([1, 2, 3, 4, 5])\r\n      .padding(0.5);\r\n\r\n    // y-axis\r\n    this.svgInner.append(\"g\").classed(\"matrix-y-axis\", true);\r\n\r\n    // themes label\r\n    this.svgInner\r\n      .append(\"text\")\r\n      .classed(\"themes-label\", true)\r\n      .classed(\"matrix-axis-label\", true)\r\n      .text(\"Teman\");\r\n\r\n    // x-axis\r\n    this.svgInner.append(\"g\").classed(\"matrix-x-axis\", true);\r\n\r\n    // focus areas label\r\n    this.svgInner\r\n      .append(\"text\")\r\n      .classed(\"focus-areas-label\", true)\r\n      .classed(\"matrix-axis-label\", true)\r\n      .text(\"Fokusområden\");\r\n\r\n    // make some circles\r\n    this.circles = this.svgInner.append(\"g\").classed(\"circles\", true);\r\n    this.draw(true);\r\n\r\n    // clear clickedProject when clicking outside of any circle\r\n    this.svg.on(\"click\", () => {\r\n      if (event.target.tagName !== \"circle\") {\r\n        this.projectNavigator.goToRoot(this.props.history, this.props.location);\r\n      }\r\n    });\r\n\r\n    this.debounce = debounce(() => this.draw(), 100);\r\n    window.addEventListener(\"resize\", this.debounce);\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    this.updateHovered(this.state.hoveredProject, prevState.hoveredProject);\r\n    this.updateClicked(this.props, prevProps);\r\n\r\n    if (\r\n      !isEqual(this.props.filteredData, prevProps.filteredData) ||\r\n      this.state.circleSize !== prevState.circleSize\r\n    ) {\r\n      this.updateData(this.props.filteredData);\r\n      this.setState({\r\n        hoveredProject: null\r\n      });\r\n      this.projectNavigator.goToRoot(this.props.history, this.props.location);\r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    window.removeEventListener(\"resize\", this.debounce);\r\n    this.svg.on(\"click\", null);\r\n  }\r\n\r\n  draw(init = false) {\r\n    let height =\r\n      +this.svgWrapperRef.clientHeight - this.margin.top - this.margin.bottom;\r\n    let width =\r\n      +this.svgWrapperRef.clientWidth - this.margin.left - this.margin.right;\r\n\r\n    // 300 px is the size of the infobox that appears when a project is clicked!\r\n    if (\r\n      this.projectNavigator.projectExists(\r\n        this.props.location,\r\n        this.props.filteredData\r\n      )\r\n    )\r\n      width -= 300;\r\n\r\n    const stretch = false;\r\n    if (!stretch) {\r\n      const aspectRatio = 5 / 5; // 4 / 5 is \"optimal\"\r\n      const optimalHeight = (width * 1) / aspectRatio;\r\n      const optimalWidth = height * aspectRatio;\r\n\r\n      if (\r\n        optimalHeight + this.margin.top + this.margin.bottom <=\r\n        this.svgWrapperRef.clientHeight\r\n      ) {\r\n        this.offset = { x: 0, y: (height - optimalHeight) / 2 };\r\n        height = optimalHeight;\r\n      } else {\r\n        this.offset = { x: (width - optimalWidth) / 2, y: 0 };\r\n        width = optimalWidth;\r\n      }\r\n    }\r\n\r\n    // this is useful further down, if the width/height didn't change, we don't need to call updateData!\r\n    const oldWidth = this.scaleX.range()[1];\r\n    const oldHeight = this.scaleY.range()[1];\r\n    const dimensionsChanged = oldWidth !== width || oldHeight !== height;\r\n\r\n    // update scales\r\n    this.scaleX.range([0, width]);\r\n    this.scaleY.range([0, height]);\r\n\r\n    // set up selectors\r\n    const selectors = {\r\n      svgInner: this.svgInner,\r\n      circleSizeWrapper: this.circleSizeWrapper,\r\n      yAxis: this.svgInner.select(\"g.matrix-y-axis\"),\r\n      themesLabel: this.svgInner.select(\"text.themes-label\"),\r\n      xAxis: this.svgInner.select(\"g.matrix-x-axis\"),\r\n      focusAreasLabel: this.svgInner.select(\"text.focus-areas-label\")\r\n    };\r\n    if (!init)\r\n      Object.keys(selectors).forEach(\r\n        s => (selectors[s] = selectors[s].transition().call(masterTransition))\r\n      );\r\n\r\n    selectors.svgInner.attr(\r\n      \"transform\",\r\n      `translate(${this.offset.x}, ${this.offset.y})`\r\n    );\r\n\r\n    selectors.circleSizeWrapper\r\n      //.style('top', `${this.offset.y + this.margin.top - 40}px`)\r\n      //.style('left', `${this.offset.x + this.margin.left - 110}px`);\r\n      .style(\r\n        \"transform\",\r\n        `translate(${this.offset.x + this.margin.left - 120}px, ${this.offset\r\n          .y +\r\n          this.margin.top -\r\n          40}px)`\r\n      );\r\n\r\n    // themes label\r\n    selectors.themesLabel.attr(\r\n      \"transform\",\r\n      `translate(25, ${this.margin.top + height / 2})rotate(-90)`\r\n    );\r\n\r\n    // focus areas label\r\n    selectors.focusAreasLabel.attr(\r\n      \"transform\",\r\n      `translate(${this.margin.left + width / 2}, 35)`\r\n    );\r\n\r\n    /**\r\n     * NOTE: The default text elements (labels) on the axes are hidden and replaced to\r\n     * allow for two things: (1) splitting up the labels into multiple lines and (2)\r\n     * having transitions. The default labels can support (1) and (2) separately but not\r\n     * at the same time! So that's why there's some extra code here\r\n     *\r\n     * We don't want remove the original text element and .domain,\r\n     * if we remove the text element, d3-axis will start fucking with our label\r\n     * (changin text contents, position etc)\r\n     * if we remove .domain, d3-axis will just add it again next draw call.\r\n     */\r\n\r\n    // (equivalent to axis.tickPadding [but hardcoded])\r\n    const tickPadding = 20;\r\n\r\n    // y-axis\r\n    selectors.yAxis\r\n      .attr(\r\n        \"transform\",\r\n        `translate(${width + this.margin.left}, ${this.margin.top})`\r\n      )\r\n      .call(axisLeft(this.scaleY).tickSize(width));\r\n    const yAxisSelection = selectors.yAxis.selection\r\n      ? selectors.yAxis.selection()\r\n      : selectors.yAxis;\r\n    if (yAxisSelection.selectAll(\".tick text.label\").empty()) {\r\n      yAxisSelection\r\n        .call(e => e.selectAll(\".tick text\").attr(\"display\", \"none\"))\r\n        .call(e => e.select(\".domain\").attr(\"display\", \"none\"))\r\n        .selectAll(\".tick\")\r\n        .append(\"text\")\r\n        .classed(\"label\", true)\r\n        .text(i => themeLabel[i])\r\n        .attr(\"fill\", \"currentColor\")\r\n        .attr(\"x\", -width - tickPadding)\r\n        .attr(\"dy\", \"0.32em\") // see d3-axis source code\r\n        .call(parseNewlinesY)\r\n        .call(createLabelBackground);\r\n    } else {\r\n      const x = -width - tickPadding;\r\n      selectors.yAxis\r\n        .selectAll(\".tick text.label\")\r\n        .attr(\"x\", x)\r\n        .selectAll(\"tspan\")\r\n        .attr(\"x\", x);\r\n    }\r\n\r\n    // x-axis\r\n    selectors.xAxis\r\n      .attr(\r\n        \"transform\",\r\n        `translate(${this.margin.left}, ${height + this.margin.top})`\r\n      )\r\n      .call(axisTop(this.scaleX).tickSize(height));\r\n    const xAxisSelection = selectors.xAxis.selection\r\n      ? selectors.xAxis.selection()\r\n      : selectors.xAxis;\r\n    if (xAxisSelection.selectAll(\".tick text.label\").empty()) {\r\n      xAxisSelection\r\n        .call(e => e.selectAll(\".tick text\").attr(\"display\", \"none\"))\r\n        .call(e => e.select(\".domain\").attr(\"display\", \"none\"))\r\n        .selectAll(\".tick\")\r\n        .append(\"text\")\r\n        .classed(\"label\", true)\r\n        .text(i => focusLabel[i])\r\n        .attr(\"fill\", \"currentColor\")\r\n        .attr(\"y\", -height - tickPadding)\r\n        .attr(\"dy\", \"0em\") // see d3-axis source code\r\n        .call(parseNewlinesX)\r\n        .call(createLabelBackground);\r\n    } else {\r\n      const y = -height - tickPadding;\r\n      selectors.xAxis\r\n        .selectAll(\".tick text.label\")\r\n        .attr(\"y\", y)\r\n        .attr(\"transform\", newlinesXTransform(y));\r\n    }\r\n\r\n    if (dimensionsChanged) this.updateData(this.props.filteredData);\r\n  }\r\n\r\n  updateHovered(project, prevProject) {\r\n    if (project === prevProject) return;\r\n\r\n    if (prevProject !== null)\r\n      this.circles.selectAll(\".hover\").classed(\"hover\", false);\r\n\r\n    if (project !== null)\r\n      this.circles\r\n        .selectAll(`[data-id='${project.survey_answers.project_id}']`)\r\n        .classed(\"hover\", true);\r\n  }\r\n\r\n  updateClicked(props, prevProps) {\r\n    let projectId = ProjectNavigator.GetProjectId(props.location);\r\n    let prevProjectId = ProjectNavigator.GetProjectId(prevProps.location);\r\n\r\n    // if we just started, (i.e. navigated to the site via a permalink with a project id)\r\n    // the projectId and prevProjectId will be identical because of how prevProps.location works\r\n    // so change it to -1.\r\n    if (!this.projectNavigator.hasChangedSinceInit()) {\r\n      prevProjectId = -1;\r\n      this.projectNavigator.change();\r\n    }\r\n\r\n    if (projectId === prevProjectId) return;\r\n\r\n    // necessary only if clicking a project changes svgWrapper size (i.e. infobox takes up more or less space than before)\r\n    if (\r\n      (projectId === -1 && prevProjectId !== -1) ||\r\n      (projectId !== -1 && prevProjectId === -1)\r\n    )\r\n      this.draw();\r\n\r\n    // clean up from prev\r\n    if (prevProjectId !== -1 && this.svg.classed(\"clicked\")) {\r\n      this.svg.classed(\"clicked\", false);\r\n      this.circles.selectAll(\".neighbor\").classed(\"neighbor\", false);\r\n      this.circles.selectAll(\".clicked\").classed(\"clicked\", false);\r\n    }\r\n\r\n    // if no project in path, we done\r\n    if (projectId === -1) return;\r\n\r\n    // if the project from the url doesn't exist in filteredData, redirect to root\r\n    if (\r\n      !this.projectNavigator.projectExists(props.location, props.filteredData)\r\n    ) {\r\n      this.projectNavigator.redirectToRoot(props.history);\r\n      return;\r\n    }\r\n\r\n    // make a mess with current\r\n    const datum = this.circles.select(`[data-id='${projectId}']`).datum();\r\n    const neighborSelector = datum.pins\r\n      .map(pin => `[data-row='${pin.row}'][data-col='${pin.col}']`)\r\n      .join(\", \");\r\n    this.svg.classed(\"clicked\", true);\r\n    this.circles.selectAll(neighborSelector).classed(\"neighbor\", true);\r\n    this.circles\r\n      .selectAll(`[data-id='${datum.survey_answers.project_id}']`)\r\n      .classed(\"clicked\", true);\r\n  }\r\n\r\n  updateData(data) {\r\n    const packedData = packData(\r\n      data,\r\n      this.scaleX,\r\n      this.scaleY,\r\n      this.state.circleSize\r\n    );\r\n    this.props.updateScaleData(\r\n      buildScaleData(packedData, this.state.circleSize)\r\n    );\r\n    const circle = this.circles\r\n      .selectAll(\"circle\")\r\n      .data(\r\n        packedData,\r\n        d => `${d.survey_answers.project_id}[${d.row},${d.col}]`\r\n      );\r\n\r\n    circle\r\n      .exit()\r\n      // NOTE: These lines caused a nasty bug when calling updateData more than once in quick succession\r\n      //       with different subsets of data. But they shouldn't be needed regardlessly.\r\n      //.on('mouseover', null)\r\n      //.on('mouseout', null)\r\n      //.on('click', null))\r\n      .transition()\r\n      .call(masterTransition)\r\n      .attr(\"r\", 0)\r\n      .remove();\r\n\r\n    circle\r\n      .transition()\r\n      .call(masterTransition)\r\n      .attr(\"r\", d => d.r)\r\n      .attr(\r\n        \"transform\",\r\n        d => `translate(${d.x + this.margin.left},${d.y + this.margin.top})`\r\n      );\r\n\r\n    circle\r\n      .enter()\r\n      .append(\"circle\")\r\n      .attr(\r\n        \"transform\",\r\n        d => `translate(${d.x + this.margin.left},${d.y + this.margin.top})`\r\n      )\r\n      .attr(\"data-id\", d => d.survey_answers.project_id)\r\n      .attr(\"data-row\", d => d.row)\r\n      .attr(\"data-col\", d => d.col)\r\n      .attr(\"class\", d => type2class[d.survey_answers.project_type])\r\n      .on(\"mouseover\", d =>\r\n        this.setState({\r\n          hoveredProject: d\r\n        })\r\n      )\r\n      .on(\"mouseout\", d =>\r\n        this.setState({\r\n          hoveredProject: null\r\n        })\r\n      )\r\n      .on(\"click\", d => {\r\n        this.projectNavigator.goToProject(\r\n          this.props.history,\r\n          this.props.location,\r\n          d.survey_answers.project_id\r\n        );\r\n        this.setState({\r\n          hoveredProject: null\r\n        });\r\n      })\r\n      .attr(\"r\", 0)\r\n      .transition()\r\n      .call(masterTransition)\r\n      .attr(\"r\", d => d.r);\r\n  }\r\n\r\n  updateCircleSize(circleSize) {\r\n    this.setState({ circleSize });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div\r\n        className=\"matrix-wrapper\"\r\n        ref={svgWrapper => {\r\n          this.svgWrapperRef = svgWrapper;\r\n        }}\r\n      >\r\n        <svg\r\n          className=\"matrix\"\r\n          width=\"100%\"\r\n          height=\"100%\"\r\n          ref={svg => {\r\n            this.svgRef = svg;\r\n          }}\r\n        />\r\n        <MatrixTooltip\r\n          project={this.state.hoveredProject}\r\n          margin={this.margin}\r\n          offset={this.offset}\r\n        />\r\n        <div\r\n          className=\"matrix-circle-scale-wrapper\"\r\n          ref={circleSizeWrapper => {\r\n            this.circleSizeWrapperRef = circleSizeWrapper;\r\n          }}\r\n        >\r\n          <MatrixCircleMenu\r\n            updateCircleSize={this.updateCircleSize}\r\n            circleSize={this.state.circleSize}\r\n          />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nMatrix.propTypes = {\r\n  data: PropTypes.object.isRequired,\r\n  filteredData: PropTypes.object.isRequired,\r\n  updateScaleData: PropTypes.func.isRequired\r\n};\r\n\r\nexport default withRouter(Matrix);\r\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport isEqual from \"react-fast-compare\";\nimport { withRouter } from \"react-router-dom\";\nimport * as d3 from \"d3\";\nimport * as topojson from \"topojson\";\nimport europe from \"../assets/data/europe.topo.json\";\nimport sweden from \"../assets/data/sweden.topo.json\";\nimport cities from \"../assets/data/cities-v2.json\";\n// import mockData from \"../assets/data/mock-data-v8.json\";\nimport project_coordinates from \"../assets/data/project-coordinates.json\";\nimport \"./Map.css\";\nimport ProjectNavigator from \"../ProjectNavigator\";\nimport debounce from \"lodash.debounce\";\n\n// current bugs\nclass Map extends Component {\n  constructor(props) {\n    super(props);\n    this.margin = { top: 130, right: 20, bottom: 20, left: 160 };\n    this.offset = { x: 0, y: 0 };\n    this.projectNavigator = new ProjectNavigator(\"/map\");\n  }\n\n  // Render före compMount\n  componentDidMount() {\n    this.height =\n      +this.svgWrapperRef.clientHeight - this.margin.top - this.margin.bottom;\n    this.width =\n      +this.svgWrapperRef.clientWidth - this.margin.left - this.margin.right;\n\n    this.scaleLegendDebounce = debounce(() => this.updateScaleLegend(), 200);\n    this.zoom = d3\n      .zoom()\n      .scaleExtent([1, 100])\n      .on(\"zoom.foo\", this.zoomed2.bind(this))\n      .on(\"zoom.bar\", () => {\n        this.g.attr(\"transform\", d3.event.transform);\n      })\n      .on(\"zoom.legend\", this.scaleLegendDebounce);\n    // .on(this.updateData, this.zoomed2.bind(this));\n    // console.log(this.zoom);\n    this.projection = d3\n      .geoMercator()\n      .rotate([5, -1])\n      // .scale(500)\n      // .center([15,58])\n      .scale(900)\n      .center([20, 63])\n      .translate([this.width / 2, this.height / 2]);\n\n    this.path = d3.geoPath().projection(this.projection);\n\n    this.multiple_projects_box = d3\n      .select(this.svgWrapperRef)\n      .append(\"div\")\n      .classed(\"multiple_projects_box\", true)\n      .style(\"opacity\", 0);\n    this.svg = d3\n      .select(this.svgRef)\n      .attr(\"width\", this.width)\n      .attr(\"height\", this.height)\n      .call(this.zoom);\n\n    this.svg.on(\"click\", () => {\n      if (d3.event.target.tagName !== \"circle\") {\n        this.projectNavigator.goToRoot(this.props.history, this.props.location);\n        this.multiple_projects_box.transition().style(\"opacity\", 0);\n        this.multiple_projects_box.text(\"\");\n        this.projects.selectAll(\"circle\").classed(\"clicked_bubble\", false);\n      }\n    });\n\n    this.updateScaleLegend();\n\n    this.g = this.svg.append(\"g\"); // The map itself\n\n    this.cities_container = this.svg\n      .append(\"g\") // All the black dot cities\n      .classed(\"circle_box\", true);\n\n    this.projects = this.svg.append(\"g\"); // All the projects + cities\n\n    // Tooltip for cities popup.\n    this.tooltip = d3\n      .select(this.svgWrapperRef)\n      .append(\"div\")\n      .attr(\"class\", \"tooltip_bubble\")\n      .style(\"opacity\", 0);\n\n    // Tooltip for projects popup\n    this.tooltip2 = d3\n      .select(this.svgWrapperRef)\n      .append(\"div\")\n      .attr(\"class\", \"tooltip_bubble2\")\n      .style(\"opacity\", 0);\n\n    // Tooltip for multi-proj.\n    this.tooltip3 = d3\n      .select(this.svgWrapperRef)\n      .append(\"div\")\n      .attr(\"class\", \"tooltip_bubble3\")\n      .attr(\"id\", \"tooltip_bubble3\")\n      .style(\"opacity\", 0);\n\n    this.tooltip3_showed = 0;\n    this.project_count_city = {};\n\n    this.cities_circles = this.cities_container\n      .selectAll(\"circle\")\n      .data(cities)\n      .enter()\n      .append(\"circle\")\n      .attr(\"id\", function(d) {\n        return \"circle-\" + d.id;\n      })\n      .attr(\"cx\", d => {\n        return this.projection([d.coordinates.x, d.coordinates.y])[0];\n      })\n      .attr(\"cy\", d => {\n        return this.projection([d.coordinates.x, d.coordinates.y])[1];\n      })\n      .attr(\"r\", 1.2)\n      .attr(\"fill\", \"black\")\n      .on(\"mouseover\", d => {\n        this.tooltip.transition(\"tooltip-1\").style(\"opacity\", 0.9);\n        this.tooltip\n          .html(\"<b>\" + d.name + \"</b>\")\n          .style(\"left\", d3.event.offsetX + \"px\")\n          .style(\"top\", d3.event.offsetY - 18 + \"px\")\n          .style(\"max-width\", 200 + \"px\");\n      })\n      .on(\"mouseout\", d => {\n        this.tooltip.transition().style(\"opacity\", 0);\n      });\n\n    this.updateData(this.props.filteredData);\n    //Europe\n    this.g\n      .selectAll(\".continent_Europe_subunits\")\n      .data(topojson.feature(europe, europe.objects.europe).features)\n      .enter()\n      .append(\"path\")\n      .attr(\"d\", this.path)\n      .attr(\"fill\", \"#e4e4e4\");\n    // Sweden\n    this.g\n      .selectAll(\".continent_Sweden_subnits\")\n      .data(topojson.feature(sweden, sweden.objects.subunits).features)\n      .enter()\n      .append(\"path\")\n      .attr(\"class\", function(d) {\n        return \"country-\" + d.id;\n      })\n      .attr(\"d\", this.path)\n      .attr(\"fill\", \"#bdbdbd\"); //https://www.color-hex.com/color/d3d3d3#shades-tints\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    // console.log(prevProps);\n    // console.log(prevState);\n    // console.log(this.props.filteredData);\n    // this.updateHovered(this.state.hoveredProject, prevState.hoveredProject);\n    this.updateClicked(this.props, prevProps);\n\n    if (!isEqual(this.props.filteredData, prevProps.filteredData)) {\n      this.updateData(this.props.filteredData);\n      // this.setState({\n      // hoveredProject: null\n      // });\n      this.projectNavigator.goToRoot(this.props.history, this.props.location);\n    }\n  }\n\n  // Here update the clicked circles dilemma.\n  updateClicked(props, prevProps) {\n    let projectId = ProjectNavigator.GetProjectId(props.location);\n    let prevProjectId = ProjectNavigator.GetProjectId(prevProps.location);\n    // console.log(props.location);\n    // console.log(prevProps.location);\n    // if we just started, (i.e. navigated to the site via a permalink with a project id)\n    // the projectId and prevProjectId will be identical because of how prevProps.location works\n    // so change it to -1.\n    // console.log(projectId);\n    if (!this.projectNavigator.hasChangedSinceInit()) {\n      prevProjectId = -1;\n      this.projectNavigator.change();\n      // this.projects.selectAll('circle').classed('clicked_bubble',false);\n      // d3.select('#project-'+stra).classed('clicked_bubble',true);\n    }\n\n    if (projectId === prevProjectId) return;\n\n    this.projects.selectAll(\"circle\").classed(\"clicked_bubble\", false);\n    this.projects\n      .selectAll(\"circle\")\n      .filter(function(d) {\n        for (var j = 0; j < d.data.length; j++) {\n          if (d.data[j].survey_answers.project_id === projectId) {\n            return true;\n          }\n        }\n        return false;\n      })\n      .classed(\"clicked_bubble\", function(d) {\n        return true;\n      });\n\n    // necessary only if clicking a project changes svgWrapper size (i.e. infobox takes up more or less space than before)\n    // if ((projectId === -1 && prevProjectId !== -1) || (projectId !== -1 && prevProjectId === -1))\n    // this.draw();\n\n    // if no project in path, we done\n    if (projectId === -1) return;\n\n    // if the project from the url doesn't exist in filteredData, redirect to root\n    if (\n      !this.projectNavigator.projectExists(props.location, props.filteredData)\n    ) {\n      this.projectNavigator.redirectToRoot(props.history);\n      return;\n    }\n  }\n\n  updateData(dat) {\n    var mockData_real = [];\n    let tetra = dat.data.length;\n    for (var i = 0; i < tetra; i++) {\n      var da = dat.data[i].survey_answers;\n      var leng = da.locations.length;\n      for (var j = 0; j < leng; j++) {\n        var obj = {};\n        //https://stackoverflow.com/questions/728360/how-do-i-correctly-clone-a-javascript-object\n        obj.survey_answers = JSON.parse(JSON.stringify(da));\n        obj.survey_answers.location = da.locations[j];\n        mockData_real.push(obj);\n      }\n    }\n    var loc_circles = [];\n    let tetr = mockData_real.length;\n    for (var i = 0; i < tetr; i++) {\n      var ob = {};\n      ob.name = mockData_real[i].survey_answers.location;\n      ob.data = mockData_real[i];\n      loc_circles.push(ob);\n    }\n\n    // My variable names are awful here.\n    this.xx_loc = [];\n    for (var i = 0; i < tetr; i++) {\n      var ab = loc_circles[i].name;\n      var xx = false;\n      for (var j = 0; j < this.xx_loc.length; j++) {\n        var k = this.xx_loc[j].name;\n        if (ab.match(k)) {\n          var tt = this.xx_loc[j].data;\n          tt.push(loc_circles[i].data);\n          this.xx_loc[j].data = tt;\n          xx = true;\n        }\n      }\n      if (xx === false) {\n        var obj = {};\n        obj.name = ab;\n        var xxx = loc_circles[i].data;\n        obj.data = [];\n        obj.data.push(xxx);\n        this.xx_loc.push(obj);\n      }\n    }\n\n    this.project_circles = this.projects\n      .selectAll(\"circle\")\n      .data(this.xx_loc, d => {\n        return d.name;\n      });\n    this.project_circles\n      .exit()\n      .transition()\n      .attr(\"r\", 0)\n      .remove();\n\n    this.project_circles.transition().attr(\"r\", d => {\n      let a = d.data.length;\n      let i = d3.interpolateNumber(3 + a, 30 * a);\n      let x = d3.zoomTransform(this.svg.node()).y * -1 - 1000;\n      if (x > 0) {\n        let t = x / 21776;\n        return i(t);\n      }\n      return 3 + a;\n    });\n\n    this.project_circles\n      .enter()\n      .append(\"circle\")\n      .attr(\"id\", function(d, i) {\n        let stra = d.name.split(\" \")[0];\n        return \"project-\" + stra;\n      })\n      .attr(\"cx\", d => {\n        let c = project_coordinates[d.name];\n        return this.projection([c.x, c.y])[0];\n      })\n      .attr(\"cy\", d => {\n        let c = project_coordinates[d.name];\n        return this.projection([c.x, c.y])[1];\n      })\n      .attr(\"transform\", d => {\n        // I hate projections.\n        let c = project_coordinates[d.name];\n        let cx = this.projection([c.x, c.y]);\n        var trans = d3.zoomTransform(this.svg.node());\n        var t = trans.apply(cx);\n        let x = [t[0] - cx[0], t[1] - cx[1]];\n        return \"translate(\" + x + \")\";\n      })\n      .classed(\"bubble\", \"true\")\n      .style(\"stroke-width\", 0.7)\n      .style(\"stroke\", \"#007082\")\n      // .attr(\"fill\",\"#007d91\")\n      .attr(\"fill\", \"hsl(173, 100%, 37%)\") // Temporary\n      .on(\"mouseover\", d => {\n        let tx = \"\";\n        if (d.data.length > 1) {\n          tx = \"<b>\" + d.name + \"</b><br>\" + d.data.length + \" Projects\";\n        } else {\n          tx =\n            \"<b>\" +\n            d.name +\n            \"</b>\\n<br>\" +\n            d.data[0].survey_answers.project_title;\n        }\n        this.tooltip2.transition().style(\"opacity\", 0.9);\n        this.tooltip2\n          .html(tx)\n          .style(\"left\", d3.event.offsetX + \"px\")\n          .style(\"top\", d3.event.offsetY - 18 + \"px\")\n          .style(\"max-width\", 200 + \"px\");\n      })\n      .on(\"mouseout\", d => {\n        this.tooltip2.transition(\"check\").style(\"opacity\", 0);\n      })\n      .on(\"click\", d => {\n        // Here update the clicked one project = multiple cities problem.\n        let stra = d.name.split(\" \")[0];\n        if (d.data.length === 1) {\n          let id_real = d.data[0].survey_answers.project_id;\n          this.projectNavigator.goToProject(\n            this.props.history,\n            this.props.location,\n            d.data[0].survey_answers.project_id\n          );\n          this.projects.selectAll(\"circle\").classed(\"clicked_bubble\", false);\n          this.projects\n            .selectAll(\"circle\")\n            .filter(function(d) {\n              for (var j = 0; j < d.data.length; j++) {\n                if (d.data[j].survey_answers.project_id === id_real) {\n                  return true;\n                }\n              }\n              return false;\n            })\n            .classed(\"clicked_bubble\", function(d) {\n              return true;\n            });\n        } else {\n          this.multiple_projects_box.text(\"\");\n          this.multiple_projects_box.transition().style(\"opacity\", 0.9);\n          var header = d3\n            .select(\".multiple_projects_box\")\n            .append(\"h4\")\n            .style(\"margin-top\", \"2px\")\n            .text(d.name + \" has \" + d.data.length + \" projects\");\n\n          var projects_listed = d3\n            .select(\".multiple_projects_box\")\n            .append(\"ul\")\n            .classed(\"mp_inner_list\", true);\n          projects_listed.exit().remove();\n          projects_listed\n            .selectAll(\"li\")\n            .data(d.data, d => {\n              return d.survey_answers.project_id;\n            })\n            .enter()\n            .append(\"li\")\n            .style(\"cursor\", \"pointer\")\n            .on(\"click\", d => {\n              var id_real = d.survey_answers.project_id;\n              this.projectNavigator.goToProject(\n                this.props.history,\n                this.props.location,\n                d.survey_answers.project_id\n              );\n              this.multiple_projects_box.transition().style(\"opacity\", 0);\n              this.multiple_projects_box.text(\"\");\n              this.projects\n                .selectAll(\"circle\")\n                .classed(\"clicked_bubble\", false);\n\n              this.projects\n                .selectAll(\"circle\")\n                .filter(function(d) {\n                  for (var j = 0; j < d.data.length; j++) {\n                    if (d.data[j].survey_answers.project_id === id_real) {\n                      return true;\n                    }\n                  }\n                  return false;\n                })\n                .classed(\"clicked_bubble\", function(d) {\n                  return true;\n                });\n            })\n            .text(function(d) {\n              return d.survey_answers.project_title;\n            });\n        }\n      })\n      .transition()\n      .attr(\"r\", d => {\n        let a = d.data.length;\n        let i = d3.interpolateNumber(3 + a, 30 * a);\n        let x = d3.zoomTransform(this.svg.node()).y * -1 - 1000;\n        if (x > 0) {\n          let t = x / 21776;\n          return i(t);\n        }\n        return 3 + a;\n      });\n  }\n\n  zoomed2() {\n    let afa = this.projects.selectAll(\"circle\").data(this.xx_loc, d => {\n      return d.name;\n    });\n\n    this.cities_circles.attr(\n      \"transform\",\n      this.circle_transform(d3.event.transform)\n    );\n    afa.attr(\"transform\", this.circle_transform(d3.event.transform));\n\n    this.cities_circles.attr(\"r\", this.circle_size_increase.bind(this));\n    afa.attr(\"r\", this.project_size_increase.bind(this));\n  }\n\n  circle_size_increase(d) {\n    let i = d3.interpolateNumber(1.2, 20);\n    let k = d3.event.transform.k - 1;\n    let t = k / 100;\n    return i(t);\n  }\n\n  // Projects increase after zoom in factor X.\n  project_size_increase(d) {\n    let a = d.data.length;\n    let i = d3.interpolateNumber(3 + a, 30 * a);\n    let k = d3.event.transform.k - 1;\n    let t = k / 100;\n    return i(t);\n  }\n\n  // Semantic transformation\n  circle_transform(t) {\n    return function(d) {\n      let c = [this.getAttribute(\"cx\"), this.getAttribute(\"cy\")];\n      let r = t.apply(c);\n      let x = [r[0] - c[0], r[1] - c[1]];\n      return \"translate(\" + x + \")\";\n    };\n  }\n\n  updateScaleLegend() {\n    // Just copied this from the lines following \"this.project_circles.transition()...\"\n    // (lines 193-200) at the time of writing this.\n    const radius = a => {\n      let i = d3.interpolateNumber(3 + a, 30 * a);\n      let k = d3.zoomTransform(this.svg.node()).k - 1;\n      let t = k / 100;\n      return i(t);\n    };\n\n    this.props.updateScaleData([\n      { r: radius(7), label: \"7 projekt\" },\n      { r: radius(4), label: \"4 projekt\" },\n      { r: radius(1), label: \"1 projekt\" }\n    ]);\n  }\n\n  // Efter constructor\n  render() {\n    return (\n      <div\n        className=\"mapWrap\"\n        ref={svgWrapper => (this.svgWrapperRef = svgWrapper)}\n      >\n        <svg\n          className=\"bubbles_svg_area\"\n          id=\"bubbles_svg_area\"\n          ref={svg => {\n            this.svgRef = svg;\n          }}\n        ></svg>\n      </div>\n    );\n  }\n}\n\nMap.propTypes = {\n  data: PropTypes.object.isRequired,\n  filteredData: PropTypes.object.isRequired\n};\n\nexport default withRouter(Map);\n","import React, { Component } from \"react\";\nimport * as d3 from \"d3\";\nimport \"./Bubbles.css\";\nimport mockData from \"../assets/data/mock-data-v10.json\";\nimport partners from \"../assets/data/partners.json\";\nimport debounce from \"lodash.debounce\";\n\nclass Partners extends Component {\n  constructor(props) {\n    super(props);\n    this.omrade_titles = {\n      0: \"Civilsamhälle\",\n      1: \"Forskning\",\n      2: \"Näringsliv\",\n      3: \"Offentlig verksamhet\"\n    };\n\n    this.helix_colors = {\n      0: \"#007d91\",\n      1: \"#EA9A00\",\n      2: \"#00A389\",\n      3: \"#97C28E\"\n    };\n\n    this.helix_colors_borders = {\n      0: \"#007082\",\n      1: \"#d28a00\",\n      2: \"#00927b\",\n      3: \"#87ae7f\"\n    };\n\n    this.margin = { top: 130, right: 20, bottom: 20, left: 160 };\n    this.offset = { x: 0, y: 0 };\n    // Hardcoded section titles\n    this.omrade_titles_x = {\n      3: 70,\n      0: 255,\n      1: 400,\n      2: 570\n    };\n    this.omrade_titles_y = {\n      3: 70,\n      0: 70,\n      1: 70,\n      2: 50\n    };\n\n    // Location on screen\n    this.projectSpace = {\n      0: 415,\n      1: 730\n    };\n    this.projspace_title_x = {\n      0: 410,\n      1: 800\n    };\n    this.projspace_title_y = {\n      0: 10,\n      1: 80\n    };\n\n    this.project_no = \"-1\"; // Changed to string because project_id is now string!\n    this.bubbles = null; // Bubbles in object.\n    this.nodes = {}; // Bubbles as nodes.\n    this.view_option = 0;\n\n    this.forceStrength = 0.025;\n\n    this.createNewNodes = this.createNewNodes.bind(this);\n  }\n\n  componentDidMount() {\n    // console.log(\"heck\");\n    this.height =\n      +this.svgWrapperRef.clientHeight - this.margin.top - this.margin.bottom;\n    this.width =\n      +this.svgWrapperRef.clientWidth - this.margin.left - this.margin.right;\n    // console.log(this.svgWrapperRef.clientHeight);\n    this.tooltip = d3\n      .select(this.svgWrapperRef)\n      .append(\"div\")\n      .attr(\"class\", \"tooltip_bubble_partners\")\n      .style(\"opacity\", 0);\n\n    // $(\"#dropdown_menu\").html(str);\n\n    this.button_collection = d3\n      .select(this.svgWrapperRef)\n      .append(\"div\")\n      .classed(\"button_collection\", true);\n\n    this.normal_button = this.button_collection\n      .append(\"div\")\n      .classed(\"button\", true)\n      .classed(\"overview_button\", true)\n      .classed(\"button_selected\", true)\n      .on(\"click\", () => {\n        d3.selectAll(\".button\").classed(\"button_selected\", false);\n        this.normal_button.classed(\"button_selected\", true);\n        this.move_bubbles(0);\n      })\n      .text(\"Översikt\");\n    this.helix_button = this.button_collection\n      .append(\"div\")\n      .classed(\"button\", true)\n      .classed(\"helix_button\", true)\n      .on(\"click\", () => {\n        d3.selectAll(\".button\").classed(\"button_selected\", false);\n        this.helix_button.classed(\"button_selected\", true);\n        this.move_bubbles(1);\n      })\n      .text(\"Quadruple Helix\");\n\n    this.expand_button = this.button_collection\n      .append(\"div\")\n      .classed(\"button\", true)\n      .classed(\"expand_button\", true)\n      .on(\"click\", () => {\n        d3.selectAll(\".button_collections\").style(\"display\", \"initial\");\n      })\n      .text(\"Projekt ↓ \");\n\n    this.nodes = this.createNewNodes(partners);\n\n    this.projspace_title = {};\n    this.projspace_title[0] = \"Partners\";\n    for (var i = 0; i < mockData.data.length; i++) {\n      this.projspace_title[mockData.data[i].survey_answers.project_id] =\n        mockData.data[i].survey_answers.project_title;\n    }\n\n    // !!!!!!!!!!\n    // This is good code. Just needs to be placed elsewhere.\n    this.button_collections = d3\n      .select(this.svgWrapperRef)\n      .append(\"div\")\n      .classed(\"button_collections\", true)\n      // .style('width','100%')\n      .style(\"background-color\", \"lightgrey\");\n    this.button_collections\n      .append(\"h2\")\n      .text(\"Projekt\")\n      .style(\"margin-top\", \"2px\");\n    this.project_buttons = this.button_collections\n      .append(\"div\")\n      .selectAll(\"div\")\n      .data(mockData.data);\n    this.project_buttons\n      .enter()\n      .append(\"div\")\n      // .text('hey')\n      .classed(\"buttons\", true)\n      .classed(\"project_button\", true)\n      // .text( d => {console.log(d); return \"gaga\"});\n      .on(\"click\", d => {\n        this.change_view_spec(2, d.survey_answers.project_id);\n        d3.selectAll(\".button_collections\").style(\"display\", \"none\");\n        d3.selectAll(\".button\").classed(\"button_selected\", false);\n        this.expand_button.classed(\"button_selected\", true);\n      })\n      .on(\"mouseover\", function(d) {\n        d3.select(this).style(\"background-color\", \"white\");\n      })\n      .on(\"mouseout\", function(d) {\n        d3.select(this).style(\"background-color\", \"lightgrey\");\n      })\n      .html(d => {\n        return d.survey_answers.project_title + \"<br>\";\n      });\n    // !!!!!!!!!!\n\n    this.omradeCenters = {\n      0: { x: 255, y: 0 },\n      1: { x: 400, y: 0 },\n      2: { x: 570, y: 0 },\n      3: { x: 70, y: 0 }\n    };\n\n    this.center = { x: this.width / 2, y: this.height / 2 };\n\n    // this.projspace_title = {};\n    this.scaleLegendDebounce = debounce(() => this.updateScaleLegend(), 200);\n    this.zoom = d3\n      .zoom()\n      .scaleExtent([0.2, 20])\n      .on(\"zoom.transform\", () => {\n        this.g.attr(\"transform\", d3.event.transform);\n      })\n      .on(\"zoom.legend\", this.scaleLegendDebounce);\n\n    this.svg = d3\n      .select(this.svgRef)\n      .attr(\"width\", this.width)\n      .attr(\"height\", this.height)\n      .call(this.zoom);\n    this.updateScaleLegend();\n    this.svg.on(\"click\", () => {\n      if (d3.event.target.class !== \"project_button\") {\n        // this.projectNavigator.goToRoot(this.props.history, this.props.location);\n        d3.selectAll(\".button_collections\").style(\"display\", \"none\");\n      }\n    });\n    this.g = this.svg.append(\"g\");\n\n    this.simulation = d3\n      .forceSimulation()\n      .velocityDecay(0.2)\n      .force(\n        \"x\",\n        d3\n          .forceX()\n          .strength(this.forceStrength)\n          .x(this.center.x)\n      )\n      .force(\n        \"y\",\n        d3\n          .forceY()\n          .strength(this.forceStrength)\n          .y(this.center.y)\n      )\n      .force(\"charge\", d3.forceManyBody().strength(this.charge.bind(this)))\n      .on(\"tick\", this.ticked.bind(this));\n\n    this.simulation.stop();\n    this.maxAmount = d3.max(mockData, d => {\n      return +d.total_amount;\n    });\n\n    this.radiusScale = d3\n      .scalePow()\n      .exponent(0.5)\n      .range([2, 85])\n      .domain([0, this.maxAmount]);\n\n    // console.log(mockData);\n    this.bubbles = this.g.selectAll(\".bubble\").data(this.nodes, d => {\n      return d.id;\n    });\n\n    this.bubblesE = this.bubbles\n      .enter()\n      .append(\"circle\")\n      .classed(\"bubble\", true)\n      .attr(\"r\", 0)\n      .style(\"fill\", d => {\n        return this.helix_colors[d.kategori];\n      })\n      .attr(\"stroke-width\", 0.5)\n      .attr(\"stroke\", d => {\n        return this.helix_colors_borders[d.kategori];\n      })\n      .on(\"mouseover\", d => {\n        let id = d.id;\n        // this.parentNode.appendChild(this);\n        d3.selectAll(\".bubble\")\n          .filter(function(d) {\n            if (d.id === id) {\n              return false;\n            }\n            return true;\n          })\n          .transition()\n          .style(\"opacity\", \"0.3\");\n\n        this.tooltip.transition().style(\"opacity\", 0.9);\n        this.tooltip\n          .html(d.organisation) //+ \" \" + omrade_titles[d.kategori])\n          .style(\"left\", d3.event.offsetX + \"px\")\n          .style(\"top\", d3.event.offsetY - 28 + \"px\")\n          .style(\"max-width\", 200 + \"px\");\n      })\n      .on(\"mouseout\", d => {\n        this.tooltip.transition().style(\"opacity\", 0);\n        d3.selectAll(\".bubble\")\n          .transition()\n          .style(\"opacity\", \"1\");\n      });\n\n    this.bubbles = this.bubbles.merge(this.bubblesE);\n\n    this.bubbles\n      .transition(\"start\")\n      .duration(2000)\n      .attr(\"r\", d => {\n        return d.radius;\n      });\n\n    // Start simulation\n    this.simulation.nodes(this.nodes);\n    this.move_bubbles(0);\n\n    let omradeData = d3.keys(this.omrade_titles);\n    this.years = this.g.selectAll(\".omradeTitles\").data(omradeData);\n\n    this.years\n      .enter()\n      .append(\"text\")\n      .attr(\"class\", \"omradeTitles\")\n      .attr(\"display\", \"none\")\n      .attr(\"font-size\", \"20px\")\n      .attr(\"x\", d => {\n        return this.omrade_titles_x[d];\n      })\n      .attr(\"y\", d => {\n        return this.omrade_titles_y[d];\n      })\n      .attr(\"text-anchor\", \"middle\")\n      .text(d => {\n        return this.omrade_titles[d];\n      });\n\n    this.temp_str = { 0: \"Partners\", 1: \"temp\" };\n    let projData2 = d3.keys(this.temp_str);\n    this.projTitlesObj = this.g.selectAll(\".projTitles\").data(projData2);\n\n    this.projTitlesObj\n      .enter()\n      .append(\"text\")\n      .attr(\"class\", \"projTitles\")\n      .attr(\"display\", \"none\")\n      .attr(\"font-size\", \"20px\")\n      .attr(\"x\", d => {\n        return this.projspace_title_x[d];\n      })\n      .attr(\"y\", d => {\n        return this.projspace_title_y[d];\n      })\n      .attr(\"text-anchor\", \"middle\")\n      .text(d => {\n        return this.temp_str[d];\n      })\n      .filter(function(d) {\n        if (d === 1) {\n          return true;\n        }\n        return false;\n      })\n      .attr(\"font-size\", \"12px\")\n      .attr(\"id\", \"proj_text_change\");\n\n    // Move legedn elsewhere.\n    // create_legend();\n  }\n\n  move_bubbles(opt) {\n    if (opt === 0) {\n      this.simulation.force(\n        \"x\",\n        d3\n          .forceX()\n          .strength(this.forceStrength)\n          .x(this.center.x)\n      );\n    } else if (opt === 1) {\n      this.simulation.force(\n        \"x\",\n        d3\n          .forceX()\n          .strength(this.forceStrength)\n          .x(this.omrade_view.bind(this))\n      );\n    } else if (opt === 2) {\n      this.simulation.force(\n        \"x\",\n        d3\n          .forceX()\n          .strength(this.forceStrength)\n          .x(this.project_view.bind(this))\n      );\n    }\n    this.view_option = opt;\n    this.simulation.alpha(1).restart();\n    this.toggle_title(opt);\n  }\n\n  toggle_title(opt) {\n    if (opt === 1) {\n      d3.selectAll(\".omradeTitles\").attr(\"display\", \"initial\");\n    } else {\n      d3.selectAll(\".omradeTitles\").attr(\"display\", \"none\");\n    }\n    if (opt === 2) {\n      d3.selectAll(\".projTitles\").attr(\"display\", \"initial\");\n    } else {\n      d3.selectAll(\".projTitles\").attr(\"display\", \"none\");\n    }\n  }\n  omrade_view(d) {\n    return this.omradeCenters[d.kategori].x;\n  }\n\n  project_view(d) {\n    let projs = d.projects;\n    for (var i = 0; i < projs.length; i++) {\n      if (projs[i] === this.project_no) {\n        return this.projectSpace[1];\n      }\n    }\n    return this.projectSpace[0];\n  }\n  charge(d) {\n    return -Math.pow(d.radius, 2.0) * this.forceStrength;\n  }\n\n  ticked() {\n    this.bubbles\n      .attr(\"cx\", d => {\n        return d.x;\n      })\n      .attr(\"cy\", d => {\n        return d.y;\n      });\n  }\n\n  change_view_spec(opt, proj_opt) {\n    this.view_option = opt;\n    this.project_no = proj_opt;\n    d3.select(\"#proj_text_change\").text(this.projspace_title[proj_opt]);\n    this.move_bubbles(opt);\n  }\n\n  componentDidUpdate() {}\n\n  createNewNodes(rawData) {\n    let q_o = {\n      Civilsamhälle: 0,\n      Forskning: 1,\n      Näringsliv: 2,\n      \"Offentlig verksamhet\": 3\n    };\n    let myNodes = rawData.map(function(d, i) {\n      return {\n        id: i,\n        radius: 15,\n        organisation: d.Organisation,\n        value: Math.random() * 10,\n        projects: d.Projects,\n        kategori: q_o[d.Kategori],\n        x: Math.random() * 900,\n        y: Math.random() * 800\n      };\n    });\n    myNodes.sort(function(a, b) {\n      return b.value - a.value;\n    });\n    return myNodes;\n  }\n\n  updateScaleLegend() {\n    const scaleFactor = d3.zoomTransform(this.svg.node()).k;\n    this.props.updateScaleData([{ r: 15 * scaleFactor, label: \"1 partner\" }]);\n  }\n\n  render() {\n    return (\n      <div\n        className=\"partnerWrap\"\n        ref={svgWrapper => (this.svgWrapperRef = svgWrapper)}\n      >\n        <svg\n          className=\"partner_svg_area\"\n          id=\"partner_svg_area\"\n          ref={svg => {\n            this.svgRef = svg;\n          }}\n        ></svg>\n      </div>\n    );\n  }\n}\n\nexport default Partners;\n","import React, { Component } from \"react\";\r\nimport { range } from \"d3\";\r\nimport isEqual from \"react-fast-compare\";\r\nimport PropTypes from \"prop-types\";\r\nimport \"./Matchmaking.css\";\r\n\r\nconst ROWS = 5;\r\nconst COLS = 4;\r\n\r\n// input is '[ROW,COL]' where ROW and COL are numbers.\r\nconst parsePosition = name => {\r\n  const split = name.substring(1, name.length - 1).split(\",\");\r\n  return { row: Number.parseInt(split[0]), col: Number.parseInt(split[1]) };\r\n};\r\n\r\nclass Matchmaking extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      expanded: false\r\n    };\r\n\r\n    this.handleChange = this.handleChange.bind(this);\r\n  }\r\n\r\n  handleChange(event) {\r\n    const position = parsePosition(event.target.name);\r\n    const valueCopy = [...this.props.value];\r\n\r\n    const index = this.props.value.findIndex(item => isEqual(position, item));\r\n    if (index !== -1) valueCopy.splice(index, 1);\r\n    if (event.target.checked) valueCopy.push(position);\r\n\r\n    if (this.props.onChange) this.props.onChange(valueCopy);\r\n  }\r\n\r\n  isChecked(row, col) {\r\n    return (\r\n      this.props.value.findIndex(item => isEqual(item, { row, col })) !== -1\r\n    );\r\n  }\r\n\r\n  render() {\r\n    const columns = row => {\r\n      return range(1, COLS + 1).map(col => (\r\n        <td key={(row - 1) * COLS + col}>\r\n          <input\r\n            type=\"checkbox\"\r\n            name={`[${row},${col}]`}\r\n            checked={this.isChecked(row, col)}\r\n            onChange={this.handleChange}\r\n            disabled={this.props.enabled && !this.props.enabled[row][col]}\r\n          />\r\n        </td>\r\n      ));\r\n    };\r\n\r\n    const rows = range(1, ROWS + 1).map(row => (\r\n      <tr key={row}>{columns(row)}</tr>\r\n    ));\r\n\r\n    return (\r\n      <div className=\"filters-box filters-box--matchmaking\">\r\n        <span className=\"filters-box__title\">Teman och fokusområden</span>\r\n        <div className=\"matchmaking-table-container\">\r\n          <table className=\"matchmaking-table\">\r\n            <tbody>{rows}</tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nMatchmaking.defaultProps = {\r\n  value: []\r\n};\r\n\r\nMatchmaking.propTypes = {\r\n  onChange: PropTypes.func,\r\n  value: PropTypes.arrayOf(\r\n    PropTypes.shape({\r\n      row: PropTypes.number,\r\n      col: PropTypes.number\r\n    })\r\n  ).isRequired,\r\n  enabled: PropTypes.objectOf(PropTypes.objectOf(PropTypes.bool))\r\n};\r\n\r\nexport default Matchmaking;\r\n","import React, { Component, Fragment } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { range } from \"d3\";\nimport { Multiselect } from \"react-widgets\";\nimport { col2focus, row2theme, theme2row } from \"../matrix/MatrixUtility\";\nimport Matchmaking from \"./Matchmaking\";\nimport isEqual from \"react-fast-compare\";\nimport _intersection from \"lodash.intersection\";\nimport \"./Filters.css\";\n\n// find the intersection of an arbitrary number of subsets of data\nfunction intersection(...data) {\n  return { data: _intersection(...data.map(d => d.data)) };\n}\n\n// presentation of the multiselect options\nconst ListItem = ({ item }) => (\n  <div className=\"filters-item\">\n    <span className=\"filters-item__name\">{item.name}</span>\n    <span className=\"filters-item__count\">{item.count}</span>\n  </div>\n);\n\nclass Filters extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      filteredBy: {\n        titles: props.data,\n        locations: props.data,\n        partners: props.data,\n        keywords: props.data,\n        matchmaking: props.data\n      },\n      filterValues: {\n        titles: [],\n        locations: [],\n        partners: [],\n        keywords: [],\n        matchmaking: []\n      },\n      filteredData: props.data\n    };\n\n    // used for optimizations\n    this.prevFilteredData = null;\n\n    // data used by filter components when rendering, e.g.\n    // location names, partners, enabled matrix cells etc\n    this.componentData = {\n      titles: null,\n      locations: null,\n      partners: null,\n      keywords: null,\n      matchmaking: null\n    };\n\n    this.projectLocations = {};\n    this.projectPartners = {};\n    this.projectKeywords = {};\n\n    props.data.data.forEach(d => {\n      this.projectLocations[d.survey_answers.project_id] = new Set();\n      d.survey_answers.locations.forEach(location => {\n        this.projectLocations[d.survey_answers.project_id].add(location);\n      });\n\n      this.projectPartners[d.survey_answers.project_id] = new Set();\n      d.survey_answers.other_financiers.forEach(financier => {\n        this.projectPartners[d.survey_answers.project_id].add(financier);\n      });\n      d.survey_answers.other_recipients.forEach(recipient => {\n        this.projectPartners[d.survey_answers.project_id].add(recipient);\n      });\n\n      this.projectKeywords[d.survey_answers.project_id] = new Set();\n      d.survey_answers.keywords.forEach(keyword => {\n        this.projectKeywords[d.survey_answers.project_id].add(keyword);\n      });\n    });\n\n    this.filterBy = {\n      titles: titles => {\n        if (!titles.length) return this.props.data;\n\n        return {\n          data: this.props.data.data.filter(d => {\n            if (!titles.includes(d.survey_answers.project_title)) return false;\n            return true;\n          })\n        };\n      },\n      locations: locations => {\n        if (!locations.length) return this.props.data;\n\n        return {\n          data: this.props.data.data.filter(d => {\n            if (\n              !locations.some(location => {\n                return this.projectLocations[d.survey_answers.project_id].has(\n                  location.name\n                );\n              })\n            )\n              return false;\n            return true;\n          })\n        };\n      },\n      partners: partners => {\n        if (!partners.length) return this.props.data;\n\n        return {\n          data: this.props.data.data.filter(d => {\n            if (\n              !partners.some(partner => {\n                return this.projectPartners[d.survey_answers.project_id].has(\n                  partner.name\n                );\n              })\n            )\n              return false;\n            return true;\n          })\n        };\n      },\n      keywords: keywords => {\n        if (!keywords.length) return this.props.data;\n\n        return {\n          data: this.props.data.data.filter(d => {\n            if (\n              !keywords.some(keyword => {\n                return this.projectKeywords[d.survey_answers.project_id].has(\n                  keyword.name\n                );\n              })\n            )\n              return false;\n            return true;\n          })\n        };\n      },\n      matchmaking: matchmaking => {\n        if (!matchmaking.length) return this.props.data;\n\n        return {\n          data: this.props.data.data.filter(d => {\n            if (\n              !matchmaking.every(position => {\n                return d.survey_answers[col2focus[position.col]].includes(\n                  row2theme[position.row]\n                );\n              })\n            )\n              return false;\n            return true;\n          })\n        };\n      }\n    };\n  }\n\n  empty() {\n    return Object.values(this.state.filterValues).every(\n      value => value.length === 0\n    );\n  }\n\n  filteredByAllExcept(filter) {\n    return intersection(\n      ...Object.entries(this.state.filteredBy)\n        .filter(([key, value]) => key !== filter)\n        .map(([key, value]) => value)\n    );\n  }\n\n  buildTitlesList() {\n    const data = this.filteredByAllExcept(\"titles\");\n    return data.data.map(d => d.survey_answers.project_title);\n  }\n\n  buildLocationList() {\n    const data = this.filteredByAllExcept(\"locations\");\n\n    const ret = new Map();\n    data.data.forEach(d => {\n      d.survey_answers.locations.forEach(location => {\n        ret.has(location)\n          ? ret.set(location, ret.get(location) + 1)\n          : ret.set(location, 1);\n      });\n    });\n\n    return [...ret]\n      .sort()\n      .reduce((arr, [key, value]) => [...arr, { name: key, count: value }], []);\n  }\n\n  buildPartnerList() {\n    const data = this.filteredByAllExcept(\"partners\");\n\n    const ret = new Map();\n    data.data.forEach(d => {\n      this.projectPartners[d.survey_answers.project_id].forEach(partner => {\n        ret.has(partner)\n          ? ret.set(partner, ret.get(partner) + 1)\n          : ret.set(partner, 1);\n      });\n    });\n\n    return [...ret]\n      .sort()\n      .reduce((arr, [key, value]) => [...arr, { name: key, count: value }], []);\n  }\n\n  buildKeywordList() {\n    const data = this.filteredByAllExcept(\"keywords\");\n\n    const ret = new Map();\n    data.data.forEach(d => {\n      d.survey_answers.keywords.forEach(keyword => {\n        ret.has(keyword)\n          ? ret.set(keyword, ret.get(keyword) + 1)\n          : ret.set(keyword, 1);\n      });\n    });\n\n    return [...ret]\n      .sort()\n      .reduce((arr, [key, value]) => [...arr, { name: key, count: value }], []);\n  }\n\n  buildMatchmakingList() {\n    const data = this.state.filteredData;\n\n    const ROWS = 5;\n    const COLS = 4;\n\n    const colRange = range(1, COLS + 1);\n\n    const nonEmpty = {};\n    for (let row = 1; row <= ROWS; ++row) {\n      nonEmpty[row] = {};\n      for (let col = 1; col <= COLS; ++col) {\n        nonEmpty[row][col] = false;\n      }\n    }\n\n    data.data.forEach(d => {\n      colRange.forEach(col => {\n        d.survey_answers[col2focus[col]].forEach(theme => {\n          const row = theme2row[theme];\n          if (!nonEmpty[row][col]) nonEmpty[row][col] = true;\n        });\n      });\n    });\n\n    return nonEmpty;\n  }\n\n  // only render if state changed, ignore props since they shouldn't change anyway\n  shouldComponentUpdate(nextProps, nextState) {\n    if (!isEqual(nextState, this.state)) return true;\n    return false;\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (prevState === this.state) return;\n\n    if (!isEqual(prevState.filterValues, this.state.filterValues)) {\n      const filteredBy = {};\n      Object.keys(this.filterBy).forEach(filter => {\n        if (\n          !isEqual(\n            prevState.filterValues[filter],\n            this.state.filterValues[filter]\n          )\n        ) {\n          filteredBy[filter] = this.filterBy[filter](\n            this.state.filterValues[filter]\n          );\n        }\n      });\n      if (Object.keys(filteredBy).length) {\n        this.setState((state, props) => ({\n          filteredBy: {\n            ...state.filteredBy,\n            ...filteredBy\n          }\n        }));\n      }\n    }\n\n    if (!isEqual(prevState.filteredBy, this.state.filteredBy)) {\n      const newFilteredData = intersection(\n        ...Object.values(this.state.filteredBy)\n      );\n      this.setState({\n        filteredData: newFilteredData\n      });\n      this.props.updateFilteredData(newFilteredData);\n    }\n  }\n\n  render() {\n    // load these here, otherwise lazy evaluation can cause some choppiness in the browser\n    if (this.state.filteredData !== this.prevFilteredData) {\n      this.prevFilteredData = this.state.filteredData;\n      this.componentData = {\n        titles: this.buildTitlesList(),\n        locations: this.buildLocationList(),\n        partners: this.buildPartnerList(),\n        keywords: this.buildKeywordList(),\n        matchmaking: this.buildMatchmakingList()\n      };\n    }\n\n    return (\n      <div className=\"filters\">\n        <h2>Filter</h2>\n        <div className=\"filters-box\">\n          <span className=\"filters-box__title\">Titel</span>\n          <Multiselect\n            data={this.componentData.titles}\n            onChange={titles => {\n              this.setState({\n                filterValues: {\n                  ...this.state.filterValues,\n                  titles\n                }\n              });\n            }}\n            placeholder=\"Filtera efter titlar\"\n            filter=\"contains\"\n            value={this.state.filterValues.titles}\n          />\n        </div>\n        <div className=\"filters-box\">\n          <span className=\"filters-box__title\">Plats</span>\n          <Multiselect\n            data={this.componentData.locations}\n            onChange={locations => {\n              this.setState({\n                filterValues: {\n                  ...this.state.filterValues,\n                  locations\n                }\n              });\n            }}\n            placeholder=\"Filtrera efter plats\"\n            valueField=\"name\"\n            textField=\"name\"\n            itemComponent={ListItem}\n            value={this.state.filterValues.locations}\n          />\n        </div>\n        <div className=\"filters-box\">\n          <span className=\"filters-box__title\">Partner</span>\n          <Multiselect\n            data={this.componentData.partners}\n            onChange={partners => {\n              this.setState({\n                filterValues: {\n                  ...this.state.filterValues,\n                  partners\n                }\n              });\n            }}\n            placeholder=\"Filtrera efter partners\"\n            filter=\"contains\"\n            valueField=\"name\"\n            textField=\"name\"\n            itemComponent={ListItem}\n            value={this.state.filterValues.partners}\n          />\n        </div>\n        <div className=\"filters-box\">\n          <span className=\"filters-box__title\">Nyckelord</span>\n          <Multiselect\n            data={this.componentData.keywords}\n            onChange={keywords => {\n              this.setState({\n                filterValues: {\n                  ...this.state.filterValues,\n                  keywords\n                }\n              });\n            }}\n            placeholder=\"Filtera efter nyckelord\"\n            filter=\"contains\"\n            valueField=\"name\"\n            textField=\"name\"\n            itemComponent={ListItem}\n            value={this.state.filterValues.keywords}\n          />\n        </div>\n\n        <Matchmaking\n          value={this.state.filterValues.matchmaking}\n          onChange={matchmaking => {\n            this.setState({\n              filterValues: {\n                ...this.state.filterValues,\n                matchmaking\n              }\n            });\n          }}\n          enabled={this.componentData.matchmaking}\n        />\n\n        {!this.empty() && (\n          <Fragment>\n            <p className=\"filters-results-text\">\n              Visar{\" \"}\n              <span className=\"filters-results-text__number\">\n                {this.state.filteredData.data.length}\n              </span>{\" \"}\n              av{\" \"}\n              <span className=\"filters-results-text__number\">\n                {this.props.data.data.length}\n              </span>{\" \"}\n              projekt.\n            </p>\n\n            <div className=\"filters-button-box\">\n              <button\n                className=\"filters-button\"\n                onClick={() =>\n                  this.setState({\n                    filterValues: Object.entries(\n                      this.state.filterValues\n                    ).reduce((obj, [k, _]) => ({ ...obj, [k]: [] }), {})\n                  })\n                }\n              >\n                Rensa filter\n              </button>\n            </div>\n          </Fragment>\n        )}\n      </div>\n    );\n  }\n}\n\nFilters.propTypes = {\n  data: PropTypes.object.isRequired,\n  updateFilteredData: PropTypes.func.isRequired,\n  scaleData: PropTypes.shape({\n    rScale: PropTypes.number,\n    minBudget: PropTypes.number,\n    maxBudget: PropTypes.number\n  })\n};\n\nexport default Filters;\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport \"./ColorLegendItem.css\";\r\n\r\nfunction ColorLegendItem({ text, color }) {\r\n  return (\r\n    <div className=\"color-legend-item\">\r\n      <div className=\"color-legend-item__box\" style={{ background: color }} />\r\n      <span className=\"color-legend-item__text\">{text}</span>\r\n    </div>\r\n  );\r\n}\r\n\r\nColorLegendItem.propTypes = {\r\n  text: PropTypes.string.isRequired,\r\n  color: PropTypes.any.isRequired\r\n};\r\n\r\nexport default ColorLegendItem;\r\n","import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { range } from \"d3\";\r\nimport { withRouter } from \"react-router\";\r\nimport { Transition, animated } from \"react-spring\";\r\nimport ColorLegendItem from \"./ColorLegendItem\";\r\nimport { projectTypes, projectTypeColors } from \"./matrix/MatrixUtility\";\r\nimport \"./ColorLegend.css\";\r\n\r\n// NOTE: Hardcoded for now, but for prettier code these could be imported directly from Partners.jsx\r\nconst omrade_titles = {\r\n  0: \"Civilsamhälle\",\r\n  1: \"Forskning\",\r\n  2: \"Näringsliv\",\r\n  3: \"Offentlig verksamhet\"\r\n};\r\n\r\nconst helix_colors = {\r\n  0: \"#007d91\",\r\n  1: \"#EA9A00\",\r\n  2: \"#00A389\",\r\n  3: \"#97C28E\"\r\n};\r\n\r\nfunction RouteColorLegend({ labels }) {\r\n  let items = labels.map(label => (\r\n    <li key={label.text}>\r\n      <ColorLegendItem {...label} />\r\n    </li>\r\n  ));\r\n\r\n  return (\r\n    <div className=\"color-legend\">\r\n      <ul>{items}</ul>\r\n    </div>\r\n  );\r\n}\r\n\r\nRouteColorLegend.propTypes = {\r\n  labels: PropTypes.arrayOf(\r\n    PropTypes.shape({\r\n      text: PropTypes.string.isRequired,\r\n      color: PropTypes.any.isRequired\r\n    })\r\n  ).isRequired\r\n};\r\n\r\nclass ColorLegend extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    const mapLabels = [{ text: \"Projekt\", color: \"#007d91\" }]; // hard-coded\r\n    const matrixLabels = projectTypes.map(type => ({\r\n      text: type,\r\n      color: projectTypeColors(type)\r\n    }));\r\n    const partnersLabels = range(4).map(i => ({\r\n      text: omrade_titles[i],\r\n      color: helix_colors[i]\r\n    }));\r\n\r\n    this.legends = {\r\n      map: <RouteColorLegend labels={mapLabels} />,\r\n      matrix: <RouteColorLegend labels={matrixLabels} />,\r\n      partners: <RouteColorLegend labels={partnersLabels} />\r\n    };\r\n  }\r\n\r\n  shouldComponentUpdate(nextProps, nextState) {\r\n    if (this.props.location.pathname !== nextProps.location.pathname)\r\n      return true;\r\n    return false;\r\n  }\r\n\r\n  render() {\r\n    const route = Object.keys(this.legends).find(route =>\r\n      this.props.location.pathname.includes(route)\r\n    );\r\n\r\n    return (\r\n      <Transition\r\n        native\r\n        items={route}\r\n        from={{ height: 0, opacity: 0 }}\r\n        enter={{ height: \"auto\", opacity: 1 }}\r\n        leave={{ height: 0, opacity: 0 }}\r\n      >\r\n        {route =>\r\n          route !== undefined &&\r\n          (props => (\r\n            <animated.div style={{ ...props }}>\r\n              {this.legends[route]}\r\n            </animated.div>\r\n          ))\r\n        }\r\n      </Transition>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withRouter(ColorLegend);\r\n","import React, { Component } from \"react\";\r\nimport { select, easePolyOut } from \"d3\";\r\nimport PropTypes from \"prop-types\";\r\nimport \"./ScaleLegend.css\";\r\n\r\nconst masterTransition = transition =>\r\n  transition.duration(800).ease(easePolyOut.exponent(4));\r\n\r\nclass ScaleLegend extends Component {\r\n  componentDidMount() {\r\n    this.parent = select(this.parentRef).style(\"width\", \"150px\");\r\n    this.svg = select(this.svgRef).attr(\"height\", 0);\r\n\r\n    this.margin = { top: 10, right: 10, bottom: 10, left: 20 };\r\n    this.lineWidth = 10;\r\n    this.labelWidth = 60; // hard-coded approximation of label width for centering\r\n\r\n    this.updateData(this.props.scaleData);\r\n  }\r\n\r\n  updateData(data) {\r\n    if (!data || !data.length) return;\r\n\r\n    const fixedData = data\r\n      .slice()\r\n      .map((d, i) => ({ ...d, i }))\r\n      .reverse();\r\n    const selection = this.svg.selectAll(\"g\").data(fixedData);\r\n\r\n    const labels = data.map((circle, index) => {\r\n      let left = data[0].r + this.margin.left;\r\n      let top = data[0].r * 2 - circle.r * 2 + this.margin.top;\r\n      let width = data[0].r + this.lineWidth;\r\n      if (index === data.length - 1) {\r\n        left += circle.r;\r\n        top += circle.r;\r\n        width -= circle.r;\r\n      }\r\n\r\n      return { left, top, width };\r\n    });\r\n\r\n    // We the previous height and width to align the items properly on enter,\r\n    // otherwise it will looks like they're sliding on from the side.\r\n    const svgHeight = data[0].r * 2 + this.margin.top + this.margin.bottom;\r\n    const svgHeightChange = svgHeight - this.svg.attr(\"height\");\r\n    const parentWidth =\r\n      data[0].r * 2 +\r\n      this.margin.left +\r\n      this.margin.right +\r\n      this.lineWidth +\r\n      this.labelWidth;\r\n    const parentWidthChange =\r\n      parentWidth - Number.parseInt(this.svg.style(\"width\").replace(\"px\", \"\"));\r\n\r\n    this.parent\r\n      .transition()\r\n      .call(masterTransition)\r\n      .style(\"width\", `${parentWidth}px`);\r\n\r\n    this.svg\r\n      .transition()\r\n      .call(masterTransition)\r\n      .attr(\"height\", svgHeight);\r\n\r\n    selection\r\n      .exit()\r\n      .call(g => g.select(\"line\").attr(\"opacity\", 0))\r\n      .call(g => g.select(\"text\").attr(\"opacity\", 0))\r\n      .transition()\r\n      .call(masterTransition)\r\n      .call(g =>\r\n        g\r\n          .select(\"circle\")\r\n          .attr(\"cx\", data[0].r + this.margin.left)\r\n          .attr(\"cy\", d => data[0].r * 2 - d.r + this.margin.top)\r\n          .attr(\"opacity\", 0)\r\n      )\r\n      .remove();\r\n\r\n    selection\r\n      .transition()\r\n      .call(masterTransition)\r\n      .call(g =>\r\n        g\r\n          .select(\"circle\")\r\n          .attr(\"opacity\", 1)\r\n          .attr(\"r\", d => d.r)\r\n          .attr(\"cx\", data[0].r + this.margin.left)\r\n          .attr(\"cy\", d => data[0].r * 2 - d.r + this.margin.top)\r\n      )\r\n      .call(g =>\r\n        g\r\n          .select(\"line\")\r\n          .attr(\"opacity\", 1)\r\n          .attr(\"x1\", d => labels[d.i].left)\r\n          .attr(\"x2\", d => labels[d.i].left + labels[d.i].width)\r\n          .attr(\"y1\", d => labels[d.i].top)\r\n          .attr(\"y2\", d => labels[d.i].top)\r\n      )\r\n      .call(g =>\r\n        g\r\n          .select(\"text\")\r\n          .attr(\"opacity\", 1)\r\n          .attr(\"x\", d => labels[d.i].left + labels[d.i].width + 5)\r\n          .attr(\"y\", d => labels[d.i].top)\r\n          .text(d => d.label)\r\n      );\r\n\r\n    selection\r\n      .enter()\r\n      .append(\"g\")\r\n      .call(g =>\r\n        g\r\n          .append(\"circle\")\r\n          .attr(\"r\", d => d.r)\r\n          .attr(\"cx\", data[0].r + this.margin.left - parentWidthChange / 2)\r\n          .attr(\r\n            \"cy\",\r\n            d => data[0].r * 2 - d.r + this.margin.top - svgHeightChange\r\n          )\r\n          .attr(\"opacity\", 0)\r\n      )\r\n      .call(g =>\r\n        g\r\n          .append(\"line\")\r\n          .attr(\"x1\", d => labels[d.i].left - parentWidthChange / 2)\r\n          .attr(\r\n            \"x2\",\r\n            d => labels[d.i].left + labels[d.i].width - parentWidthChange / 2\r\n          )\r\n          .attr(\"y1\", d => labels[d.i].top - svgHeightChange)\r\n          .attr(\"y2\", d => labels[d.i].top - svgHeightChange)\r\n          .attr(\"shape-rendering\", \"crispEdges\")\r\n          .attr(\"opacity\", 0)\r\n      )\r\n      .call(g =>\r\n        g\r\n          .append(\"text\")\r\n          .attr(\r\n            \"x\",\r\n            d =>\r\n              labels[d.i].left + labels[d.i].width + 5 - parentWidthChange / 2\r\n          )\r\n          .attr(\"y\", d => labels[d.i].top - svgHeightChange)\r\n          .attr(\"alignment-baseline\", \"central\")\r\n          .text(d => d.label)\r\n          .attr(\"opacity\", 0)\r\n      )\r\n      .transition()\r\n      .call(masterTransition)\r\n      .call(g =>\r\n        g\r\n          .select(\"circle\")\r\n          .attr(\"cx\", data[0].r + this.margin.left)\r\n          .attr(\"cy\", d => data[0].r * 2 - d.r + this.margin.top)\r\n          .attr(\"opacity\", 1)\r\n      )\r\n      .call(g =>\r\n        g\r\n          .select(\"line\")\r\n          .attr(\"x1\", d => labels[d.i].left)\r\n          .attr(\"x2\", d => labels[d.i].left + labels[d.i].width)\r\n          .attr(\"y1\", d => labels[d.i].top)\r\n          .attr(\"y2\", d => labels[d.i].top)\r\n          .attr(\"opacity\", 1)\r\n      )\r\n      .call(g =>\r\n        g\r\n          .select(\"text\")\r\n          .attr(\"x\", d => labels[d.i].left + labels[d.i].width + 5)\r\n          .attr(\"y\", d => labels[d.i].top)\r\n          .attr(\"opacity\", 1)\r\n      );\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (prevProps.scaleData !== this.props.scaleData)\r\n      this.updateData(this.props.scaleData);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"scale-legend\" ref={parent => (this.parentRef = parent)}>\r\n        <svg ref={svg => (this.svgRef = svg)} width=\"100%\" />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nScaleLegend.propTypes = {\r\n  scaleData: PropTypes.arrayOf(\r\n    PropTypes.shape({\r\n      r: PropTypes.number.isRequired,\r\n      label: PropTypes.string.isRequired\r\n    })\r\n  )\r\n};\r\n\r\nexport default ScaleLegend;\r\n","import React, { Component } from \"react\";\r\nimport { withRouter } from \"react-router\";\r\nimport Filters from \"./filters/Filters\";\r\nimport ColorLegend from \"./ColorLegend\";\r\nimport ScaleLegend from \"./ScaleLegend\";\r\nimport logo from \"./assets/images/Logo_ViableCities_240pxl.png\";\r\nimport \"./Sidebar.css\";\r\n\r\nclass Sidebar extends Component {\r\n  render() {\r\n    const noPartners = !this.props.location.pathname.includes(\"partners\");\r\n\r\n    return (\r\n      <div className=\"sidebar\">\r\n        <div className=\"sidebar__top\">\r\n          <a\r\n            href=\"http://viablecities.com/\"\r\n            target=\"_blank\"\r\n            rel=\"noopener noreferrer\"\r\n          >\r\n            <img className=\"sidebar__logo\" src={logo} alt=\"Viable Cities\" />\r\n          </a>\r\n          <div style={{ visibility: noPartners ? \"visible\" : \"hidden\" }}>\r\n            <Filters\r\n              data={this.props.data}\r\n              updateFilteredData={this.props.updateFilteredData}\r\n            />\r\n          </div>\r\n        </div>\r\n        <div className=\"sidebar__bottom\">\r\n          <ScaleLegend scaleData={this.props.scaleData} />\r\n          <ColorLegend />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withRouter(Sidebar);\r\n","import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { Transition, animated } from \"react-spring\";\r\nimport image1 from \"./assets/images/about/image1.png\";\r\nimport image2 from \"./assets/images/about/image2.png\";\r\nimport \"./About.css\";\r\n\r\nclass About extends Component {\r\n  render() {\r\n    return (\r\n      <Transition\r\n        native\r\n        items={this.props.about}\r\n        from={{\r\n          background: \"rgba(0, 0, 0, 0)\",\r\n          opacity: 0,\r\n          transform: \"translate(0, 50px)\"\r\n        }}\r\n        enter={{\r\n          background: \"rgba(0, 0, 0, 0.5)\",\r\n          opacity: 1,\r\n          transform: \"translate(0, 0)\"\r\n        }}\r\n        leave={{\r\n          background: \"rgba(0, 0, 0, 0)\",\r\n          opacity: 0,\r\n          transform: \"translate(0, 30px)\"\r\n        }}\r\n      >\r\n        {about =>\r\n          about &&\r\n          (props => (\r\n            <animated.div\r\n              className=\"about-bg\"\r\n              style={{ background: props.background }}\r\n              onClick={e =>\r\n                e.target === e.currentTarget &&\r\n                this.props.about &&\r\n                this.props.toggleAbout()\r\n              }\r\n            >\r\n              <animated.div\r\n                className=\"about-content\"\r\n                style={{ opacity: props.opacity, transform: props.transform }}\r\n              >\r\n                <h1>About</h1>\r\n                <small>ViableCitiesViz, version 0.7 beta [2018-12-04]</small>\r\n                <p>\r\n                  This web interface is part of ongoing development to create a\r\n                  visualization tool for projects and impact assessment within\r\n                  Viable Cities, the Swedish Strategic Innovation programme for\r\n                  smart sustainable cities (\r\n                  <a href=\"https://viablecities.com/\">viablecities.com</a>).\r\n                </p>\r\n                <p>\r\n                  The data has been provided by Viable Cities; the Swedish\r\n                  Energy Agency; The Swedish Innovation Agency: and Formas. It\r\n                  includes information about signed contracts within the Viable\r\n                  Cities project portfolio.\r\n                </p>\r\n                <p>\r\n                  ViableCitiesViz is an intermediate result from open source\r\n                  development within the strategic project Knowledge-sharing\r\n                  that develops 2017-2021. If you have questions regarding the\r\n                  data or are interested in beta-testing or a customization for\r\n                  your own organisation, please contact the project leader\r\n                  Charlie Gullström, KTH Viable Cities (\r\n                  <a href=\"mailto:charlie.gullstrom@viablecities.com\">\r\n                    charlie.gullstrom@viablecities.com\r\n                  </a>\r\n                  ) or Mario Romero, KTH Visualization Center (\r\n                  <a href=\"mailto:marior@kth.se\">marior@kth.se</a>).\r\n                </p>\r\n                <p>\r\n                  The design and development team has consisted of: Jonas\r\n                  Beckman, Charlie Gullström, Tobias Hindersson, Alex Jonsson,\r\n                  Victor Kesten, Åsa Minoz, Mario Romero.\r\n                </p>\r\n                <p>\r\n                  This web interface is the intellectual property of Viable\r\n                  Cities, which claims copyright for the images presented\r\n                  herein. We kindly request that Viable Cities be acknowledged\r\n                  if pictures from this interface are quoted, copied, reproduced\r\n                  or distributed, refer to:{\" \"}\r\n                  <a href=\"https://viablecities.com/\">viablecities.com</a>.\r\n                </p>\r\n                <small>\r\n                  This work is licensed under a{\" \"}\r\n                  <a\r\n                    rel=\"license\"\r\n                    href=\"http://creativecommons.org/licenses/by/3.0/deed.en_US\"\r\n                  >\r\n                    Creative Commons Attribution 3.0 Unported License\r\n                  </a>\r\n                  .\r\n                </small>\r\n                <p className=\"about-content__repo\">\r\n                  <strong>GitHub repository:</strong>\r\n                  <br />\r\n                  <a href=\"https://github.com/ViableCitiesViz/viablecitiesviz.github.io\">\r\n                    ViableCitiesViz/viablecitiesviz.github.io\r\n                  </a>\r\n                </p>\r\n                <div className=\"about-content__images\">\r\n                  <img src={image1} alt=\"Viable Cities logo\" />\r\n                  <img src={image2} alt=\"Supporting organizations\" />\r\n                </div>\r\n              </animated.div>\r\n            </animated.div>\r\n          ))\r\n        }\r\n      </Transition>\r\n    );\r\n  }\r\n}\r\n\r\nAbout.propTypes = {\r\n  about: PropTypes.bool.isRequired,\r\n  toggleAbout: PropTypes.func.isRequired\r\n};\r\n\r\nexport default About;\r\n","import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { Spring, animated } from \"react-spring\";\r\nimport \"./InfoBoxSection.css\";\r\n\r\nclass InfoBoxSection extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      toggle: props.initToggle || false\r\n    };\r\n    this.onToggle = this.onToggle.bind(this);\r\n  }\r\n\r\n  onToggle() {\r\n    this.setState(state => ({ toggle: !state.toggle }));\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div\r\n        className={`info-box-section ${\r\n          this.state.toggle ? \"info-box-section--toggled\" : \"\"\r\n        }`}\r\n      >\r\n        <div className=\"info-box-section__title\" onClick={this.onToggle}>\r\n          <span className=\"info-box-section__title-text\">\r\n            {this.props.title}\r\n          </span>\r\n          <span className=\"info-box-section__title-cross\">+</span>\r\n        </div>\r\n        <Spring\r\n          native\r\n          from={{ height: this.state.toggle ? \"auto\" : 0 }}\r\n          to={{ height: this.state.toggle ? \"auto\" : 0 }}\r\n        >\r\n          {props => (\r\n            <animated.div className=\"info-box-section__content\" style={props}>\r\n              <div className=\"info-box-section__inner-content\">\r\n                {this.props.children}\r\n              </div>\r\n            </animated.div>\r\n          )}\r\n        </Spring>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nInfoBoxSection.propTypes = {\r\n  title: PropTypes.string,\r\n  children: PropTypes.node.isRequired,\r\n  initToggle: PropTypes.bool\r\n};\r\n\r\nexport default InfoBoxSection;\r\n","import p1 from \"../assets/images/projects/1-Aktivitetsbaserad-modellering.png\";\r\nimport p2 from \"../assets/images/projects/2-DDS-energieffektiv-vard.jpg\";\r\nimport p3 from \"../assets/images/projects/3-Digitalt-kontrollerade-odlingssystem.jpg\";\r\nimport p4 from \"../assets/images/projects/4-Effektiv-energiplanering.jpg\";\r\nimport p5 from \"../assets/images/projects/5-Hotmodellering.jpg\";\r\nimport p6 from \"../assets/images/projects/6-Hallbara-urbana-livstillar.jpg\";\r\nimport p7 from \"../assets/images/projects/7-Klimatkampen-Uppsala.jpg\";\r\nimport p8 from \"../assets/images/projects/8-Ladda-lagra-lanka.png\";\r\nimport p9 from \"../assets/images/projects/9-MERiT.jpg\";\r\nimport p10 from \"../assets/images/projects/10-Mo-Bo.jpg\";\r\nimport p11 from \"../assets/images/projects/11-Matt-och-steg.jpg\";\r\nimport p12 from \"../assets/images/projects/12-SAMIR.jpg\";\r\nimport p13 from \"../assets/images/projects/13-Sensorer-for-luftmiljo.jpg\";\r\nimport p14 from \"../assets/images/projects/14-R-energi.JPG\";\r\nimport p15 from \"../assets/images/projects/15-Sharing-Cities-Sweden.jpg\";\r\nimport p16 from \"../assets/images/projects/16-Matbutik.jpg\";\r\nimport p17 from \"../assets/images/projects/17-Smart-Village.png\";\r\nimport p18 from \"../assets/images/projects/18-Smaskalig-elforsorjning.jpg\";\r\nimport p19 from \"../assets/images/projects/19-Urban-ICT-Arena.jpg\";\r\nimport p20 from \"../assets/images/projects/20-Vardeskapande-med-oppna-data.jpg\";\r\nimport p21 from \"../assets/images/projects/21-3De.jpg\";\r\n\r\nexport default {\r\n  1: p1,\r\n  2: p2,\r\n  3: p3,\r\n  4: p4,\r\n  5: p5,\r\n  6: p6,\r\n  7: p7,\r\n  8: p8,\r\n  9: p9,\r\n  10: p10,\r\n  11: p11,\r\n  12: p12,\r\n  13: p13,\r\n  14: p15,\r\n  15: p14,\r\n  16: p16,\r\n  17: p17,\r\n  18: p18,\r\n  19: p19,\r\n  20: p20,\r\n  21: p21\r\n};\r\n","import React, { Component, Fragment } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport PropTypes from \"prop-types\";\r\nimport { format } from \"d3\";\r\nimport \"./InfoBox.css\";\r\nimport ColorLegendItem from \"../ColorLegendItem\";\r\nimport InfoBoxSection from \"./InfoBoxSection\";\r\nimport projectImages from \"./projectImages\";\r\nimport { projectTypeColors } from \"../matrix/MatrixUtility\";\r\n\r\nclass InfoBox extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.lastProject = null;\r\n  }\r\n\r\n  shouldComponentUpdate(nextProps) {\r\n    if (\r\n      nextProps.project !== this.props.project ||\r\n      nextProps.location !== this.props.location\r\n    )\r\n      return true;\r\n    return false;\r\n  }\r\n\r\n  decorateItems(stringList) {\r\n    return stringList\r\n      .map(str => (\r\n        <span key={str} className=\"info-box__item-decoration\">\r\n          {str}\r\n        </span>\r\n      ))\r\n      .reduce((acc, cur) => [acc, \", \", cur]);\r\n  }\r\n\r\n  render() {\r\n    if (!this.props.project && !this.lastProject) return null;\r\n\r\n    const project = this.props.project || this.lastProject;\r\n    if (this.props.project !== null) this.lastProject = this.props.project;\r\n\r\n    const {\r\n      project_title,\r\n      project_organization,\r\n      project_id,\r\n      budget,\r\n      project_manager,\r\n      dates,\r\n      keywords,\r\n      other_financiers,\r\n      other_recipients,\r\n      description,\r\n      project_type,\r\n      locations,\r\n      link,\r\n      website\r\n    } = project.survey_answers;\r\n\r\n    const partners = [\r\n      ...new Set([...other_financiers, ...other_recipients])\r\n    ].sort();\r\n\r\n    const views = {\r\n      Map: { link: `/map/project/${project_id}`, match: \"/map\" },\r\n      Matrix: { link: `/matrix/project/${project_id}`, match: \"/matrix\" },\r\n      Partners: { link: `/partners/project/${project_id}`, match: \"/partners\" }\r\n    };\r\n\r\n    const vizViews = Object.keys(views).map(viewName => {\r\n      const view = views[viewName];\r\n      const match = this.props.location.pathname.includes(view.match);\r\n      return (\r\n        <Link\r\n          key={viewName}\r\n          to={view.link}\r\n          className={`info-box__view-link ${\r\n            match ? \"info-box__view-link--active\" : \"\"\r\n          }`}\r\n        >\r\n          {viewName}\r\n        </Link>\r\n      );\r\n    });\r\n\r\n    return (\r\n      <div className=\"info-box\">\r\n        <div\r\n          className=\"info-box__splash\"\r\n          style={{ backgroundImage: `url(${projectImages[project_id]})` }}\r\n        />\r\n        <div className=\"info-box__content\">\r\n          <div className=\"info-box__content-header\">\r\n            <h2 className=\"info-box__title\">{project_title}</h2>\r\n            <h3 className=\"info-box__subtitle\">{locations.join(\", \")}</h3>\r\n          </div>\r\n          <div>\r\n            <InfoBoxSection title=\"Generell Information\" initToggle={true}>\r\n              <dl>\r\n                <dt>Typ av projekt</dt>\r\n                <dd>\r\n                  <ColorLegendItem\r\n                    text={project_type}\r\n                    color={projectTypeColors(project_type)}\r\n                  />\r\n                </dd>\r\n\r\n                <dt>Projektorganisation</dt>\r\n                <dd>{project_organization}</dd>\r\n\r\n                <dt>Projektledare</dt>\r\n                <dd>{project_manager}</dd>\r\n\r\n                <dt>Total projektbudget</dt>\r\n                <dd>{`${format(\",\")(budget.total_cost).replace(\r\n                  /,/g,\r\n                  \" \"\r\n                )} kr`}</dd>\r\n\r\n                <dt>Sökt bidrag</dt>\r\n                <dd>{`${format(\",\")(budget.funded).replace(/,/g, \" \")} kr`}</dd>\r\n\r\n                <dt>Projekttid</dt>\r\n                <dd>{`${dates.start} - ${dates.end}`}</dd>\r\n\r\n                <dt>Projektsida</dt>\r\n                <dd>\r\n                  <a href={link}>{link}</a>\r\n                </dd>\r\n\r\n                {website && (\r\n                  <Fragment>\r\n                    <dt>Hemsida</dt>\r\n                    <dd>\r\n                      <a href={website}>{website}</a>\r\n                    </dd>\r\n                  </Fragment>\r\n                )}\r\n              </dl>\r\n            </InfoBoxSection>\r\n\r\n            <InfoBoxSection title=\"Nyckelord\">\r\n              <p>{this.decorateItems(keywords)}</p>\r\n            </InfoBoxSection>\r\n\r\n            <InfoBoxSection title=\"Partners\">\r\n              <p>{this.decorateItems(partners)}</p>\r\n            </InfoBoxSection>\r\n\r\n            <InfoBoxSection title=\"Beskrivning\">\r\n              <p>\r\n                {description.split(\"\\n\").map((item, key) => {\r\n                  return (\r\n                    <Fragment key={key}>\r\n                      {item}\r\n                      <br />\r\n                    </Fragment>\r\n                  );\r\n                })}\r\n              </p>\r\n            </InfoBoxSection>\r\n          </div>\r\n\r\n          <div className=\"info-box__views\">{vizViews}</div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nInfoBox.propTypes = {\r\n  project: PropTypes.object\r\n};\r\n\r\nexport default InfoBox;\r\n","import React, { Component } from \"react\";\r\nimport { withRouter } from \"react-router\";\r\nimport { Transition, animated } from \"react-spring\";\r\nimport PropTypes from \"prop-types\";\r\nimport InfoBox from \"./InfoBox\";\r\nimport \"./AnimatedInfoBox.css\";\r\n\r\nclass AnimatedInfoBox extends Component {\r\n  shouldComponentUpdate(nextProps, nextState) {\r\n    if (\r\n      nextProps.data !== this.props.data ||\r\n      nextProps.id !== this.props.id ||\r\n      nextProps.location !== this.props.location\r\n    )\r\n      return true;\r\n    return false;\r\n  }\r\n\r\n  render() {\r\n    const projectDetails = this.props.data.data.reduce(\r\n      (acc, cur) => ({\r\n        ...acc,\r\n        [cur.survey_answers.project_id]: (\r\n          <InfoBox project={cur} location={this.props.location} />\r\n        )\r\n      }),\r\n      {}\r\n    );\r\n\r\n    return (\r\n      <Transition\r\n        native\r\n        items={this.props.id}\r\n        from={{ opacity: 0, transform: \"translateX(80%)\" }}\r\n        enter={{ opacity: 1, transform: \"translateX(0)\" }}\r\n        leave={{ opacity: 0, transform: \"translateX(70%)\" }}\r\n      >\r\n        {id =>\r\n          id !== -1 &&\r\n          (props => (\r\n            <animated.div className=\"info-box-container\" style={{ ...props }}>\r\n              {projectDetails[id]}\r\n            </animated.div>\r\n          ))\r\n        }\r\n      </Transition>\r\n    );\r\n  }\r\n}\r\n\r\nAnimatedInfoBox.propTypes = {\r\n  data: PropTypes.object,\r\n  id: PropTypes.any\r\n};\r\n\r\nexport default withRouter(AnimatedInfoBox);\r\n","import React, { useState } from \"react\";\nimport {\n  BrowserRouter as Router,\n  Route,\n  Redirect,\n  Switch\n} from \"react-router-dom\";\nimport Header from \"./Header\";\nimport Matrix from \"./matrix/Matrix\";\nimport Map from \"./map/Map\";\nimport Partners from \"./partners/Partners\";\nimport Sidebar from \"./Sidebar\";\nimport About from \"./About\";\nimport AnimatedInfoBox from \"./info-box/AnimatedInfoBox\";\nimport { GetProjectId } from \"./ProjectNavigator\";\nimport mockData from \"./assets/data/mock-data-v10.json\";\nimport usePreloadImages from \"./usePreloadImages\";\nimport \"./App.css\";\nimport \"react-widgets/dist/css/react-widgets.css\";\n\nfunction App() {\n  const [filteredData, setFilteredData] = useState(mockData);\n  const [scaleData, setScaleData] = useState(null);\n  const [about, setAbout] = useState(false);\n\n  usePreloadImages();\n\n  const updateFilteredData = newData => {\n    setFilteredData(newData);\n  };\n\n  const updateScaleData = newData => {\n    setScaleData(newData);\n  };\n\n  const toggleAbout = () => {\n    setAbout(!about);\n  };\n\n  return (\n    <Router basename={process.env.PUBLIC_URL}>\n      <div className=\"App\">\n        <Header toggleAbout={toggleAbout} />\n        <div className=\"App__content\">\n          <About toggleAbout={toggleAbout} about={about} />\n          <Sidebar\n            data={mockData}\n            updateFilteredData={updateFilteredData}\n            scaleData={scaleData}\n          />\n          <Switch>\n            <Route path=\"/\" exact render={props => <Redirect to=\"/map\" />} />\n            <Route\n              path=\"/map\"\n              render={props => (\n                <Map\n                  data={mockData}\n                  filteredData={filteredData}\n                  updateScaleData={updateScaleData}\n                />\n              )}\n            />\n            <Route\n              path=\"/matrix\"\n              render={props => (\n                <Matrix\n                  data={mockData}\n                  filteredData={filteredData}\n                  updateScaleData={updateScaleData}\n                />\n              )}\n            />\n            <Route\n              path=\"/partners\"\n              render={props => <Partners updateScaleData={updateScaleData} />}\n            />\n          </Switch>\n          <Route\n            render={props => (\n              <AnimatedInfoBox\n                data={mockData}\n                id={GetProjectId(props.location)}\n              />\n            )}\n          />\n        </div>\n      </div>\n    </Router>\n  );\n}\n\nexport default App;\n","import { useLayoutEffect } from \"react\";\r\nimport projectImages from \"./info-box/projectImages\";\r\n\r\n/**\r\n * This avoids the visual bug where an image loads while the infobox,\r\n * this way all the images are already loaded.\r\n *\r\n * NOTE: Might not be feasible with more projects.\r\n */\r\n\r\nexport default function usePreloadImages() {\r\n  useLayoutEffect(() => {\r\n    Object.values(projectImages).forEach(url => {\r\n      const img = new Image();\r\n      img.src = url;\r\n    });\r\n  }, []);\r\n}\r\n","// In production, we register a service worker to serve assets from local cache.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\n// cached resources are updated in the background.\n\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === \"localhost\" ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === \"[::1]\" ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener(\"load\", () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            \"This web app is being served cache-first by a service \" +\n              \"worker. To learn more, visit https://goo.gl/SC7cgQ\"\n          );\n        });\n      } else {\n        // Is not local host. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === \"installed\") {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the old content will have been purged and\n              // the fresh content will have been added to the cache.\n              // It's the perfect time to display a \"New content is\n              // available; please refresh.\" message in your web app.\n              console.log(\"New content is available; please refresh.\");\n\n              // Execute callback\n              if (config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log(\"Content is cached for offline use.\");\n\n              // Execute callback\n              if (config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error(\"Error during service worker registration:\", error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get(\"content-type\").indexOf(\"javascript\") === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        \"No internet connection found. App is running in offline mode.\"\n      );\n    });\n}\n\nexport function unregister() {\n  if (\"serviceWorker\" in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","// NOTE: This polyfill causes gh-pages to not work \"Page build failure\"\n// It's still valuable though, giving browser compatability with ie11.\n// So put it back if the website is ever moved away from github pages.\n//import 'react-app-polyfill/ie11';\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}