{"version":3,"sources":["assets/images/projects/7-Klimatkampen-Uppsala.jpg","assets/images/projects/8-Ladda-lagra-lanka.png","assets/images/projects/9-MERiT.jpg","assets/images/projects/10-Mo-Bo.jpg","assets/images/projects/11-Matt-och-steg.jpg","assets/images/projects/12-SAMIR.jpg","assets/images/projects/13-Sensorer-for-luftmiljo.jpg","assets/images/projects/14-R-energi.JPG","assets/images/projects/15-Sharing-Cities-Sweden.jpg","assets/images/projects/16-Matbutik.jpg","assets/images/projects/17-Smart-Village.png","assets/images/projects/18-Smaskalig-elforsorjning.jpg","assets/images/projects/19-Urban-ICT-Arena.jpg","assets/images/projects/20-Vardeskapande-med-oppna-data.jpg","assets/images/projects/21-3De.jpg","Header.jsx","matrix/MatrixUtility.js","matrix/MatrixTooltip.jsx","matrix/MatrixCircleMenu.jsx","ProjectNavigator.js","matrix/Matrix.jsx","map/Map.jsx","partners/Partners.jsx","filters/Matchmaking.jsx","filters/Filters.jsx","ColorLegendItem.jsx","ColorLegend.jsx","ScaleLegend.jsx","Sidebar.jsx","About.jsx","info-box/InfoBoxSection.jsx","info-box/projectImages.js","info-box/InfoBox.jsx","info-box/AnimatedInfoBox.jsx","App.jsx","serviceWorker.js","index.js","assets/images/about/image1.png","assets/images/about/image2.png","assets/images/projects/1-Aktivitetsbaserad-modellering.png","assets/images/projects/2-DDS-energieffektiv-vard.jpg","assets/images/projects/3-Digitalt-kontrollerade-odlingssystem.jpg","assets/images/projects/4-Effektiv-energiplanering.jpg","assets/images/projects/5-Hotmodellering.jpg","assets/images/projects/6-Hallbara-urbana-livstillar.jpg"],"names":["module","exports","__webpack_require__","p","Header","_this","this","viewLinks","map","view","match","props","location","pathname","includes","toLowerCase","react_default","a","createElement","key","className","concat","Link","to","onClick","toggleAbout","href","target","Component","withRouter","col2focus","1","2","3","4","theme2row","testbeds","innovation","financing","management","intelligence","row2theme","5","focusLabel","themeLabel","type2class","Forskningsprojekt","Innovationsprojekt","Förstudie","circleRadius","area","Math","sqrt","PI","circleSizes","ticks","value","project","label","format","display","budget","survey_answers","funded","replace","partners","Object","toConsumableArray","Set","other_financiers","other_recipients","length","locations","projectTypes","projectTypeColors","scaleOrdinal","range","rgb","domain","parseNewlinesY","texts","each","text","select","words","split","x","attr","dy","parseFloat","i","forEach","word","append","parseNewlinesX","y","MatrixTooltip","nextProps","style","top","margin","r","offset","left","project_title","MatrixCircleMenu","width","height","transform","cx","cy","x1","x2","y1","y2","d","t","lib","filter","data","values","valueField","textField","circleSize","onChange","updateCircleSize","ProjectNavigator","rootPath","arguments","undefined","classCallCheck","_hasChangedSinceInit","history","matchPath","path","exact","push","id","filteredData","GetProjectId","find","project_id","prevLocation","params","masterTransition","transition","duration","ease","easePolyOut","exponent","Matrix","possibleConstructorReturn","getPrototypeOf","call","state","hoveredProject","right","bottom","projectNavigator","draw","bind","assertThisInitialized","_this2","svg","svgRef","svgInner","classed","circleSizeWrapper","circleSizeWrapperRef","scaleX","scalePoint","padding","scaleY","circles","on","event","tagName","goToRoot","debounce","window","addEventListener","prevProps","prevState","updateHovered","updateClicked","isEqual","updateData","setState","removeEventListener","init","svgWrapperRef","clientHeight","clientWidth","projectExists","optimalHeight","optimalWidth","oldWidth","oldHeight","dimensionsChanged","selectors","yAxis","themesLabel","xAxis","focusAreasLabel","keys","s","axisLeft","tickSize","yAxisSelection","selection","selectAll","empty","e","axisTop","xAxisSelection","prevProject","projectId","prevProjectId","hasChangedSinceInit","change","datum","neighborSelector","pins","pin","row","col","join","redirectToRoot","_this3","packedData","obj","_loop","theme","maxEnclose","packSiblings","max","packEnclose","rScale","min","step","arr","_loop2","_loop3","objectSpread","packData","updateScaleData","sortedPackedData","sort","b","minSize","maxSize","labelNumbers","circleRadii","significantFigures","Number","parseInt","toPrecision","number","buildScaleData","circle","exit","remove","enter","project_type","goToProject","_this4","ref","svgWrapper","src_matrix_MatrixTooltip","src_matrix_MatrixCircleMenu","Map","scaleLegendDebounce","updateScaleLegend","zoom","d3","scaleExtent","zoomed2","g","projection","rotate","scale","center","translate","multiple_projects_box","projects","cities_container","tooltip","tooltip2","tooltip3","tooltip3_showed","project_count_city","cities_circles","cities","coordinates","html","name","offsetX","offsetY","topojson","europe","objects","features","sweden","subunits","console","log","dat","mockData_real","tetra","da","leng","j","JSON","parse","stringify","loc_circles","tetr","ob","xx_loc","ab","xx","k","tt","xxx","project_circles","node","c","project_coordinates","apply","tx","stra","projects_listed","afa","circle_transform","circle_size_increase","project_size_increase","getAttribute","radius","_this5","Partners","omrade_titles","0","helix_colors","helix_colors_borders","omrade_titles_x","omrade_titles_y","projectSpace","projspace_title_x","projspace_title_y","project_no","bubbles","nodes","view_option","forceStrength","createNewNodes","button_collection","normal_button","move_bubbles","helix_button","expand_button","projspace_title","mockData","button_collections","project_buttons","change_view_spec","omradeCenters","class","simulation","velocityDecay","force","strength","charge","ticked","stop","maxAmount","total_amount","radiusScale","bubblesE","kategori","organisation","merge","omradeData","years","temp_str","projData2","projTitlesObj","opt","omrade_view","project_view","alpha","restart","toggle_title","projs","pow","proj_opt","rawData","q_o","Civilsamhälle","Forskning","Näringsliv","Offentlig verksamhet","myNodes","Organisation","random","Projects","Kategori","scaleFactor","Matchmaking","expanded","handleChange","position","substring","parsePosition","valueCopy","index","findIndex","item","splice","checked","rows","ROWS","COLS","type","isChecked","disabled","enabled","columns","defaultProps","intersection","_len","Array","_key","_intersection","ListItem","_ref","count","Filters","filteredBy","titles","keywords","matchmaking","filterValues","prevFilteredData","componentData","projectLocations","projectPartners","projectKeywords","add","financier","recipient","keyword","filterBy","some","has","partner","every","entries","_ref2","_ref3","slicedToArray","_ref4","_ref5","filteredByAllExcept","ret","set","get","reduce","_ref6","_ref7","_ref8","_ref9","_ref10","_ref11","colRange","nonEmpty","nextState","newFilteredData","updateFilteredData","buildTitlesList","buildLocationList","buildPartnerList","buildKeywordList","buildMatchmakingList","placeholder","itemComponent","src_filters_Matchmaking","react","_ref12","_ref13","defineProperty","ColorLegendItem","color","background","RouteColorLegend","items","labels","src_ColorLegendItem","ColorLegend","matrixLabels","partnersLabels","legends","matrix","route","web","native","from","opacity","leave","div","ScaleLegend","parent","parentRef","lineWidth","labelWidth","scaleData","fixedData","slice","reverse","svgHeight","svgHeightChange","parentWidth","parentWidthChange","Sidebar","noPartners","visibility","src_filters_Filters","src_ScaleLegend_0","src_ColorLegend_0","About","about","currentTarget","rel","src","image1","alt","image2","InfoBoxSection","toggle","initToggle","onToggle","title","children","projectImages","p1","p2","p3","p4","p5","6","p6","7","p7","8","p8","9","p9","10","p10","11","p11","12","p12","13","p13","14","p15","15","p14","16","p16","17","p17","18","p18","19","p19","20","p20","21","p21","InfoBox","lastProject","stringList","str","acc","cur","_project$survey_answe","project_organization","project_manager","dates","description","link","website","views","vizViews","viewName","backgroundImage","src_info_box_InfoBoxSection","total_cost","start","end","decorateItems","AnimatedInfoBox","projectDetails","src_info_box_InfoBox","App","newData","BrowserRouter","basename","process","src_Header_0","src_About_0","src_Sidebar_0","Switch","Route","render","Redirect","src_map_Map","src_matrix_Matrix","partners_Partners","src_info_box_AnimatedInfoBox","Boolean","hostname","ReactDOM","src_App_0","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"6EAAAA,EAAAC,QAAiBC,EAAAC,EAAuB,wECAxCH,EAAAC,QAAiBC,EAAAC,EAAuB,qECAxCH,EAAAC,QAAiBC,EAAAC,EAAuB,yDCAxCH,EAAAC,QAAiBC,EAAAC,EAAuB,0DCAxCH,EAAAC,QAAiBC,EAAAC,EAAuB,kECAxCH,EAAAC,QAAiBC,EAAAC,EAAuB,0DCAxCH,EAAAC,QAAiBC,EAAAC,EAAuB,2ECAxCH,EAAAC,QAAiBC,EAAAC,EAAuB,6DCAxCH,EAAAC,QAAiBC,EAAAC,EAAuB,0ECAxCH,EAAAC,QAAiBC,EAAAC,EAAuB,6DCAxCH,EAAAC,QAAiBC,EAAAC,EAAuB,kECAxCH,EAAAC,QAAiBC,EAAAC,EAAuB,4ECAxCH,EAAAC,QAAiBC,EAAAC,EAAuB,oECAxCH,EAAAC,QAAiBC,EAAAC,EAAuB,iFCAxCH,EAAAC,QAAiBC,EAAAC,EAAuB,003BCMlCC,2LACK,IAAAC,EAAAC,KAEDC,EADQ,CAAC,MAAO,SAAU,YACRC,IAAI,SAAAC,GAC1B,IAAMC,EAAQL,EAAKM,MAAMC,SAASC,SAASC,SAASL,EAAKM,eACzD,OACEC,EAAAC,EAAAC,cAAA,MAAIC,IAAKV,EACPW,UAAS,sBAAAC,OAAwBX,EAAQ,6BAA+B,KACxEM,EAAAC,EAAAC,cAACI,EAAA,EAAD,CAAMF,UAAU,0BAA0BG,GAAE,IAAAF,OAAMZ,EAAKM,gBACpDN,MAMT,OACEO,EAAAC,EAAAC,cAAA,OAAKE,UAAU,UACbJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,kBACbJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,wBACbJ,EAAAC,EAAAC,cAAA,MAAIE,UAAU,gBACXb,IAGLS,EAAAC,EAAAC,cAAA,OAAKE,UAAU,yBACbJ,EAAAC,EAAAC,cAAA,MAAIE,UAAU,gBACZJ,EAAAC,EAAAC,cAAA,MAAIE,UAAU,sBAAqBJ,EAAAC,EAAAC,cAAA,UAAQE,UAAU,0BAA0BI,QAASlB,KAAKK,MAAMc,aAAhE,UACnCT,EAAAC,EAAAC,cAAA,MAAIE,UAAU,kDAAiDJ,EAAAC,EAAAC,cAAA,KAAGE,UAAU,0BAA0BM,KAAK,yCAAyCC,OAAO,UAA5F,iCA1BxDC,cAuCNC,cAAWzB,0BC3Cb0B,EAAY,CACvBC,EAAG,kBACHC,EAAG,iBACHC,EAAG,iBACHC,EAAG,wBAGQC,EAAY,CACvBC,SAAU,EACVC,WAAY,EACZC,UAAW,EACXC,WAAY,EACZC,aAAc,GAGHC,EAAY,CACvBV,EAAG,WACHC,EAAG,aACHC,EAAG,YACHC,EAAG,aACHQ,EAAG,gBAGQC,EAAa,CACxBZ,EAAG,2BACHC,EAAG,gCACHC,EAAG,mCACHC,EAAG,6BAGQU,EAAa,CACxBb,EAAG,iCACHC,EAAG,qCACHC,EAAG,wCACHC,EAAG,WACHQ,EAAG,4CAGQG,EAAa,CACxBC,kBAAqB,WACrBC,mBAAsB,aACtBC,eAAa,YAGR,SAASC,EAAaC,GAC3B,OAAOC,KAAKC,KAAKF,EAAOC,KAAKE,IAGxB,IAAMC,EAAc,CACzBC,MAAO,CACLC,MAAO,SAAAC,GAAO,OAAI,GAClBC,MAAO,SAAAA,GAAK,SAAArC,OAAOsC,YAAO,IAAPA,CAAYD,GAAnB,UACZE,QAAS,OACTzC,IAAK,SAEP0C,OAAQ,CACNL,MAAO,SAAAC,GAAO,OAAIA,EAAQK,eAAeD,OAAOE,QAChDL,MAAO,SAAAA,GAAK,SAAArC,OAAOsC,YAAO,IAAPA,CAAYD,GAAOM,QAAQ,KAAM,KAAxC,QACZJ,QAAS,SACTzC,IAAK,UAEP8C,SAAU,CACRT,MAAO,SAAAC,GAAO,OAAIS,OAAAC,EAAA,EAAAD,CAAI,IAAIE,IAAJF,OAAAC,EAAA,EAAAD,CAAYT,EAAQK,eAAeO,kBAAnChD,OAAA6C,OAAAC,EAAA,EAAAD,CAAwDT,EAAQK,eAAeQ,qBAAoBC,QACzHb,MAAO,SAAAA,GAAK,SAAArC,OAAOsC,YAAO,IAAPA,CAAYD,GAAnB,cACZE,QAAS,WACTzC,IAAK,YAEPqD,UAAW,CACThB,MAAO,SAAAC,GAAO,OAAIA,EAAQK,eAAeU,UAAUD,QACnDb,MAAO,SAAAA,GAAK,SAAArC,OAAOsC,YAAO,IAAPA,CAAYD,GAAnB,aACZE,QAAS,UACTzC,IAAK,cAIIsD,EAAe,CAAC,oBAAqB,qBAAsB,gBAC3DC,EAAoBC,cAC9BC,MAAM,CAACC,YAAI,EAAG,IAAK,KAAMA,YAAI,IAAK,IAAK,KAAMA,YAAI,IAAK,IAAK,KAC3DC,OAAOL,GA0GH,SAASM,EAAeC,GAC7BA,EAAMC,KAAK,WACT,IAAMC,EAAOC,YAAO7E,MACd8E,EAAQF,EAAKA,OAAOG,MAAM,QAC1BC,EAAIJ,EAAKK,KAAK,KACdC,EAAKC,WAAWP,EAAKK,KAAK,OAChCL,EAAKA,KAAK,MACV,IACIQ,EAAI,EACRN,EAAMO,QAAQ,SAAAC,GACZV,EAAKW,OAAO,SACPX,KAAKU,GACLL,KAAK,IAAKD,GACVC,KAAK,IAHV,IAAAlE,OAHiB,KAMG+D,EAAMb,OAAS,GAAkB,EAHrD,OAIKgB,KAAK,KAJV,GAAAlE,OAImBmE,EAPF,IAOQE,IAJzB,WAQC,SAASI,EAAed,GAC7BA,EAAMC,KAAK,WACT,IAAMC,EAAOC,YAAO7E,MAAMiF,KAAK,cAAe,SACxCH,EAAQF,EAAKA,OAAOG,MAAM,QAC1BU,EAAIb,EAAKK,KAAK,KACdC,EAAKC,WAAWP,EAAKK,KAAK,OAChCL,EAAKA,KAAK,MACV,IACIQ,EAAI,EACRN,EAAMO,QAAQ,SAAAC,GACZV,EAAKW,OAAO,SACPX,KAAKU,GACLL,KAAK,IAAK,GACVA,KAAK,KAHV,GAAAlE,OAGmBmE,EANF,IAMQE,IAHzB,SAKFR,EAAKK,KAAK,YAAV,eAAAlE,OAAsC0E,EAAtC,4BAAA1E,QAAmE0E,EAAnE,qBCjLWC,wMAnCSC,GACpB,OAAIA,EAAUxC,UAAYnD,KAAKK,MAAM8C,yCAKrC,OAAKnD,KAAKK,MAAM8C,QAGdzC,EAAAC,EAAAC,cAAA,OACEE,UAAU,iBACV8E,MAAO,CACLC,IAAK7F,KAAKK,MAAM8C,QAAQsC,EAAIzF,KAAKK,MAAMyF,OAAOD,IAAM7F,KAAKK,MAAM8C,QAAQ4C,EAf/D,GAe+E/F,KAAKK,MAAM2F,OAAOP,EACzGQ,KAAMjG,KAAKK,MAAM8C,QAAQ6B,EAAIhF,KAAKK,MAAMyF,OAAOG,KAAOjG,KAAKK,MAAM2F,OAAOhB,IAEzEhF,KAAKK,MAAM8C,QAAQK,eAAe0C,eATP,YAPR5E,sBC6Cb6E,2LArCX,IAAMJ,EAAI,GAIV,OACErF,EAAAC,EAAAC,cAAA,OAAKE,UAAU,sBACbJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,kCAAkC8E,MAAO,CAAEQ,MAAOL,GAAWM,OAAQN,KAClFrF,EAAAC,EAAAC,cAAA,OAAKwF,MAAM,OAAOC,OAAO,QACvB3F,EAAAC,EAAAC,cAAA,KAAG0F,UAAU,mBACX5F,EAAAC,EAAAC,cAAA,UAAQ2F,GAAIR,EAAGS,GAAIT,EAAGA,EAAGA,IACzBrF,EAAAC,EAAAC,cAAA,KAAG0F,UAAS,aAAAvF,OAAegF,EAAf,MAAAhF,OAAqBgF,EAArB,yBAAAhF,QAA+CgF,EAA/C,MAAAhF,QAAsDgF,EAAtD,MACVrF,EAAAC,EAAAC,cAAA,QAAM6F,GATH,EASeC,GAAIX,GAAgBY,GAAIZ,EAAGa,GAAIb,IACjDrF,EAAAC,EAAAC,cAAA,QAAMiG,EAAC,KAAA9F,OAAO+F,EAAP,KAAA/F,OAAqBgF,GAArB,OAAAhF,OAVJ,EAUI,KAAAA,OAA0CgF,EAA1C,OAAAhF,OAAiD+F,EAAjD,KAAA/F,OAA+DgF,KACtErF,EAAAC,EAAAC,cAAA,QAAMiG,EAAC,KAAA9F,OAAOgF,GAAP,KAAAhF,OAA6BgF,GAA7B,OAAAhF,OAAwCgF,GAAxC,KAAAhF,OAA0DgF,EAA1D,OAAAhF,OAAiEgF,GAAjE,KAAAhF,OAAuFgF,SAKtGrF,EAAAC,EAAAC,cAAA,OAAKE,UAAU,wCACbJ,EAAAC,EAAAC,cAACmG,EAAA,aAAD,CACEC,QAAQ,EACRC,KAAMrD,OAAOsD,OAAOlE,GACpBmE,WAAW,MACXC,UAAU,UACVlE,MAAOlD,KAAKK,MAAMgH,WAClBC,SAAUtH,KAAKK,MAAMkH,4BAjCFjG,wDCDzBkG,aACJ,SAAAA,IAA2B,IAAfC,EAAeC,UAAAzD,OAAA,QAAA0D,IAAAD,UAAA,GAAAA,UAAA,GAAJ,GAAI9D,OAAAgE,EAAA,EAAAhE,CAAA5D,KAAAwH,GACzBxH,KAAKyH,SAAWA,EAChBzH,KAAK6H,sBAAuB,oEAW5B,OAAO7H,KAAK6H,sDAIZ7H,KAAK6H,sBAAuB,yCAGfC,GACbA,EAAQpE,QAAQ1D,KAAKyH,2CAGdK,EAASxH,GAC2D,OAAvEyH,YAAUzH,EAASC,SAAU,CAAEyH,KAAMhI,KAAKyH,SAAUQ,OAAO,MAC7DjI,KAAK6H,sBAAuB,EAC5BC,EAAQI,KAAKlI,KAAKyH,+CAIVK,EAASxH,EAAU6H,GAC7B,IAAMH,EAAI,GAAAjH,OAAMf,KAAKyH,SAAX,aAAA1G,OAA+BoH,GACM,OAA3CJ,YAAUzH,EAASC,SAAU,CAAEyH,WACjChI,KAAK6H,sBAAuB,EAC5BC,EAAQI,KAAKF,0CAIH1H,EAAU8H,GACtB,IAAMD,EAAKX,EAAiBa,aAAa/H,GACzC,QAAI8H,EAAanB,KAAKqB,KAAK,SAAAzB,GAAC,OAAIA,EAAErD,eAAe+E,aAAeJ,8CAKhD7H,EAAUkI,GAC1B,OAAOhB,EAAiBa,aAAa/H,KAAckH,EAAiBa,aAAaG,0CA1C/DlI,GAClB,IAAMF,EAAQ2H,YAAUzH,EAASC,SAAU,CAAEyH,KAAI,kBACjD,OAAc,OAAV5H,EACKA,EAAMqI,OAAON,IACd,WA0CCE,EAAeb,EAAiBa,aAC9Bb,IC9CTkB,UAAmB,SAACC,GAAD,OAAgBA,EAAWC,SAAS,KAAKC,KAAKC,IAAYC,SAAS,MAEtFC,cACJ,SAAAA,EAAY3I,GAAO,IAAAN,EAAA,OAAA6D,OAAAgE,EAAA,EAAAhE,CAAA5D,KAAAgJ,IACjBjJ,EAAA6D,OAAAqF,EAAA,EAAArF,CAAA5D,KAAA4D,OAAAsF,EAAA,EAAAtF,CAAAoF,GAAAG,KAAAnJ,KAAMK,KACD+I,MAAQ,CACXC,eAAgB,KAChBhC,WAAYrE,EAAYC,OAG1BlD,EAAK+F,OAAS,CAAED,IAAK,IAAKyD,MAAO,GAAIC,OAAQ,GAAItD,KAAM,KACvDlG,EAAKiG,OAAS,CAAEhB,EAAG,EAAIS,EAAG,GAC1B1F,EAAKyJ,iBAAmB,IAAIhC,EAAiB,WAC7CzH,EAAK0J,KAAO1J,EAAK0J,KAAKC,KAAV9F,OAAA+F,EAAA,EAAA/F,QAAA+F,EAAA,EAAA/F,CAAA7D,KACZA,EAAKwH,iBAAmBxH,EAAKwH,iBAAiBmC,KAAtB9F,OAAA+F,EAAA,EAAA/F,QAAA+F,EAAA,EAAA/F,CAAA7D,KAXPA,mFAcC,IAAA6J,EAAA5J,KAClBA,KAAK6J,IAAMhF,YAAO7E,KAAK8J,QAGvB9J,KAAK+J,SAAW/J,KAAK6J,IAClBtE,OAAO,KACLyE,QAAQ,oBAAoB,GAGjChK,KAAKiK,kBAAoBpF,YAAO7E,KAAKkK,sBAClCtE,MAAM,YAAa,mBAEtB5F,KAAKmK,OAASC,cACT5F,OAAO,CAAC,EAAE,EAAE,EAAE,IACd6F,QAAQ,IACbrK,KAAKsK,OAASF,cACT5F,OAAO,CAAC,EAAE,EAAE,EAAE,EAAE,IAChB6F,QAAQ,IAGbrK,KAAK+J,SAASxE,OAAO,KAChByE,QAAQ,iBAAiB,GAG9BhK,KAAK+J,SAASxE,OAAO,QAChByE,QAAQ,gBAAgB,GACxBA,QAAQ,qBAAqB,GAC7BpF,KAAK,SAGV5E,KAAK+J,SAASxE,OAAO,KAChByE,QAAQ,iBAAiB,GAG9BhK,KAAK+J,SAASxE,OAAO,QAChByE,QAAQ,qBAAqB,GAC7BA,QAAQ,qBAAqB,GAC7BpF,KAAK,mBAGV5E,KAAKuK,QAAUvK,KAAK+J,SAASxE,OAAO,KAAKyE,QAAQ,WAAW,GAC5DhK,KAAKyJ,MAAK,GAGVzJ,KAAK6J,IAAIW,GAAG,QAAS,WACU,WAAzBC,IAAMpJ,OAAOqJ,SACfd,EAAKJ,iBAAiBmB,SAASf,EAAKvJ,MAAMyH,QAAS8B,EAAKvJ,MAAMC,YAIlEN,KAAK4K,SAAWA,IAAS,kBAAMhB,EAAKH,QAAQ,KAC5CoB,OAAOC,iBAAiB,SAAU9K,KAAK4K,qDAGtBG,EAAWC,GAC5BhL,KAAKiL,cAAcjL,KAAKoJ,MAAMC,eAAgB2B,EAAU3B,gBACxDrJ,KAAKkL,cAAclL,KAAKK,MAAO0K,GAE1BI,IAAQnL,KAAKK,MAAM+H,aAAc2C,EAAU3C,eAC9CpI,KAAKoJ,MAAM/B,aAAe2D,EAAU3D,aACpCrH,KAAKoL,WAAWpL,KAAKK,MAAM+H,cAC3BpI,KAAKqL,SAAS,CACZhC,eAAgB,OAElBrJ,KAAKwJ,iBAAiBmB,SAAS3K,KAAKK,MAAMyH,QAAS9H,KAAKK,MAAMC,0DAKhEuK,OAAOS,oBAAoB,SAAUtL,KAAK4K,UAC1C5K,KAAK6J,IAAIW,GAAG,QAAS,qCAGJ,IAAde,EAAc7D,UAAAzD,OAAA,QAAA0D,IAAAD,UAAA,IAAAA,UAAA,GACbrB,GAAUrG,KAAKwL,cAAcC,aAAezL,KAAK8F,OAAOD,IAAM7F,KAAK8F,OAAOyD,OAC1EnD,GAASpG,KAAKwL,cAAcE,YAAc1L,KAAK8F,OAAOG,KAAOjG,KAAK8F,OAAOwD,MAGzEtJ,KAAKwJ,iBAAiBmC,cAAc3L,KAAKK,MAAMC,SAAUN,KAAKK,MAAM+H,gBAAehC,GAAS,KAEhG,IAGQwF,EAAwB,EAARxF,EADF,EAEdyF,EAFc,EAECxF,EAEhBuF,EAAgB5L,KAAK8F,OAAOD,IAAM7F,KAAK8F,OAAOyD,QAAWvJ,KAAKwL,cAAcC,cAC/EzL,KAAKgG,OAAS,CAAEhB,EAAG,EAAGS,GAAIY,EAASuF,GAAiB,GACpDvF,EAASuF,IAET5L,KAAKgG,OAAS,CAAEhB,GAAIoB,EAAQyF,GAAgB,EAAGpG,EAAG,GAClDW,EAAQyF,GAKZ,IAAMC,EAAW9L,KAAKmK,OAAO7F,QAAQ,GAC/ByH,EAAY/L,KAAKsK,OAAOhG,QAAQ,GAChC0H,EAAoBF,IAAa1F,GAAS2F,IAAc1F,EAG9DrG,KAAKmK,OAAO7F,MAAM,CAAC,EAAG8B,IACtBpG,KAAKsK,OAAOhG,MAAM,CAAC,EAAG+B,IAGtB,IAAM4F,EAAY,CAChBlC,SAAU/J,KAAK+J,SACfE,kBAAmBjK,KAAKiK,kBACxBiC,MAAOlM,KAAK+J,SAASlF,OAAO,mBAC5BsH,YAAanM,KAAK+J,SAASlF,OAAO,qBAClCuH,MAAOpM,KAAK+J,SAASlF,OAAO,mBAC5BwH,gBAAiBrM,KAAK+J,SAASlF,OAAO,2BAEnC0G,GACH3H,OAAO0I,KAAKL,GAAW5G,QAAQ,SAAAkH,GAAC,OAAIN,EAAUM,GAAKN,EAAUM,GAAG5D,aAAaQ,KAAKT,KAEpFuD,EAAUlC,SACL9E,KAAK,YADV,aAAAlE,OACoCf,KAAKgG,OAAOhB,EADhD,MAAAjE,OACsDf,KAAKgG,OAAOP,EADlE,MAGAwG,EAAUhC,kBAGLrE,MAAM,YAHX,aAAA7E,OAGqCf,KAAKgG,OAAOhB,EAAIhF,KAAK8F,OAAOG,KAAO,IAHxE,QAAAlF,OAGkFf,KAAKgG,OAAOP,EAAIzF,KAAK8F,OAAOD,IAAM,GAHpH,QAMAoG,EAAUE,YACLlH,KAAK,YADV,iBAAAlE,OACwCf,KAAK8F,OAAOD,IAAMQ,EAAS,EADnE,iBAIA4F,EAAUI,gBACLpH,KAAK,YADV,aAAAlE,OACoCf,KAAK8F,OAAOG,KAAOG,EAAQ,EAD/D,UAmBA6F,EAAUC,MACLjH,KAAK,YADV,aAAAlE,OACoCqF,EAAQpG,KAAK8F,OAAOG,KADxD,MAAAlF,OACiEf,KAAK8F,OAAOD,IAD7E,MAEKsD,KAAKqD,YAASxM,KAAKsK,QAAQmC,SAASrG,IACzC,IAAMsG,EAAiBT,EAAUC,MAAMS,UAAYV,EAAUC,MAAMS,YAAcV,EAAUC,MAC3F,GAAIQ,EAAeE,UAAU,oBAAoBC,QAC/CH,EACKvD,KAAK,SAAA2D,GAAC,OAAIA,EAAEF,UAAU,cAAc3H,KAAK,UAAW,UACpDkE,KAAK,SAAA2D,GAAC,OAAIA,EAAEjI,OAAO,WAAWI,KAAK,UAAW,UAChD2H,UAAU,SACVrH,OAAO,QACLyE,QAAQ,SAAS,GACjBpF,KAAK,SAAAQ,GAAC,OAAI9C,EAAW8C,KACrBH,KAAK,OAAQ,gBACbA,KAAK,KAAMmB,EAhBE,IAiBbnB,KAAK,KAAM,UACXkE,KAAK1E,OACL,CACL,IAAMO,GAAKoB,EApBO,GAqBlB6F,EAAUC,MAAMU,UAAU,oBACrB3H,KAAK,IAAKD,GACZ4H,UAAU,SACR3H,KAAK,IAAKD,GAIjBiH,EAAUG,MACLnH,KAAK,YADV,aAAAlE,OACoCf,KAAK8F,OAAOG,KADhD,MAAAlF,OACyDsF,EAASrG,KAAK8F,OAAOD,IAD9E,MAEKsD,KAAK4D,YAAQ/M,KAAKmK,QAAQsC,SAASpG,IACxC,IAAM2G,EAAiBf,EAAUG,MAAMO,UAAYV,EAAUG,MAAMO,YAAcV,EAAUG,MAC3F,GAAIY,EAAeJ,UAAU,oBAAoBC,QAC/CG,EACK7D,KAAK,SAAA2D,GAAC,OAAIA,EAAEF,UAAU,cAAc3H,KAAK,UAAW,UACpDkE,KAAK,SAAA2D,GAAC,OAAIA,EAAEjI,OAAO,WAAWI,KAAK,UAAW,UAChD2H,UAAU,SACVrH,OAAO,QACLyE,QAAQ,SAAS,GACjBpF,KAAK,SAAAQ,GAAC,OAAI/C,EAAW+C,KACrBH,KAAK,OAAQ,gBACbA,KAAK,KAAMoB,EAzCE,IA0CbpB,KAAK,KAAM,OACXkE,KAAK3D,OACL,CACL,IAAMC,GAAKY,EA7CO,GA8ClB4F,EAAUG,MAAMQ,UAAU,oBACrB3H,KAAK,IAAKQ,GACVR,KAAK,YAFV,eAAAlE,OAEsC0E,EAFtC,4BAAA1E,QAEmE0E,EAFnE,MAKEuG,GACFhM,KAAKoL,WAAWpL,KAAKK,MAAM+H,oDAGjBjF,EAAS8J,GACjB9J,IAAY8J,IAGI,OAAhBA,GACFjN,KAAKuK,QAAQqC,UAAU,UAClB5C,QAAQ,SAAS,GAER,OAAZ7G,GACFnD,KAAKuK,QAAQqC,UAAb,aAAA7L,OAAoCoC,EAAQK,eAAe+E,WAA3D,OACKyB,QAAQ,SAAS,0CAGZ3J,EAAO0K,GACnB,IAAImC,EAAY1F,EAAiBa,aAAahI,EAAMC,UAChD6M,EAAgB3F,EAAiBa,aAAa0C,EAAUzK,UAU5D,GALKN,KAAKwJ,iBAAiB4D,wBACzBD,GAAiB,EACjBnN,KAAKwJ,iBAAiB6D,UAGpBH,IAAcC,MAGE,IAAfD,IAAuC,IAAnBC,IAAyC,IAAfD,IAAuC,IAAnBC,IACrEnN,KAAKyJ,QAGgB,IAAnB0D,GAAwBnN,KAAK6J,IAAIG,QAAQ,aAC3ChK,KAAK6J,IAAIG,QAAQ,WAAW,GAC5BhK,KAAKuK,QAAQqC,UAAU,aAClB5C,QAAQ,YAAY,GACzBhK,KAAKuK,QAAQqC,UAAU,YAClB5C,QAAQ,WAAW,KAIP,IAAfkD,GAGJ,GAAKlN,KAAKwJ,iBAAiBmC,cAActL,EAAMC,SAAUD,EAAM+H,cAA/D,CAMA,IAAMkF,EAAQtN,KAAKuK,QAAQ1F,OAAb,aAAA9D,OAAiCmM,EAAjC,OAAgDI,QACxDC,EAAmBD,EAAME,KAC5BtN,IAAI,SAAAuN,GAAG,oBAAA1M,OAAkB0M,EAAIC,IAAtB,iBAAA3M,OAAyC0M,EAAIE,IAA7C,QACPC,KAAK,MACR5N,KAAK6J,IAAIG,QAAQ,WAAW,GAC5BhK,KAAKuK,QAAQqC,UAAUW,GAClBvD,QAAQ,YAAY,GACzBhK,KAAKuK,QAAQqC,UAAb,aAAA7L,OAAoCuM,EAAM9J,eAAe+E,WAAzD,OACKyB,QAAQ,WAAW,QAbtBhK,KAAKwJ,iBAAiBqE,eAAexN,EAAMyH,4CAgBpCb,GAAM,IAAA6G,EAAA9N,KACT+N,EJjNH,SAAkB9G,EAAMkD,EAAQG,EAAQjD,GAI7C,IADA,IAAM2G,EAAM,GACHN,EAAM,EAAGA,GAAO,IAAKA,EAAK,CACjCM,EAAIN,GAAO,GACX,IAAK,IAAIC,EAAM,EAAGA,GAAO,IAAKA,EAC5BK,EAAIN,GAAKC,GAAO,GAGpB1G,EAAKA,KAAK5B,QAAQ,SAAAlC,GAEhB,IADA,IAAMqK,EAAO,GADcS,EAAA,SAElBN,GACPxK,EAAQK,eAAehC,EAAUmM,IAAMtI,QAAQ,SAAA6I,GAC7CV,EAAKtF,KAAK,CACRwF,IAAK7L,EAAUqM,GACfP,QAEFK,EAAInM,EAAUqM,IAAQP,GAAKzF,KAAK,CAC9BwF,IAAK7L,EAAUqM,GACfP,MACAH,OACAhK,eAAgBL,EAAQK,eACxBuC,EAAGpD,EAAa0E,EAAWnE,MAAMC,SAX9BwK,EAAM,EAAGA,GAAO,IAAKA,EAAKM,EAA1BN,KAoBX,IADA,IAAIQ,EAAa,EACRT,EAAM,EAAGA,GAAO,IAAKA,EAC5B,IAAK,IAAIC,EAAM,EAAGA,GAAO,IAAKA,EACvBK,EAAIN,GAAKC,GAAK1J,SACnBmK,YAAaJ,EAAIN,GAAKC,IACtBQ,EAAatL,KAAKwL,IAAIF,EAAYG,YAAYN,EAAIN,GAAKC,IAAM5H,IAKjE,IAFA,IACMwI,EADuB1L,KAAK2L,IAAIrE,EAAOsE,OAAS,EAAGnE,EAAOmE,OAAS,GACnCN,EAC7BT,EAAM,EAAGA,GAAO,IAAKA,EAC5B,IAAK,IAAIC,EAAM,EAAGA,GAAO,IAAKA,EAC5BK,EAAIN,GAAKC,GAAKtI,QAAQ,SAAAoI,GACpBA,EAAI1H,EAAIpD,EAAa0E,EAAWnE,MAAMuK,IAAQc,IAQpD,IADA,IAAMG,EAAM,GAnD6CC,EAAA,SAoDhDjB,GACP,IArDuD,IAAAkB,EAAA,SAqD9CjB,GACPS,YAAaJ,EAAIN,GAAKC,IAAMtI,QAAQ,SAAAoI,GAClCiB,EAAIxG,KAAJtE,OAAAiL,EAAA,EAAAjL,CAAA,GACK6J,EADL,CAEEzI,EAAGyI,EAAIzI,EAAImF,EAAOwD,GAClBlI,EAAGgI,EAAIhI,EAAI6E,EAAOoD,GAClBa,eANGZ,EAAM,EAAGA,GAAO,IAAKA,EAAKiB,EAA1BjB,IADFD,EAAM,EAAGA,GAAO,IAAKA,EAAKiB,EAA1BjB,GAYT,OAAOgB,EIiJcI,CAAS7H,EAAMjH,KAAKmK,OAAQnK,KAAKsK,OAAQtK,KAAKoJ,MAAM/B,YACvErH,KAAKK,MAAM0O,gBJ/IR,SAAwBhB,EAAY1G,GACzC,IAAK0G,EAAW9J,OAAQ,OAAO,KAE/B,IAAM+K,EAAmBpL,OAAAC,EAAA,EAAAD,CAAImK,GAAYkB,KAAK,SAACtO,EAAGuO,GAAJ,OAAU7H,EAAWnE,MAAMvC,GAAK0G,EAAWnE,MAAMgM,KACzFC,EAAU9H,EAAWnE,MAAM8L,EAAiB,IAC5CI,EAAU/H,EAAWnE,MAAM8L,EAAiBA,EAAiB/K,OAAS,IACtEsK,EAASR,EAAW,GAAGQ,OAEzBc,EAAe,GACbC,EAAc,GAEdC,EAAqBC,OAAOC,SAASL,GAAW,IAAU,EAAI,EAWpE,OATAC,EAAa,GAAKG,OAAOC,SAASL,GAASM,YAAYH,GACvDF,EAAa,GAAKG,OAAOC,SAASL,EAAU,GAAGM,YAAYH,GAC3DF,EAAa,GAAKG,OAAOC,SAASL,EAAU,IAAIM,YAAYH,GAC5DF,EAAeA,EAAanP,IAAI,SAAAyP,GAAM,OAAgC,IAA5BH,OAAOC,SAASE,GAAgB,EAAIA,IAE9EL,EAAY,GAAK3M,EAAa0M,EAAa,IAAMd,EACjDe,EAAY,GAAK3M,EAAa0M,EAAa,IAAMd,EACjDe,EAAY,GAAK3M,EAAa0M,EAAa,IAAMd,EAE7CiB,OAAOC,SAASL,GAASM,YAAYH,KAAwBC,OAAOC,SAASN,GAASO,YAAYH,GAC7F,CAAC,CACNxJ,EAAGuJ,EAAY,GACflM,MAAOiE,EAAWjE,MAAMiM,EAAa,MAGlC/K,YAAM,GAAGpE,IAAI,SAAAkF,GAAC,MAAK,CACxBW,EAAGuJ,EAAYlK,GACfhC,MAAOiE,EAAWjE,MAAMiM,EAAajK,OIiHVwK,CAAe7B,EAAY/N,KAAKoJ,MAAM/B,aACjE,IAAMwI,EAAS7P,KAAKuK,QACjBqC,UAAU,UACV3F,KAAK8G,EAAY,SAAAlH,GAAC,SAAA9F,OAAO8F,EAAErD,eAAe+E,WAAxB,KAAAxH,OAAsC8F,EAAE6G,IAAxC,KAAA3M,OAA+C8F,EAAE8G,IAAjD,OAErBkC,EAAOC,OAMJnH,aACEQ,KAAKT,GACLzD,KAAK,IAAK,GACV8K,SAELF,EACGlH,aACEQ,KAAKT,GACLzD,KAAK,IAAK,SAAA4B,GAAC,OAAIA,EAAEd,IACjBd,KAAK,YAAa,SAAA4B,GAAC,mBAAA9F,OAAiB8F,EAAE7B,EAAI8I,EAAKhI,OAAOG,KAAnC,KAAAlF,OAA2C8F,EAAEpB,EAAIqI,EAAKhI,OAAOD,IAA7D,OAExBgK,EAAOG,QAAQzK,OAAO,UACjBN,KAAK,YAAa,SAAA4B,GAAC,mBAAA9F,OAAiB8F,EAAE7B,EAAI8I,EAAKhI,OAAOG,KAAnC,KAAAlF,OAA2C8F,EAAEpB,EAAIqI,EAAKhI,OAAOD,IAA7D,OACnBZ,KAAK,UAAW,SAAA4B,GAAC,OAAIA,EAAErD,eAAe+E,aACtCtD,KAAK,WAAY,SAAA4B,GAAC,OAAIA,EAAE6G,MACxBzI,KAAK,WAAY,SAAA4B,GAAC,OAAIA,EAAE8G,MACxB1I,KAAK,QAAS,SAAA4B,GAAC,OAAItE,EAAWsE,EAAErD,eAAeyM,gBAC/CzF,GAAG,YAAa,SAAA3D,GAAC,OAAIiH,EAAKzC,SAAS,CAClChC,eAAgBxC,MAEjB2D,GAAG,WAAY,SAAA3D,GAAC,OAAIiH,EAAKzC,SAAS,CACjChC,eAAgB,SAEjBmB,GAAG,QAAS,SAAA3D,GACXiH,EAAKtE,iBAAiB0G,YAAYpC,EAAKzN,MAAMyH,QAASgG,EAAKzN,MAAMC,SAAUuG,EAAErD,eAAe+E,YAC5FuF,EAAKzC,SAAS,CACZhC,eAAgB,SAGnBpE,KAAK,IAAK,GACZ0D,aACEQ,KAAKT,GACLzD,KAAK,IAAK,SAAA4B,GAAC,OAAIA,EAAEd,6CAGPsB,GACfrH,KAAKqL,SAAS,CAAEhE,gDAGT,IAAA8I,EAAAnQ,KACP,OACEU,EAAAC,EAAAC,cAAA,OAAKE,UAAU,iBAAiBsP,IAAK,SAAAC,GAAgBF,EAAK3E,cAAgB6E,IACxE3P,EAAAC,EAAAC,cAAA,OAAKE,UAAU,SAASsF,MAAM,OAAOC,OAAO,OAAO+J,IAAK,SAAAvG,GAASsG,EAAKrG,OAASD,KAC/EnJ,EAAAC,EAAAC,cAAC0P,EAAD,CAAenN,QAASnD,KAAKoJ,MAAMC,eAAgBvD,OAAQ9F,KAAK8F,OAAQE,OAAQhG,KAAKgG,SACrFtF,EAAAC,EAAAC,cAAA,OAAKE,UAAU,8BAA8BsP,IAAK,SAAAnG,GAAuBkG,EAAKjG,qBAAuBD,IACnGvJ,EAAAC,EAAAC,cAAC2P,EAAD,CAAkBhJ,iBAAkBvH,KAAKuH,iBAAkBF,WAAYrH,KAAKoJ,MAAM/B,sBA9UvE/F,aA2VNC,cAAWyH,sDCrVpBwH,uBAEJ,SAAAA,EAAYnQ,GAAM,IAAAN,EAAA,OAAA6D,OAAAgE,EAAA,EAAAhE,CAAA5D,KAAAwQ,IAChBzQ,EAAA6D,OAAAqF,EAAA,EAAArF,CAAA5D,KAAA4D,OAAAsF,EAAA,EAAAtF,CAAA4M,GAAArH,KAAAnJ,KAAMK,KACDyF,OAAS,CAAED,IAAK,IAAKyD,MAAO,GAAIC,OAAQ,GAAItD,KAAM,KACvDlG,EAAKiG,OAAS,CAAEhB,EAAG,EAAIS,EAAG,GAC1B1F,EAAKyJ,iBAAmB,IAAIhC,EAAiB,QAJ7BzH,mFAUC,IAAA6J,EAAA5J,KAEjBA,KAAKqG,QAAUrG,KAAKwL,cAAcC,aAAezL,KAAK8F,OAAOD,IAAM7F,KAAK8F,OAAOyD,OAC/EvJ,KAAKoG,OAASpG,KAAKwL,cAAcE,YAAc1L,KAAK8F,OAAOG,KAAOjG,KAAK8F,OAAOwD,MAE9EtJ,KAAKyQ,oBAAsB7F,IAAS,kBAAMhB,EAAK8G,qBAAqB,KACpE1Q,KAAK2Q,KAAOC,MACPC,YAAY,CAAC,EAAG,MAChBrG,GAAG,WAAYxK,KAAK8Q,QAAQpH,KAAK1J,OACjCwK,GAAG,WAAY,WAAOZ,EAAKmH,EAAE9L,KAAK,YAAc2L,IAAStK,aACzDkE,GAAG,cAAexK,KAAKyQ,qBAG5BzQ,KAAKgR,WAAaJ,MACbK,OAAO,CAAC,GAAG,IAGXC,MAAM,KACNC,OAAO,CAAC,GAAG,KACXC,UAAU,CAACpR,KAAKoG,MAAQ,EAAGpG,KAAKqG,OAAS,IAE9CrG,KAAKgI,KAAO4I,MACPI,WAAWhR,KAAKgR,YAErBhR,KAAKqR,sBAAwBT,IAAU5Q,KAAKwL,eAAejG,OAAO,OAC7DyE,QAAQ,yBAAwB,GAChCpE,MAAM,UAAW,GACtB5F,KAAK6J,IAAM+G,IAAU5Q,KAAK8J,QACjB7E,KAAK,QAASjF,KAAKoG,OACnBnB,KAAK,SAAUjF,KAAKqG,QACpB8C,KAAKnJ,KAAK2Q,MAEnB3Q,KAAK6J,IAAIW,GAAG,QAAS,WACa,WAA5BoG,IAASvP,OAAOqJ,UAClBd,EAAKJ,iBAAiBmB,SAASf,EAAKvJ,MAAMyH,QAAS8B,EAAKvJ,MAAMC,UAC9DsJ,EAAKyH,sBAAsB1I,aAAa/C,MAAM,UAAU,GACxDgE,EAAKyH,sBAAsBzM,KAAK,IAChCgF,EAAK0H,SAAS1E,UAAU,UAAU5C,QAAQ,kBAAiB,MAK/DhK,KAAK0Q,oBAEL1Q,KAAK+Q,EAAI/Q,KAAK6J,IAAItE,OAAO,KAEzBvF,KAAKuR,iBAAmBvR,KAAK6J,IAAItE,OAAO,KACjByE,QAAQ,cAAa,GAE5ChK,KAAKsR,SAAWtR,KAAK6J,IAAItE,OAAO,KAGhCvF,KAAKwR,QAAUZ,IAAU5Q,KAAKwL,eAAejG,OAAO,OAC/CN,KAAK,QAAS,kBACdW,MAAM,UAAW,GAGtB5F,KAAKyR,SAAWb,IAAU5Q,KAAKwL,eAAejG,OAAO,OAChDN,KAAK,QAAS,mBACdW,MAAM,UAAW,GAGtB5F,KAAK0R,SAAWd,IAAU5Q,KAAKwL,eAAejG,OAAO,OAChDN,KAAK,QAAS,mBACdA,KAAK,KAAK,mBACVW,MAAM,UAAW,GAEtB5F,KAAK2R,gBAAkB,EACvB3R,KAAK4R,mBAAqB,GAK1B5R,KAAK6R,eAAiB7R,KAAKuR,iBAAiB3E,UAAU,UAClD3F,KAAK6K,IAAQ9B,QACbzK,OAAO,UACPN,KAAK,KAAK,SAAS4B,GAAG,MAAM,UAAUA,EAAEsB,KACxClD,KAAK,KAAM,SAAA4B,GAAM,OAAO+C,EAAKoH,WAAW,CAACnK,EAAEkL,YAAY/M,EAAG6B,EAAEkL,YAAYtM,IAAI,KAC5ER,KAAK,KAAM,SAAA4B,GAAO,OAAO+C,EAAKoH,WAAW,CAACnK,EAAEkL,YAAY/M,EAAG6B,EAAEkL,YAAYtM,IAAI,KAC7ER,KAAK,IAAK,KACVA,KAAK,OAAO,SACZuF,GAAG,YAAa,SAAA3D,GACf+C,EAAK4H,QAAQ7I,WAAW,aAAa/C,MAAM,UAAW,IACtDgE,EAAK4H,QAAQQ,KAAK,MAAMnL,EAAEoL,KAAO,QAC7BrM,MAAM,OAASgL,IAASsB,QAAW,MACnCtM,MAAM,MAAQgL,IAASuB,QAAU,GAAM,MACvCvM,MAAM,YAAc,WAEzB4E,GAAG,WAAY,SAAA3D,GAAO+C,EAAK4H,QAAQ7I,aAAa/C,MAAM,UAAW,KAElE5F,KAAKoL,WAAWpL,KAAKK,MAAM+H,cAE1BpI,KAAK+Q,EAAEnE,UAAU,8BACd3F,KAAKmL,IAAiBC,EAAQA,EAAOC,QAAQD,QAAQE,UACnDvC,QAAQzK,OAAO,QACfN,KAAK,IAAKjF,KAAKgI,MACf/C,KAAK,OAAO,WAEjBjF,KAAK+Q,EAAEnE,UAAU,6BACd3F,KAAKmL,IAAiBI,EAAQA,EAAOF,QAAQG,UAAUF,UACvDvC,QAAQzK,OAAO,QACfN,KAAK,QAAS,SAAS4B,GAAI,MAAO,WAAaA,EAAEsB,KACjDlD,KAAK,IAAKjF,KAAKgI,MACf/C,KAAK,OAAQ,sDAGH8F,EAAWC,GAK5BhL,KAAKkL,cAAclL,KAAKK,MAAO0K,GAE1BI,IAAQnL,KAAKK,MAAM+H,aAAc2C,EAAU3C,gBAC9CpI,KAAKoL,WAAWpL,KAAKK,MAAM+H,cAI3BpI,KAAKwJ,iBAAiBmB,SAAS3K,KAAKK,MAAMyH,QAAS9H,KAAKK,MAAMC,iDAIpDD,EAAO0K,GACnB,IAAImC,EAAY1F,EAAiBa,aAAahI,EAAMC,UAChD6M,EAAgB3F,EAAiBa,aAAa0C,EAAUzK,UAK5DoS,QAAQC,IAAIzF,GACPlN,KAAKwJ,iBAAiB4D,wBACzBD,GAAiB,EACjBnN,KAAKwJ,iBAAiB6D,UAMpBH,IAAcC,IAOC,IAAfD,IAGClN,KAAKwJ,iBAAiBmC,cAActL,EAAMC,SAAUD,EAAM+H,eAC7DpI,KAAKwJ,iBAAiBqE,eAAexN,EAAMyH,6CAKpC8K,GAIT,IAJa,IAAA9E,EAAA9N,KAET6S,EAAgB,GAChBC,EAAQF,EAAI3L,KAAKhD,OACbmB,EAAI,EAAGA,EAAI0N,EAAO1N,IAGxB,IAFA,IAAI2N,EAAKH,EAAI3L,KAAK7B,GAAG5B,eACjBwP,EAAOD,EAAG7O,UAAUD,OAChBgP,EAAI,EAAGA,EAAID,EAAMC,IAAI,EACvBjF,EAAM,IAENxK,eAAiB0P,KAAKC,MAAMD,KAAKE,UAAUL,IAC/C/E,EAAIxK,eAAelD,SAAWyS,EAAG7O,UAAU+O,GAC3CJ,EAAc3K,KAAK8F,GAGvB,IAAIqF,EAAc,GACdC,EAAOT,EAAc5O,OACzB,IAAQmB,EAAI,EAAGA,EAAIkO,EAAMlO,IAAK,CAC5B,IAAImO,EAAK,GACTA,EAAGtB,KAAQY,EAAczN,GAAG5B,eAAelD,SAC3CiT,EAAGtM,KAAO4L,EAAczN,GACxBiO,EAAYnL,KAAKqL,GAInBvT,KAAKwT,OAAS,GACd,IAAQpO,EAAI,EAAGA,EAAIkO,EAAMlO,IAAI,CAC3B,IAAIqO,EAAKJ,EAAYjO,GAAG6M,KACpByB,GAAK,EACT,IAAQT,EAAI,EAAGA,EAAIjT,KAAKwT,OAAOvP,OAAQgP,IAAI,CACzC,IAAIU,EAAI3T,KAAKwT,OAAOP,GAAGhB,KACvB,GAAGwB,EAAGrT,MAAMuT,GAAG,CACb,IAAIC,EAAK5T,KAAKwT,OAAOP,GAAGhM,KACxB2M,EAAG1L,KAAKmL,EAAYjO,GAAG6B,MACvBjH,KAAKwT,OAAOP,GAAGhM,KAAO2M,EACtBF,GAAK,GAGT,GAAS,GAANA,EAAY,CACb,IAAI1F,KAAM,IACNiE,KAAOwB,EACX,IAAII,EAAMR,EAAYjO,GAAG6B,KACzB+G,EAAI/G,KAAO,GACX+G,EAAI/G,KAAKiB,KAAK2L,GACd7T,KAAKwT,OAAOtL,KAAK8F,IAIrBhO,KAAK8T,gBAAkB9T,KAAKsR,SACzB1E,UAAU,UACV3F,KAAKjH,KAAKwT,OAAQ,SAAA3M,GAAO,OAAOA,EAAEoL,OACrCjS,KAAK8T,gBAAgBhE,OAClBnH,aACA1D,KAAK,IAAI,GACT8K,SAED/P,KAAK8T,gBAAgBnL,aACb1D,KAAK,IAAK,SAAA4B,GACT,IAAIlG,EAAIkG,EAAEI,KAAKhD,OACXmB,EAAIwL,IAAqB,EAAEjQ,EAAG,GAAGA,GACjCqE,GAA4C,EAAtC4L,IAAiB9C,EAAKjE,IAAIkK,QAAQtO,EAAQ,IACpD,OAAGT,EAAI,EAEEI,EADCJ,EAAE,OAGL,EAAIrE,IAGpBX,KAAK8T,gBAAgB9D,QAAQzK,OAAO,UAChCN,KAAK,KAAK,SAAS4B,EAAEzB,GAAoC,MAAM,WAA5ByB,EAAEoL,KAAKlN,MAAM,KAAK,KACrDE,KAAK,KAAM,SAAA4B,GAAO,IAAImN,EAAIC,GAAoBpN,EAAEoL,MAAO,OAAOnE,EAAKkD,WAAW,CAACgD,EAAEhP,EAAEgP,EAAEvO,IAAI,KACzFR,KAAK,KAAM,SAAA4B,GAAO,IAAImN,EAAIC,GAAoBpN,EAAEoL,MAAO,OAAOnE,EAAKkD,WAAW,CAACgD,EAAEhP,EAAEgP,EAAEvO,IAAI,KACzFR,KAAK,YAAa,SAAA4B,GAEjB,IAAImN,EAAIC,GAAoBpN,EAAEoL,MAC1B1L,EAAKuH,EAAKkD,WAAW,CAACgD,EAAEhP,EAAEgP,EAAEvO,IAE5BqB,EADQ8J,IAAiB9C,EAAKjE,IAAIkK,QACxBG,MAAM3N,GAEpB,MAAO,aADC,CAACO,EAAE,GAAKP,EAAG,GAAIO,EAAE,GAAGP,EAAG,IACL,MAE3ByD,QAAQ,SAAS,QACjBpE,MAAM,eAAgB,IACtBA,MAAM,SAAS,WAEfX,KAAK,OAAO,uBACZuF,GAAG,YAAa,SAAA3D,GACf,IAAIsN,EAAK,GAEPA,EADCtN,EAAEI,KAAKhD,OAAS,EACZ,MAAO4C,EAAEoL,KAAM,WAAapL,EAAEI,KAAKhD,OAAQ,YAE3C,MAAQ4C,EAAEoL,KAAM,aAAepL,EAAEI,KAAK,GAAGzD,eAAe0C,cAE7D4H,EAAK2D,SAAS9I,aAAa/C,MAAM,UAAW,IAC5CkI,EAAK2D,SAASO,KAAKmC,GACfvO,MAAM,OAASgL,IAASsB,QAAW,MACnCtM,MAAM,MAAQgL,IAASuB,QAAU,GAAM,MACvCvM,MAAM,YAAc,WAE3B4E,GAAG,WAAY,SAAA3D,GAAOiH,EAAK2D,SAAS9I,WAAW,SAAS/C,MAAM,UAAW,KACzE4E,GAAG,QAAQ,SAAA3D,GACV,IAAIuN,EAAOvN,EAAEoL,KAAKlN,MAAM,KAAK,GAC7B,GAAoB,GAAjB8B,EAAEI,KAAKhD,OACR6J,EAAKtE,iBAAiB0G,YAAYpC,EAAKzN,MAAMyH,QAASgG,EAAKzN,MAAMC,SAAUuG,EAAEI,KAAK,GAAGzD,eAAe+E,YACpGuF,EAAKwD,SAAS1E,UAAU,UAAU5C,QAAQ,kBAAiB,GAC3D4G,IAAU,YAAYwD,GAAMpK,QAAQ,kBAAiB,OAChD,CACL8D,EAAKuD,sBAAsBzM,KAAK,IAChCkJ,EAAKuD,sBAAsB1I,aAAa/C,MAAM,UAAW,IAC5CgL,IAAU,0BAA0BrL,OAAO,MAClDK,MAAM,aAAa,OACnBhB,KAAKiC,EAAEoL,KAAO,QAASpL,EAAEI,KAAKhD,OAAQ,aAF5C,IAIGoQ,EAAkBzD,IAAU,0BAA0BrL,OAAO,MAAMyE,QAAQ,iBAAgB,GAC/FqK,EAAgBvE,OAAOC,SACvBsE,EAAgBzH,UAAU,MAAM3F,KAAKJ,EAAEI,KAAM,SAAAJ,GAAM,OAAOA,EAAErD,eAAe+E,aACxEyH,QAAQzK,OAAO,MACfK,MAAM,SAAS,WACf4E,GAAG,QAAS,SAAA3D,GACXiH,EAAKtE,iBAAiB0G,YAAYpC,EAAKzN,MAAMyH,QAASgG,EAAKzN,MAAMC,SAAUuG,EAAErD,eAAe+E,YAC5FuF,EAAKuD,sBAAsB1I,aAAa/C,MAAM,UAAU,GACxDkI,EAAKuD,sBAAsBzM,KAAK,IAChCkJ,EAAKwD,SAAS1E,UAAU,UAAU5C,QAAQ,kBAAiB,GAC3D4G,IAAU,YAAYwD,GAAMpK,QAAQ,kBAAiB,KAEtDpF,KAAK,SAASiC,GAAG,OAAOA,EAAErD,eAAe0C,mBAG/CyC,aACC1D,KAAK,IAAK,SAAA4B,GACT,IAAIlG,EAAIkG,EAAEI,KAAKhD,OACXmB,EAAIwL,IAAqB,EAAEjQ,EAAG,GAAGA,GACjCqE,GAA4C,EAAtC4L,IAAiB9C,EAAKjE,IAAIkK,QAAQtO,EAAQ,IACpD,OAAGT,EAAI,EAEEI,EADCJ,EAAE,OAGL,EAAIrE,sCAMlB,IAAI2T,EAAMtU,KAAKsR,SACZ1E,UAAU,UACV3F,KAAKjH,KAAKwT,OAAQ,SAAA3M,GAAO,OAAOA,EAAEoL,OAEnCjS,KAAK6R,eAAe5M,KAAK,YAAYjF,KAAKuU,iBAAiB3D,IAAStK,YACpEgO,EAAIrP,KAAK,YAAYjF,KAAKuU,iBAAiB3D,IAAStK,YAEpDtG,KAAK6R,eAAe5M,KAAK,IAAIjF,KAAKwU,qBAAqB9K,KAAK1J,OAC5DsU,EAAIrP,KAAK,IAAIjF,KAAKyU,sBAAsB/K,KAAK1J,oDAI5B6G,GACnB,IAAIzB,EAAIwL,IAAqB,EAAG,IAC5B5L,GAA6B,EAAxB4L,IAAStK,UAAUb,EAAQ,IACpC,OAAGT,EAAI,EAEEI,EADCJ,EAAE,OAGL,kDAIa6B,GACpB,IAAIlG,EAAIkG,EAAEI,KAAKhD,OACXmB,EAAIwL,IAAqB,EAAEjQ,EAAG,GAAGA,GACjCqE,GAA6B,EAAxB4L,IAAStK,UAAUb,EAAQ,IACpC,OAAGT,EAAI,EAEEI,EADCJ,EAAE,OAGL,EAAIrE,2CAIImG,GACf,OAAO,SAASD,GACd,IAAImN,EAAI,CAAChU,KAAK0U,aAAa,MAAO1U,KAAK0U,aAAa,OAChD3O,EAAIe,EAAEoN,MAAMF,GAEhB,MAAO,aADC,CAACjO,EAAE,GAAKiO,EAAE,GAAIjO,EAAE,GAAGiO,EAAE,IACH,iDAIV,IAAA7D,EAAAnQ,KAGZ2U,EAAS,SAAChU,GACd,IAAIyE,EAAIwL,IAAqB,EAAEjQ,EAAG,GAAGA,GAEjCqE,GAA4C,EAAtC4L,IAAiBT,EAAKtG,IAAIkK,QAAQtO,EAAQ,IACpD,OAAGT,EAAI,EAEEI,EADCJ,EAAE,OAGL,EAAIrE,GAGbX,KAAKK,MAAM0O,gBAAgB,CACzB,CAAEhJ,EAAG4O,EAAO,GAAIvR,MAAO,aACvB,CAAE2C,EAAG4O,EAAO,GAAIvR,MAAO,aACvB,CAAE2C,EAAG4O,EAAO,GAAIvR,MAAO,gDAKlB,IAAAwR,EAAA5U,KACP,OACEU,EAAAC,EAAAC,cAAA,OAAKE,UAAU,UAAUsP,IAAK,SAAAC,GAAU,OAAIuE,EAAKpJ,cAAgB6E,IAC/D3P,EAAAC,EAAAC,cAAA,OAAKE,UAAU,mBAAmBqH,GAAG,mBAAmBiI,IAAK,SAAAvG,GAAS+K,EAAK9K,OAASD,aA1X1EvI,cAqYHC,eAAWiP,sBCrCXqE,eA1Wb,SAAAA,EAAYxU,GAAM,IAAAN,EAAA,OAAA6D,OAAAgE,EAAA,EAAAhE,CAAA5D,KAAA6U,IAChB9U,EAAA6D,OAAAqF,EAAA,EAAArF,CAAA5D,KAAA4D,OAAAsF,EAAA,EAAAtF,CAAAiR,GAAA1L,KAAAnJ,KAAMK,KACDyU,cAAgB,CACnBC,EAAG,mBACHtT,EAAG,YACHC,EAAG,gBACHC,EAAG,wBAIL5B,EAAKiV,aAAe,CAClBD,EAAI,UACJtT,EAAI,UACJC,EAAI,UACJC,EAAI,WAGN5B,EAAKkV,qBAAuB,CAC1BF,EAAI,UACJtT,EAAI,UACJC,EAAI,UACJC,EAAI,WAGN5B,EAAK+F,OAAS,CAAED,IAAK,IAAKyD,MAAO,GAAIC,OAAQ,GAAItD,KAAM,KACvDlG,EAAKiG,OAAS,CAAEhB,EAAG,EAAIS,EAAG,GAE1B1F,EAAKmV,gBAAkB,CACnBvT,EAAG,GACHoT,EAAG,IACHtT,EAAG,IACHC,EAAG,KAEP3B,EAAKoV,gBAAkB,CACrBxT,EAAG,GACHoT,EAAG,GACHtT,EAAG,GACHC,EAAE,IAKJ3B,EAAKqV,aAAe,CAClBL,EAAI,IACJtT,EAAI,KAEN1B,EAAKsV,kBAAoB,CACvBN,EAAG,IACHtT,EAAG,KAEL1B,EAAKuV,kBAAoB,CACvBP,EAAG,GACHtT,EAAG,IAGL1B,EAAKwV,YAAc,EACnBxV,EAAKyV,QAAU,KACfzV,EAAK0V,MAAQ,GACb1V,EAAK2V,YAAc,EAEnB3V,EAAK4V,cAAgB,KAErB5V,EAAK6V,eAAiB7V,EAAK6V,eAAelM,KAApB9F,OAAA+F,EAAA,EAAA/F,QAAA+F,EAAA,EAAA/F,CAAA7D,KA9DNA,mFAkEC,IAAA6J,EAAA5J,KAEjBA,KAAKqG,QAAUrG,KAAKwL,cAAcC,aAAezL,KAAK8F,OAAOD,IAAM7F,KAAK8F,OAAOyD,OAC/EvJ,KAAKoG,OAASpG,KAAKwL,cAAcE,YAAc1L,KAAK8F,OAAOG,KAAOjG,KAAK8F,OAAOwD,MAE9EtJ,KAAKwR,QAAUZ,IAAU5Q,KAAKwL,eAAejG,OAAO,OAC/CN,KAAK,QAAS,2BACdW,MAAM,UAAW,GAItB5F,KAAK6V,kBAAoBjF,IAAU5Q,KAAKwL,eAAejG,OAAO,OACzDyE,QAAQ,qBAAoB,GAEjChK,KAAK8V,cAAgB9V,KAAK6V,kBAAkBtQ,OAAO,OAC1CyE,QAAQ,UAAS,GACjBA,QAAQ,mBAAkB,GAC1BA,QAAQ,mBAAkB,GAC1BQ,GAAG,QAAS,WAAOoG,IAAa,WAAW5G,QAAQ,mBAAkB,GAAOJ,EAAKkM,cAAc9L,QAAQ,mBAAkB,GAAMJ,EAAKmM,aAAa,KACjJnR,KAAK,eACd5E,KAAKgW,aAAehW,KAAK6V,kBAAkBtQ,OAAO,OAC7CyE,QAAQ,UAAS,GACjBA,QAAQ,gBAAe,GACvBQ,GAAG,QAAS,WAAOoG,IAAa,WAAW5G,QAAQ,mBAAkB,GAAOJ,EAAKoM,aAAahM,QAAQ,mBAAkB,GAAMJ,EAAKmM,aAAa,KAChJnR,KAAK,mBAEV5E,KAAKiW,cAAgBjW,KAAK6V,kBAAkBtQ,OAAO,OAC9CyE,QAAQ,UAAS,GACjBA,QAAQ,iBAAgB,GACxBQ,GAAG,QAAS,WAAOoG,IAAa,uBAAuBhL,MAAM,UAAU,aACvEhB,KAAK,mBAEV5E,KAAKyV,MAAQzV,KAAK4V,eAAejS,IAEjC3D,KAAKkW,gBAAkB,GACvBlW,KAAKkW,gBAAgB,GAAK,WAC1B,IAAI,IAAI9Q,EAAI,EAAGA,EAAI+Q,GAASlP,KAAKhD,OAAQmB,IACvCpF,KAAKkW,gBAAgBC,GAASlP,KAAK7B,GAAG5B,eAAe+E,YAAc4N,GAASlP,KAAK7B,GAAG5B,eAAe0C,cAKrGlG,KAAKoW,mBAAqBxF,IAAU5Q,KAAKwL,eAAejG,OAAO,OAC1DyE,QAAQ,sBAAqB,GAE7BpE,MAAM,mBAAmB,aAC9B5F,KAAKoW,mBAAmB7Q,OAAO,MAAMX,KAAK,WAAWgB,MAAM,aAAa,OACxE5F,KAAKqW,gBAAkBrW,KAAKoW,mBAAmB7Q,OAAO,OAAOqH,UAAU,OACpE3F,KAAKkP,GAASlP,MACjBjH,KAAKqW,gBAAgBrG,QAAQzK,OAAO,OAEjCyE,QAAQ,WAAU,GAClBA,QAAQ,kBAAiB,GAEzBQ,GAAG,QAAS,SAAA3D,GAAM+C,EAAK0M,iBAAiB,EAAGzP,EAAErD,eAAe+E,YAC3DqI,IAAa,uBAAuBhL,MAAM,UAAU,QACpDgL,IAAa,WAAW5G,QAAQ,mBAAkB,GAClDJ,EAAKqM,cAAcjM,QAAQ,mBAAkB,KAC9CQ,GAAG,YAAY,SAAS3D,GACvB+J,IAAU5Q,MAAM4F,MAAM,mBAAmB,WAE1C4E,GAAG,WAAW,SAAS3D,GACtB+J,IAAU5Q,MAAM4F,MAAM,mBAAmB,eAE1CoM,KAAM,SAAAnL,GAAM,OAAOA,EAAErD,eAAe0C,cAAgB,SAGvDlG,KAAKuW,cAAgB,CACnBxB,EAAG,CAAE/P,EAAG,IAAKS,EAAG,GAChBhE,EAAG,CAAEuD,EAAG,IAAKS,EAAG,GAChB/D,EAAG,CAAEsD,EAAG,IAAKS,EAAG,GAChB9D,EAAG,CAAEqD,EAAG,GAAIS,EAAE,IAIhBzF,KAAKmR,OAAS,CAAEnM,EAAGhF,KAAKoG,MAAQ,EAAGX,EAAGzF,KAAKqG,OAAS,GAGpDrG,KAAKyQ,oBAAsB7F,IAAS,kBAAMhB,EAAK8G,qBAAqB,KACpE1Q,KAAK2Q,KAAOC,MACPC,YAAY,CAAC,GAAI,KACjBrG,GAAG,iBAAkB,WAAOZ,EAAKmH,EAAE9L,KAAK,YAAa2L,IAAStK,aAC9DkE,GAAG,cAAexK,KAAKyQ,qBAE5BzQ,KAAK6J,IAAM+G,IAAU5Q,KAAK8J,QACnB7E,KAAK,QAAQjF,KAAKoG,OAClBnB,KAAK,SAASjF,KAAKqG,QACnB8C,KAAKnJ,KAAK2Q,MACjB3Q,KAAK0Q,oBACL1Q,KAAK6J,IAAIW,GAAG,QAAS,WACW,mBAA1BoG,IAASvP,OAAOmV,OAElB5F,IAAa,uBAAuBhL,MAAM,UAAU,UAGxD5F,KAAK+Q,EAAI/Q,KAAK6J,IAAItE,OAAO,KAEzBvF,KAAKyW,WAAa7F,MACf8F,cAAc,IACdC,MAAM,IAAK/F,MAAYgG,SAAS5W,KAAK2V,eAAe3Q,EAAEhF,KAAKmR,OAAOnM,IAClE2R,MAAM,IAAK/F,MAAYgG,SAAS5W,KAAK2V,eAAelQ,EAAEzF,KAAKmR,OAAO1L,IAClEkR,MAAM,SAAU/F,MAAmBgG,SAAS5W,KAAK6W,OAAOnN,KAAK1J,QAC7DwK,GAAG,OAAQxK,KAAK8W,OAAOpN,KAAK1J,OAE/BA,KAAKyW,WAAWM,OAChB/W,KAAKgX,UAAYpG,IAAOuF,GAAU,SAAAtP,GAAO,OAAQA,EAAEoQ,eAEnDjX,KAAKkX,YAActG,MAChB7H,SAAS,IACTzE,MAAM,CAAC,EAAG,KACVE,OAAO,CAAC,EAAGxE,KAAKgX,YAGnBhX,KAAKwV,QAAUxV,KAAK+Q,EAAEnE,UAAU,WAC7B3F,KAAKjH,KAAKyV,MAAO,SAAA5O,GAAO,OAAOA,EAAEsB,KAEpCnI,KAAKmX,SAAWnX,KAAKwV,QAAQxF,QAAQzK,OAAO,UACzCyE,QAAQ,UAAU,GAClB/E,KAAK,IAAK,GACVW,MAAM,OAAO,SAAAiB,GAAO,OAAO+C,EAAKoL,aAAanO,EAAEuQ,YAC/CnS,KAAK,eAAgB,IACrBA,KAAK,SAAS,SAAA4B,GAAM,OAAO+C,EAAKqL,qBAAqBpO,EAAEuQ,YACvD5M,GAAG,YAAY,SAAA3D,GACd,IAAIsB,EAAKtB,EAAEsB,GAEXyI,IAAa,WACV5J,OAAO,SAASH,GAAG,OAAGA,EAAEsB,KAAKA,IAC7BQ,aACE/C,MAAM,UAAU,OAErBgE,EAAK4H,QAAQ7I,aAAa/C,MAAM,UAAW,IAC3CgE,EAAK4H,QAAQQ,KAAKnL,EAAEwQ,cACjBzR,MAAM,OAASgL,IAASsB,QAAW,MACnCtM,MAAM,MAAQgL,IAASuB,QAAU,GAAM,MACvCvM,MAAM,YAAc,WAExB4E,GAAG,WAAW,SAAA3D,GACX+C,EAAK4H,QAAQ7I,aAAa/C,MAAM,UAAW,GAC3CgL,IAAa,WACVjI,aACE/C,MAAM,UAAU,OAI3B5F,KAAKwV,QAAUxV,KAAKwV,QAAQ8B,MAAMtX,KAAKmX,UAEvCnX,KAAKwV,QAAQ7M,WAAW,SACrBC,SAAS,KACT3D,KAAK,IAAK,SAAA4B,GAAO,OAAOA,EAAE8N,SAG7B3U,KAAKyW,WAAWhB,MAAMzV,KAAKyV,OAC3BzV,KAAK+V,aAAa,GAGlB,IAAIwB,EAAa3G,IAAQ5Q,KAAK8U,eAC9B9U,KAAKwX,MAAQxX,KAAK+Q,EAAEnE,UAAU,iBAC7B3F,KAAKsQ,GAENvX,KAAKwX,MAAMxH,QAAQzK,OAAO,QACvBN,KAAK,QAAS,gBACdA,KAAK,UAAU,QACfA,KAAK,YAAY,QACjBA,KAAK,IAAK,SAAA4B,GAAO,OAAO+C,EAAKsL,gBAAgBrO,KAC7C5B,KAAK,IAAK,SAAA4B,GAAO,OAAO+C,EAAKuL,gBAAgBtO,KAC7C5B,KAAK,cAAe,UACpBL,KAAK,SAAAiC,GAAO,OAAO+C,EAAKkL,cAAcjO,KAEzC7G,KAAKyX,SAAW,CAAC1C,EAAI,WAAYtT,EAAG,QACpC,IAAIiW,EAAY9G,IAAQ5Q,KAAKyX,UAC7BzX,KAAK2X,cAAgB3X,KAAK+Q,EAAEnE,UAAU,eACrC3F,KAAKyQ,GAEN1X,KAAK2X,cAAc3H,QAAQzK,OAAO,QAC/BN,KAAK,QAAS,cACdA,KAAK,UAAU,QACfA,KAAK,YAAY,QACjBA,KAAK,IAAK,SAAA4B,GAAO,OAAO+C,EAAKyL,kBAAkBxO,KAC/C5B,KAAK,IAAK,SAAA4B,GAAO,OAAO+C,EAAK0L,kBAAkBzO,KAC/C5B,KAAK,cAAe,UACpBL,KAAK,SAAAiC,GAAO,OAAO+C,EAAK6N,SAAS5Q,KACjCG,OAAO,SAAUH,GAChB,OAAQ,GAALA,IAKJ5B,KAAK,YAAY,QACjBA,KAAK,KAAK,yDAQF2S,GACD,GAAPA,EACD5X,KAAKyW,WAAWE,MAAM,IAAK/F,MAAYgG,SAAS5W,KAAK2V,eAAe3Q,EAAEhF,KAAKmR,OAAOnM,IAClE,GAAP4S,EACT5X,KAAKyW,WAAWE,MAAM,IAAK/F,MAAYgG,SAAS5W,KAAK2V,eAAe3Q,EAAEhF,KAAK6X,YAAYnO,KAAK1J,QAC5E,GAAP4X,GACT5X,KAAKyW,WAAWE,MAAM,IAAK/F,MAAYgG,SAAS5W,KAAK2V,eAAe3Q,EAAEhF,KAAK8X,aAAapO,KAAK1J,QAE/FA,KAAK0V,YAAckC,EACnB5X,KAAKyW,WAAWsB,MAAM,GAAGC,UACzBhY,KAAKiY,aAAaL,wCAGPA,GACD,GAAPA,EACDhH,IAAa,iBACV3L,KAAK,UAAU,WAElB2L,IAAa,iBACV3L,KAAK,UAAW,QAEX,GAAP2S,EACDhH,IAAa,eACV3L,KAAK,UAAU,WAEhB2L,IAAa,eACV3L,KAAK,UAAU,4CAGZ4B,GACV,OAAO7G,KAAKuW,cAAc1P,EAAEuQ,UAAUpS,uCAG3B6B,GAEX,IADA,IAAIqR,EAAQrR,EAAEyK,SACNlM,EAAI,EAAGA,EAAI8S,EAAMjU,OAAQmB,IAC/B,GAAG8S,EAAM9S,IAAMpF,KAAKuV,WAClB,OAAOvV,KAAKoV,aAAa,GAG7B,OAAOpV,KAAKoV,aAAa,kCAEpBvO,GACL,OAAQhE,KAAKsV,IAAItR,EAAE8N,OAAQ,GAAO3U,KAAK2V,+CAIvC3V,KAAKwV,QAAQvQ,KAAK,KAAM,SAAA4B,GAAO,OAAOA,EAAE7B,IAC3BC,KAAK,KAAM,SAAA4B,GAAO,OAAOA,EAAEpB,6CAGzBmS,EAAKQ,GACpBpY,KAAK0V,YAAckC,EACnB5X,KAAKuV,WAAa6C,EAClBxH,IAAU,qBAAqBhM,KAAK5E,KAAKkW,gBAAgBkC,IACzDpY,KAAK+V,aAAa6B,wFAOLS,GACb,IAAIC,EAAM,CACPC,mBAAkB,EAClBC,UAAc,EACdC,gBAAc,EACdC,uBAAwB,GAEvBC,EAAUN,EAAQnY,IAAI,SAAU2G,EAAEzB,GACpC,MAAO,CACL+C,GAAK/C,EACLuP,OAAS,GACT0C,aAAcxQ,EAAE+R,aAChB1V,MAAuB,GAAhBL,KAAKgW,SACZvH,SAAWzK,EAAEiS,SACb1B,SAAUkB,EAAIzR,EAAEkS,UAChB/T,EAAmB,IAAhBnC,KAAKgW,SACRpT,EAAmB,IAAhB5C,KAAKgW,YAIZ,OADAF,EAAQ1J,KAAK,SAAUtO,EAAEuO,GAAI,OAAOA,EAAEhM,MAAQvC,EAAEuC,QACzCyV,8CAIP,IAAMK,EAAcpI,IAAiB5Q,KAAK6J,IAAIkK,QAAQJ,EACtD3T,KAAKK,MAAM0O,gBAAgB,CAAC,CAAEhJ,EAAG,GAAKiT,EAAa5V,MAAO,gDAIpD,IAAA0K,EAAA9N,KACN,OACEU,EAAAC,EAAAC,cAAA,OAAKE,UAAU,cAAcsP,IAAK,SAAAC,GAAU,OAAIvC,EAAKtC,cAAgB6E,IACnE3P,EAAAC,EAAAC,cAAA,OAAKE,UAAU,mBAAmBqH,GAAG,mBAAmBiI,IAAK,SAAAvG,GAASiE,EAAKhE,OAASD,aAtWrEvI,+BCOjB2X,uBACJ,SAAAA,EAAY5Y,GAAO,IAAAN,EAAA,OAAA6D,OAAAgE,EAAA,EAAAhE,CAAA5D,KAAAiZ,IACjBlZ,EAAA6D,OAAAqF,EAAA,EAAArF,CAAA5D,KAAA4D,OAAAsF,EAAA,EAAAtF,CAAAqV,GAAA9P,KAAAnJ,KAAMK,KAED+I,MAAQ,CACX8P,UAAU,GAGZnZ,EAAKoZ,aAAepZ,EAAKoZ,aAAazP,KAAlB9F,OAAA+F,EAAA,EAAA/F,QAAA+F,EAAA,EAAA/F,CAAA7D,KAPHA,4EAUN0K,GACX,IAAM2O,EAjBY,SAACnH,GACrB,IAAMlN,EAAQkN,EAAKoH,UAAU,EAAGpH,EAAKhO,OAAS,GAAGc,MAAM,KACvD,MAAO,CAAE2I,IAAK8B,OAAOC,SAAS1K,EAAM,IAAK4I,IAAK6B,OAAOC,SAAS1K,EAAM,KAejDuU,CAAc7O,EAAMpJ,OAAO4Q,MACtCsH,EAAS3V,OAAAC,EAAA,EAAAD,CAAO5D,KAAKK,MAAM6C,OAE3BsW,EAAQxZ,KAAKK,MAAM6C,MAAMuW,UAAU,SAAAC,GAAI,OAAIvO,IAAQiO,EAAUM,MACpD,IAAXF,GAAcD,EAAUI,OAAOH,EAAO,GACtC/O,EAAMpJ,OAAOuY,SAASL,EAAUrR,KAAKkR,GAErCpZ,KAAKK,MAAMiH,UAAUtH,KAAKK,MAAMiH,SAASiS,qCAGrC7L,EAAKC,GACb,OAA4E,IAArE3N,KAAKK,MAAM6C,MAAMuW,UAAU,SAAAC,GAAI,OAAIvO,IAAQuO,EAAM,CAAEhM,MAAKC,2CAGxD,IAAA/D,EAAA5J,KAcD6Z,EAAOvV,YAAM,EAAGwV,GAAU5Z,IAAI,SAAAwN,GAAG,OACrChN,EAAAC,EAAAC,cAAA,MAAIC,IAAK6M,GAdK,SAACA,GACf,OAAOpJ,YAAM,EAAGyV,GAAU7Z,IAAI,SAAAyN,GAAG,OAC/BjN,EAAAC,EAAAC,cAAA,MAAIC,IArCC,GAqCK6M,EAAM,GAAYC,GAC1BjN,EAAAC,EAAAC,cAAA,SACEoZ,KAAK,WACL/H,KAAI,IAAAlR,OAAM2M,EAAN,KAAA3M,OAAa4M,EAAb,KACJiM,QAAShQ,EAAKqQ,UAAUvM,EAAKC,GAC7BrG,SAAUsC,EAAKuP,aACfe,SAAUtQ,EAAKvJ,MAAM8Z,UAAYvQ,EAAKvJ,MAAM8Z,QAAQzM,GAAKC,QAO5DyM,CAAQ1M,MAIb,OACEhN,EAAAC,EAAAC,cAAA,OAAKE,UAAU,wCACbJ,EAAAC,EAAAC,cAAA,QAAME,UAAU,sBAAhB,6BAGAJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,+BACbJ,EAAAC,EAAAC,cAAA,SAAOE,UAAU,qBACfJ,EAAAC,EAAAC,cAAA,aACGiZ,aAtDWvY,cA+D1B2X,GAAYoB,aAAe,CACzBnX,MAAO,IAYM+V,qCChFf,SAASqB,KAAsB,QAAAC,EAAA7S,UAAAzD,OAANgD,EAAM,IAAAuT,MAAAD,GAAAE,EAAA,EAAAA,EAAAF,EAAAE,IAANxT,EAAMwT,GAAA/S,UAAA+S,GAC7B,MAAO,CAAExT,KAAMyT,KAAaxG,WAAb,EAAAtQ,OAAAC,EAAA,EAAAD,CAAiBqD,EAAK/G,IAAI,SAAA2G,GAAC,OAAIA,EAAEI,UAIlD,IAAM0T,GAAW,SAAAC,GAAA,IAAGlB,EAAHkB,EAAGlB,KAAH,OACfhZ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,gBACbJ,EAAAC,EAAAC,cAAA,QAAME,UAAU,sBAAsB4Y,EAAKzH,MAC3CvR,EAAAC,EAAAC,cAAA,QAAME,UAAU,uBAAuB4Y,EAAKmB,SAuYjCC,eAlYb,SAAAA,EAAYza,GAAO,IAAAN,EAAA,OAAA6D,OAAAgE,EAAA,EAAAhE,CAAA5D,KAAA8a,IACjB/a,EAAA6D,OAAAqF,EAAA,EAAArF,CAAA5D,KAAA4D,OAAAsF,EAAA,EAAAtF,CAAAkX,GAAA3R,KAAAnJ,KAAMK,KAED+I,MAAQ,CACX2R,WAAY,CACVC,OAAQ3a,EAAM4G,KACd/C,UAAW7D,EAAM4G,KACjBtD,SAAUtD,EAAM4G,KAChBgU,SAAU5a,EAAM4G,KAChBiU,YAAa7a,EAAM4G,MAErBkU,aAAc,CACZH,OAAQ,GACR9W,UAAW,GACXP,SAAU,GACVsX,SAAU,GACVC,YAAa,IAEf9S,aAAc/H,EAAM4G,MAItBlH,EAAKqb,iBAAmB,KAIxBrb,EAAKsb,cAAgB,CACnBL,OAAQ,KACR9W,UAAW,KACXP,SAAU,KACVsX,SAAU,KACVC,YAAa,MAGfnb,EAAKub,iBAAmB,GACxBvb,EAAKwb,gBAAkB,GACvBxb,EAAKyb,gBAAkB,GAEvBnb,EAAM4G,KAAKA,KAAK5B,QAAQ,SAAAwB,GACtB9G,EAAKub,iBAAiBzU,EAAErD,eAAe+E,YAAc,IAAIzE,IACzD+C,EAAErD,eAAeU,UAAUmB,QAAQ,SAAA/E,GACjCP,EAAKub,iBAAiBzU,EAAErD,eAAe+E,YAAYkT,IAAInb,KAGzDP,EAAKwb,gBAAgB1U,EAAErD,eAAe+E,YAAc,IAAIzE,IACxD+C,EAAErD,eAAeO,iBAAiBsB,QAAQ,SAAAqW,GACxC3b,EAAKwb,gBAAgB1U,EAAErD,eAAe+E,YAAYkT,IAAIC,KAExD7U,EAAErD,eAAeQ,iBAAiBqB,QAAQ,SAAAsW,GACxC5b,EAAKwb,gBAAgB1U,EAAErD,eAAe+E,YAAYkT,IAAIE,KAGxD5b,EAAKyb,gBAAgB3U,EAAErD,eAAe+E,YAAc,IAAIzE,IACxD+C,EAAErD,eAAeyX,SAAS5V,QAAQ,SAAAuW,GAChC7b,EAAKyb,gBAAgB3U,EAAErD,eAAe+E,YAAYkT,IAAIG,OAI1D7b,EAAK8b,SAAW,CACdb,OAAQ,SAACA,GACP,OAAKA,EAAO/W,OAEL,CACLgD,KAAMlH,EAAKM,MAAM4G,KAAKA,KAAKD,OAAO,SAACH,GACjC,QAAKmU,EAAOxa,SAASqG,EAAErD,eAAe0C,kBAJfnG,EAAKM,MAAM4G,MASxC/C,UAAW,SAACA,GACV,OAAKA,EAAUD,OAER,CACLgD,KAAMlH,EAAKM,MAAM4G,KAAKA,KAAKD,OAAO,SAACH,GACjC,QAAK3C,EAAU4X,KAAK,SAAAxb,GAClB,OAAOP,EAAKub,iBAAiBzU,EAAErD,eAAe+E,YAAYwT,IAAIzb,EAAS2R,WAL/ClS,EAAKM,MAAM4G,MAW3CtD,SAAU,SAACA,GACT,OAAKA,EAASM,OAEP,CACLgD,KAAMlH,EAAKM,MAAM4G,KAAKA,KAAKD,OAAO,SAACH,GACjC,QAAKlD,EAASmY,KAAK,SAAAE,GACjB,OAAOjc,EAAKwb,gBAAgB1U,EAAErD,eAAe+E,YAAYwT,IAAIC,EAAQ/J,WAL9ClS,EAAKM,MAAM4G,MAW1CgU,SAAU,SAACA,GACT,OAAKA,EAAShX,OAEP,CACLgD,KAAMlH,EAAKM,MAAM4G,KAAKA,KAAKD,OAAO,SAACH,GACjC,QAAKoU,EAASa,KAAK,SAAAF,GACjB,OAAO7b,EAAKyb,gBAAgB3U,EAAErD,eAAe+E,YAAYwT,IAAIH,EAAQ3J,WAL9ClS,EAAKM,MAAM4G,MAW1CiU,YAAa,SAACA,GACZ,OAAKA,EAAYjX,OAEV,CACLgD,KAAMlH,EAAKM,MAAM4G,KAAKA,KAAKD,OAAO,SAACH,GACjC,QAAKqU,EAAYe,MAAM,SAAA7C,GACrB,OAAOvS,EAAErD,eAAehC,EAAU4X,EAASzL,MAAMnN,SAAS2B,EAAUiX,EAAS1L,WALnD3N,EAAKM,MAAM4G,OA1G9BlH,uEAyHjB,OAAO6D,OAAOsD,OAAOlH,KAAKoJ,MAAM+R,cAAcc,MAAM,SAAA/Y,GAAK,OAAqB,IAAjBA,EAAMe,qDAGjD+C,GAClB,OAAOsT,GAAYpG,WAAZ,EAAAtQ,OAAAC,EAAA,EAAAD,CAAgBA,OAAOsY,QAAQlc,KAAKoJ,MAAM2R,YAC9C/T,OAAO,SAAAmV,GAAA,IAAAC,EAAAxY,OAAAyY,GAAA,EAAAzY,CAAAuY,EAAA,GAAEtb,EAAFub,EAAA,GAAAA,EAAA,UAAkBvb,IAAQmG,IACjC9G,IAAI,SAAAoc,GAAA,IAAAC,EAAA3Y,OAAAyY,GAAA,EAAAzY,CAAA0Y,EAAA,GAAAC,EAAA,UAAAA,EAAA,iDAKP,OADavc,KAAKwc,oBAAoB,UAC1BvV,KAAK/G,IAAI,SAAA2G,GAAC,OAAIA,EAAErD,eAAe0C,4DAI3C,IAAMe,EAAOjH,KAAKwc,oBAAoB,aAEhCC,EAAM,IAAIjM,IAOhB,OANAvJ,EAAKA,KAAK5B,QAAQ,SAAAwB,GAChBA,EAAErD,eAAeU,UAAUmB,QAAQ,SAAA/E,GACjCmc,EAAIV,IAAIzb,GAAYmc,EAAIC,IAAIpc,EAAUmc,EAAIE,IAAIrc,GAAY,GAAKmc,EAAIC,IAAIpc,EAAU,OAI9EsD,OAAAC,EAAA,EAAAD,CAAI6Y,GACRxN,OACA2N,OAAO,SAAClO,EAADmO,GAAA,IAAAC,EAAAlZ,OAAAyY,GAAA,EAAAzY,CAAAiZ,EAAA,GAAOhc,EAAPic,EAAA,GAAY5Z,EAAZ4Z,EAAA,UAAAlZ,OAAAC,EAAA,EAAAD,CAA2B8K,GAA3B3N,OAAA,CAAgC,CAACkR,KAAMpR,EAAKga,MAAO3X,MAAS,+CAGrD,IAAA0G,EAAA5J,KACXiH,EAAOjH,KAAKwc,oBAAoB,YAEhCC,EAAM,IAAIjM,IAOhB,OANAvJ,EAAKA,KAAK5B,QAAQ,SAAAwB,GAChB+C,EAAK2R,gBAAgB1U,EAAErD,eAAe+E,YAAYlD,QAAQ,SAAA2W,GACxDS,EAAIV,IAAIC,GAAWS,EAAIC,IAAIV,EAASS,EAAIE,IAAIX,GAAW,GAAKS,EAAIC,IAAIV,EAAS,OAI1EpY,OAAAC,EAAA,EAAAD,CAAI6Y,GACRxN,OACA2N,OAAO,SAAClO,EAADqO,GAAA,IAAAC,EAAApZ,OAAAyY,GAAA,EAAAzY,CAAAmZ,EAAA,GAAOlc,EAAPmc,EAAA,GAAY9Z,EAAZ8Z,EAAA,UAAApZ,OAAAC,EAAA,EAAAD,CAA2B8K,GAA3B3N,OAAA,CAAgC,CAACkR,KAAMpR,EAAKga,MAAO3X,MAAS,+CAItE,IAAM+D,EAAOjH,KAAKwc,oBAAoB,YAEhCC,EAAM,IAAIjM,IAOhB,OANAvJ,EAAKA,KAAK5B,QAAQ,SAAAwB,GAChBA,EAAErD,eAAeyX,SAAS5V,QAAQ,SAAAuW,GAChCa,EAAIV,IAAIH,GAAWa,EAAIC,IAAId,EAASa,EAAIE,IAAIf,GAAW,GAAKa,EAAIC,IAAId,EAAS,OAI1EhY,OAAAC,EAAA,EAAAD,CAAI6Y,GACRxN,OACA2N,OAAO,SAAClO,EAADuO,GAAA,IAAAC,EAAAtZ,OAAAyY,GAAA,EAAAzY,CAAAqZ,EAAA,GAAOpc,EAAPqc,EAAA,GAAYha,EAAZga,EAAA,UAAAtZ,OAAAC,EAAA,EAAAD,CAA2B8K,GAA3B3N,OAAA,CAAgC,CAACkR,KAAMpR,EAAKga,MAAO3X,MAAS,mDAYtE,IARA,IAAM+D,EAAOjH,KAAKoJ,MAAMhB,aAKlB+U,EAAW7Y,YAAM,EAAGyV,GAEpBqD,EAAW,GACR1P,EAAM,EAAGA,GANL,IAMoBA,EAAK,CACpC0P,EAAS1P,GAAO,GAChB,IAAK,IAAIC,EAAM,EAAGA,GAPP,IAOsBA,EAC/ByP,EAAS1P,GAAKC,IAAO,EAazB,OATA1G,EAAKA,KAAK5B,QAAQ,SAAAwB,GAChBsW,EAAS9X,QAAQ,SAAAsI,GACf9G,EAAErD,eAAehC,EAAUmM,IAAMtI,QAAQ,SAAA6I,GACvC,IAAMR,EAAM7L,EAAUqM,GACjBkP,EAAS1P,GAAKC,KAAMyP,EAAS1P,GAAKC,IAAO,SAK7CyP,gDAIazX,EAAW0X,GAC/B,OAAKlS,IAAQkS,EAAWrd,KAAKoJ,kDAIZ2B,EAAWC,GAAW,IAAA8C,EAAA9N,KACvC,GAAIgL,IAAchL,KAAKoJ,MAAvB,CAEA,IAAK+B,IAAQH,EAAUmQ,aAAcnb,KAAKoJ,MAAM+R,cAAe,CAC7D,IAAMJ,EAAa,GACnBnX,OAAO0I,KAAKtM,KAAK6b,UAAUxW,QAAQ,SAAA2B,GAC5BmE,IAAQH,EAAUmQ,aAAanU,GAAS8G,EAAK1E,MAAM+R,aAAanU,MACnE+T,EAAW/T,GAAU8G,EAAK+N,SAAS7U,GAAQ8G,EAAK1E,MAAM+R,aAAanU,OAGnEpD,OAAO0I,KAAKyO,GAAY9W,QAC1BjE,KAAKqL,SAAS,SAACjC,EAAO/I,GAAR,MAAmB,CAC/B0a,WAAWnX,OAAAiL,EAAA,EAAAjL,CAAA,GACNwF,EAAM2R,WACNA,MAMX,IAAK5P,IAAQH,EAAU+P,WAAY/a,KAAKoJ,MAAM2R,YAAa,CACzD,IAAMuC,EAAkBhD,GAAYpG,WAAZ,EAAAtQ,OAAAC,EAAA,EAAAD,CAAgBA,OAAOsD,OAAOlH,KAAKoJ,MAAM2R,cACjE/a,KAAKqL,SAAS,CACZjD,aAAckV,IAEhBtd,KAAKK,MAAMkd,mBAAmBD,sCAIzB,IAAAnN,EAAAnQ,KAaP,OAXIA,KAAKoJ,MAAMhB,eAAiBpI,KAAKob,mBACnCpb,KAAKob,iBAAmBpb,KAAKoJ,MAAMhB,aACnCpI,KAAKqb,cAAgB,CACnBL,OAAQhb,KAAKwd,kBACbtZ,UAAWlE,KAAKyd,oBAChB9Z,SAAU3D,KAAK0d,mBACfzC,SAAUjb,KAAK2d,mBACfzC,YAAalb,KAAK4d,yBAKpBld,EAAAC,EAAAC,cAAA,OAAKE,UAAU,WACbJ,EAAAC,EAAAC,cAAA,oBACAF,EAAAC,EAAAC,cAAA,OAAKE,UAAU,eACbJ,EAAAC,EAAAC,cAAA,QAAME,UAAU,sBAAhB,SAGAJ,EAAAC,EAAAC,cAACmG,EAAA,YAAD,CACEE,KAAMjH,KAAKqb,cAAcL,OACzB1T,SAAU,SAAA0T,GACR7K,EAAK9E,SAAS,CACZ8P,aAAavX,OAAAiL,EAAA,EAAAjL,CAAA,GACRuM,EAAK/G,MAAM+R,aADJ,CAEVH,cAIN6C,YAAY,uBACZ7W,OAAO,WACP9D,MAAOlD,KAAKoJ,MAAM+R,aAAaH,UAEnCta,EAAAC,EAAAC,cAAA,OAAKE,UAAU,eACbJ,EAAAC,EAAAC,cAAA,QAAME,UAAU,sBAAhB,SAGAJ,EAAAC,EAAAC,cAACmG,EAAA,YAAD,CACEE,KAAMjH,KAAKqb,cAAcnX,UACzBoD,SAAU,SAAApD,GACRiM,EAAK9E,SAAS,CACZ8P,aAAavX,OAAAiL,EAAA,EAAAjL,CAAA,GACRuM,EAAK/G,MAAM+R,aADJ,CAEVjX,iBAIN2Z,YAAY,uBACZ1W,WAAW,OACXC,UAAU,OACV0W,cAAenD,GACfzX,MAAOlD,KAAKoJ,MAAM+R,aAAajX,aAEnCxD,EAAAC,EAAAC,cAAA,OAAKE,UAAU,eACbJ,EAAAC,EAAAC,cAAA,QAAME,UAAU,sBAAhB,WAGAJ,EAAAC,EAAAC,cAACmG,EAAA,YAAD,CACEE,KAAMjH,KAAKqb,cAAc1X,SACzB2D,SAAU,SAAA3D,GACRwM,EAAK9E,SAAS,CACZ8P,aAAavX,OAAAiL,EAAA,EAAAjL,CAAA,GACRuM,EAAK/G,MAAM+R,aADJ,CAEVxX,gBAINka,YAAY,0BACZ7W,OAAO,WACPG,WAAW,OACXC,UAAU,OACV0W,cAAenD,GACfzX,MAAOlD,KAAKoJ,MAAM+R,aAAaxX,YAEnCjD,EAAAC,EAAAC,cAAA,OAAKE,UAAU,eACbJ,EAAAC,EAAAC,cAAA,QAAME,UAAU,sBAAhB,aAGAJ,EAAAC,EAAAC,cAACmG,EAAA,YAAD,CACEE,KAAMjH,KAAKqb,cAAcJ,SACzB3T,SAAU,SAAA2T,GACR9K,EAAK9E,SAAS,CACZ8P,aAAavX,OAAAiL,EAAA,EAAAjL,CAAA,GACRuM,EAAK/G,MAAM+R,aADJ,CAEVF,gBAIN4C,YAAY,0BACZ7W,OAAO,WACPG,WAAW,OACXC,UAAU,OACV0W,cAAenD,GACfzX,MAAOlD,KAAKoJ,MAAM+R,aAAaF,YAGnCva,EAAAC,EAAAC,cAACmd,GAAD,CACE7a,MAAOlD,KAAKoJ,MAAM+R,aAAaD,YAC/B5T,SAAU,SAAA4T,GACR/K,EAAK9E,SAAS,CACZ8P,aAAavX,OAAAiL,EAAA,EAAAjL,CAAA,GACRuM,EAAK/G,MAAM+R,aADJ,CAEVD,mBAINf,QAASna,KAAKqb,cAAcH,eAE5Blb,KAAK6M,SACLnM,EAAAC,EAAAC,cAACod,EAAA,SAAD,KACEtd,EAAAC,EAAAC,cAAA,KAAGE,UAAU,wBAAb,SACQJ,EAAAC,EAAAC,cAAA,QAAME,UAAU,gCAAgCd,KAAKoJ,MAAMhB,aAAanB,KAAKhD,QAClF,IAFH,OAEWvD,EAAAC,EAAAC,cAAA,QAAME,UAAU,gCAAgCd,KAAKK,MAAM4G,KAAKA,KAAKhD,QAFhF,aAKAvD,EAAAC,EAAAC,cAAA,OAAKE,UAAU,sBACbJ,EAAAC,EAAAC,cAAA,UACEE,UAAU,iBACVI,QAAS,kBAAMiP,EAAK9E,SAAS,CAC3B8P,aAAcvX,OAAOsY,QAAQ/L,EAAK/G,MAAM+R,cACrCyB,OAAO,SAAC5O,EAADiQ,GAAA,IAAAC,EAAAta,OAAAyY,GAAA,EAAAzY,CAAAqa,EAAA,GAAOtK,EAAPuK,EAAA,GAAAA,EAAA,UAAAta,OAAAiL,EAAA,EAAAjL,CAAA,GAAqBoK,EAArBpK,OAAAua,GAAA,EAAAva,CAAA,GAA2B+P,EAAI,MAAM,QAJnD,0BAzWQrS,6BCLP8c,OAdf,SAAAxD,GAA0C,IAAfhW,EAAegW,EAAfhW,KAAMyZ,EAASzD,EAATyD,MAC/B,OACE3d,EAAAC,EAAAC,cAAA,OAAKE,UAAU,qBACbJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,yBAAyB8E,MAAO,CAAC0Y,WAAYD,KAC5D3d,EAAAC,EAAAC,cAAA,QAAME,UAAU,2BAA2B8D,KCE3CkQ,WAAgB,CACpBC,EAAG,mBACHtT,EAAG,YACHC,EAAG,gBACHC,EAAG,yBAGCqT,GAAe,CACnBD,EAAG,UACHtT,EAAG,UACHC,EAAG,UACHC,EAAG,WAGL,SAAS4c,GAAT3D,GAAsC,IAChC4D,EADgC5D,EAAV6D,OACPve,IAAI,SAAAkD,GAAK,OAC1B1C,EAAAC,EAAAC,cAAA,MAAIC,IAAKuC,EAAMwB,MACblE,EAAAC,EAAAC,cAAC8d,GAAoBtb,MAIzB,OACE1C,EAAAC,EAAAC,cAAA,OAAKE,UAAU,gBACbJ,EAAAC,EAAAC,cAAA,UACG4d,QAaHG,eACJ,SAAAA,EAAYte,GAAO,IAAAN,EAAA6D,OAAAgE,EAAA,EAAAhE,CAAA5D,KAAA2e,GACjB5e,EAAA6D,OAAAqF,EAAA,EAAArF,CAAA5D,KAAA4D,OAAAsF,EAAA,EAAAtF,CAAA+a,GAAAxV,KAAAnJ,KAAMK,IAEN,IACMue,EAAeza,EAAajE,IAAI,SAAA8Z,GAAI,MAAK,CAAEpV,KAAMoV,EAAMqE,MAAOja,EAAkB4V,MAChF6E,EAAiBva,YAAM,GAAGpE,IAAI,SAAAkF,GAAC,MAAK,CAAER,KAAMkQ,GAAc1P,GAAIiZ,MAAOrJ,GAAa5P,MALvE,OAOjBrF,EAAK+e,QAAU,CACb5e,IAAMQ,EAAAC,EAAAC,cAAC2d,GAAD,CAAkBE,OALR,CAAC,CAAE7Z,KAAM,UAAWyZ,MAAO,cAM3CU,OAASre,EAAAC,EAAAC,cAAC2d,GAAD,CAAkBE,OAAQG,IACnCjb,SAAWjD,EAAAC,EAAAC,cAAC2d,GAAD,CAAkBE,OAAQI,KAVtB9e,qFAcG4F,EAAW0X,GAC/B,OAAIrd,KAAKK,MAAMC,SAASC,WAAaoF,EAAUrF,SAASC,0CAIjD,IAAAqJ,EAAA5J,KACDgf,EAAQpb,OAAO0I,KAAKtM,KAAK8e,SAASxW,KAAK,SAAA0W,GAAK,OAAIpV,EAAKvJ,MAAMC,SAASC,SAASC,SAASwe,KAE5F,OACEte,EAAAC,EAAAC,cAACqe,GAAA,EAAD,CACEC,QAAM,EACNV,MAAOQ,EACPG,KAAM,CAAE9Y,OAAQ,EAAG+Y,QAAS,GAC5BpP,MAAO,CAAE3J,OAAQ,OAAQ+Y,QAAS,GAClCC,MAAO,CAAEhZ,OAAQ,EAAG+Y,QAAS,IAC5B,SAAAJ,GAAK,YACMrX,IAAVqX,GACG,SAAA3e,GAAK,OACJK,EAAAC,EAAAC,cAACqe,GAAA,EAASK,IAAV,CAAc1Z,MAAKhC,OAAAiL,EAAA,EAAAjL,CAAA,GAAOvD,IACvBuJ,EAAKkV,QAAQE,cAlCJ1d,aA0CXC,eAAWod,ICpFpBjW,WAAmB,SAACC,GAAD,OAAgBA,EAAWC,SAAS,KAAKC,KAAKC,IAAYC,SAAS,MA6I7EwW,+LAzIXvf,KAAKwf,OAAS3a,YAAO7E,KAAKyf,WAAW7Z,MAAM,QAAS,SACpD5F,KAAK6J,IAAMhF,YAAO7E,KAAK8J,QAAQ7E,KAAK,SAAU,GAE9CjF,KAAK8F,OAAS,CAAED,IAAK,GAAIyD,MAAO,GAAIC,OAAQ,GAAItD,KAAM,IACtDjG,KAAK0f,UAAY,GACjB1f,KAAK2f,WAAa,GAElB3f,KAAKoL,WAAWpL,KAAKK,MAAMuf,8CAGlB3Y,GAAM,IAAAlH,EAAAC,KACf,GAAKiH,GAASA,EAAKhD,OAAnB,CAEA,IAAM4b,EAAY5Y,EAAK6Y,QAAQ5f,IAAI,SAAC2G,EAAGzB,GAAJ,OAAAxB,OAAAiL,EAAA,EAAAjL,CAAA,GAAgBiD,EAAhB,CAAmBzB,QAAM2a,UACtDpT,EAAY3M,KAAK6J,IAAI+C,UAAU,KAAK3F,KAAK4Y,GAEzCpB,EAASxX,EAAK/G,IAAI,SAAC2P,EAAQ2J,GAC/B,IAAIvT,EAAOgB,EAAK,GAAGlB,EAAIhG,EAAK+F,OAAOG,KAC/BJ,EAAkB,EAAZoB,EAAK,GAAGlB,EAAmB,EAAX8J,EAAO9J,EAAQhG,EAAK+F,OAAOD,IACjDO,EAAQa,EAAK,GAAGlB,EAAIhG,EAAK2f,UAO7B,OANIlG,IAAUvS,EAAKhD,OAAS,IAC1BgC,GAAQ4J,EAAO9J,EACfF,GAAOgK,EAAO9J,EACdK,GAASyJ,EAAO9J,GAGX,CAAEE,OAAMJ,MAAKO,WAKhB4Z,EAAwB,EAAZ/Y,EAAK,GAAGlB,EAAQ/F,KAAK8F,OAAOD,IAAM7F,KAAK8F,OAAOyD,OAC1D0W,EAAkBD,EAAYhgB,KAAK6J,IAAI5E,KAAK,UAC5Cib,EAA0B,EAAZjZ,EAAK,GAAGlB,EAAQ/F,KAAK8F,OAAOG,KAAOjG,KAAK8F,OAAOwD,MAAQtJ,KAAK0f,UAAY1f,KAAK2f,WAC3FQ,EAAoBD,EAAc1Q,OAAOC,SAASzP,KAAK6J,IAAIjE,MAAM,SAASlC,QAAQ,KAAM,KAE9F1D,KAAKwf,OACF7W,aACEQ,KAAKT,IACL9C,MAAM,QAHX,GAAA7E,OAGuBmf,EAHvB,OAKAlgB,KAAK6J,IACFlB,aACEQ,KAAKT,IACLzD,KAAK,SAAU+a,GAEpBrT,EAAUmD,OACL3G,KAAK,SAAA4H,GAAC,OAAIA,EAAElM,OAAO,QACfI,KAAK,UAAW,KACpBkE,KAAK,SAAA4H,GAAC,OAAIA,EAAElM,OAAO,QACfI,KAAK,UAAW,KACtB0D,aACEQ,KAAKT,IACLS,KAAK,SAAA4H,GAAC,OAAIA,EAAElM,OAAO,UACfI,KAAK,KAAMgC,EAAK,GAAGlB,EAAIhG,EAAK+F,OAAOG,MACnChB,KAAK,KAAM,SAAA4B,GAAC,OAAgB,EAAZI,EAAK,GAAGlB,EAAQc,EAAEd,EAAIhG,EAAK+F,OAAOD,MAClDZ,KAAK,UAAW,KACpB8K,SAELpD,EACGhE,aACEQ,KAAKT,IACLS,KAAK,SAAA4H,GAAC,OAAIA,EAAElM,OAAO,UACfI,KAAK,UAAW,GAChBA,KAAK,IAAK,SAAA4B,GAAC,OAAIA,EAAEd,IACjBd,KAAK,KAAMgC,EAAK,GAAGlB,EAAIhG,EAAK+F,OAAOG,MACnChB,KAAK,KAAM,SAAA4B,GAAC,OAAgB,EAAZI,EAAK,GAAGlB,EAAQc,EAAEd,EAAIhG,EAAK+F,OAAOD,QACtDsD,KAAK,SAAA4H,GAAC,OAAIA,EAAElM,OAAO,QACfI,KAAK,UAAW,GAChBA,KAAK,KAAM,SAAA4B,GAAC,OAAI4X,EAAO5X,EAAEzB,GAAGa,OAC5BhB,KAAK,KAAM,SAAA4B,GAAC,OAAI4X,EAAO5X,EAAEzB,GAAGa,KAAOwY,EAAO5X,EAAEzB,GAAGgB,QAC/CnB,KAAK,KAAM,SAAA4B,GAAC,OAAI4X,EAAO5X,EAAEzB,GAAGS,MAC5BZ,KAAK,KAAM,SAAA4B,GAAC,OAAI4X,EAAO5X,EAAEzB,GAAGS,QAChCsD,KAAK,SAAA4H,GAAC,OAAIA,EAAElM,OAAO,QACfI,KAAK,UAAW,GAChBA,KAAK,IAAK,SAAA4B,GAAC,OAAI4X,EAAO5X,EAAEzB,GAAGa,KAAOwY,EAAO5X,EAAEzB,GAAGgB,MAAQ,IACtDnB,KAAK,IAAK,SAAA4B,GAAC,OAAI4X,EAAO5X,EAAEzB,GAAGS,MAC3BjB,KAAK,SAAAiC,GAAC,OAAIA,EAAEzD,UAErBuJ,EAAUqD,QAAQzK,OAAO,KACpB4D,KAAK,SAAA4H,GAAC,OAAIA,EAAExL,OAAO,UACfN,KAAK,IAAK,SAAA4B,GAAC,OAAIA,EAAEd,IACjBd,KAAK,KAAMgC,EAAK,GAAGlB,EAAIhG,EAAK+F,OAAOG,KAAOka,EAAoB,GAC9Dlb,KAAK,KAAM,SAAA4B,GAAC,OAAgB,EAAZI,EAAK,GAAGlB,EAAQc,EAAEd,EAAIhG,EAAK+F,OAAOD,IAAMoa,IACxDhb,KAAK,UAAW,KACpBkE,KAAK,SAAA4H,GAAC,OAAIA,EAAExL,OAAO,QACfN,KAAK,KAAM,SAAA4B,GAAC,OAAI4X,EAAO5X,EAAEzB,GAAGa,KAAOka,EAAoB,IACvDlb,KAAK,KAAM,SAAA4B,GAAC,OAAI4X,EAAO5X,EAAEzB,GAAGa,KAAOwY,EAAO5X,EAAEzB,GAAGgB,MAAQ+Z,EAAoB,IAC3Elb,KAAK,KAAM,SAAA4B,GAAC,OAAI4X,EAAO5X,EAAEzB,GAAGS,IAAMoa,IAClChb,KAAK,KAAM,SAAA4B,GAAC,OAAI4X,EAAO5X,EAAEzB,GAAGS,IAAMoa,IAClChb,KAAK,kBAAmB,cACxBA,KAAK,UAAW,KACpBkE,KAAK,SAAA4H,GAAC,OAAIA,EAAExL,OAAO,QACfN,KAAK,IAAK,SAAA4B,GAAC,OAAI4X,EAAO5X,EAAEzB,GAAGa,KAAOwY,EAAO5X,EAAEzB,GAAGgB,MAAQ,EAAI+Z,EAAoB,IAC9Elb,KAAK,IAAK,SAAA4B,GAAC,OAAI4X,EAAO5X,EAAEzB,GAAGS,IAAMoa,IACjChb,KAAK,qBAAsB,WAC3BL,KAAK,SAAAiC,GAAC,OAAIA,EAAEzD,QACZ6B,KAAK,UAAW,KACtB0D,aACEQ,KAAKT,IACLS,KAAK,SAAA4H,GAAC,OAAIA,EAAElM,OAAO,UACfI,KAAK,KAAMgC,EAAK,GAAGlB,EAAIhG,EAAK+F,OAAOG,MACnChB,KAAK,KAAM,SAAA4B,GAAC,OAAgB,EAAZI,EAAK,GAAGlB,EAAQc,EAAEd,EAAIhG,EAAK+F,OAAOD,MAClDZ,KAAK,UAAW,KACpBkE,KAAK,SAAA4H,GAAC,OAAIA,EAAElM,OAAO,QACfI,KAAK,KAAM,SAAA4B,GAAC,OAAI4X,EAAO5X,EAAEzB,GAAGa,OAC5BhB,KAAK,KAAM,SAAA4B,GAAC,OAAI4X,EAAO5X,EAAEzB,GAAGa,KAAOwY,EAAO5X,EAAEzB,GAAGgB,QAC/CnB,KAAK,KAAM,SAAA4B,GAAC,OAAI4X,EAAO5X,EAAEzB,GAAGS,MAC5BZ,KAAK,KAAM,SAAA4B,GAAC,OAAI4X,EAAO5X,EAAEzB,GAAGS,MAC5BZ,KAAK,UAAW,KACpBkE,KAAK,SAAA4H,GAAC,OAAIA,EAAElM,OAAO,QACfI,KAAK,IAAK,SAAA4B,GAAC,OAAI4X,EAAO5X,EAAEzB,GAAGa,KAAOwY,EAAO5X,EAAEzB,GAAGgB,MAAQ,IACtDnB,KAAK,IAAK,SAAA4B,GAAC,OAAI4X,EAAO5X,EAAEzB,GAAGS,MAC3BZ,KAAK,UAAW,iDAGR8F,GACbA,EAAU6U,YAAc5f,KAAKK,MAAMuf,WACrC5f,KAAKoL,WAAWpL,KAAKK,MAAMuf,4CAGtB,IAAAhW,EAAA5J,KACP,OACEU,EAAAC,EAAAC,cAAA,OAAKE,UAAU,eAAesP,IAAK,SAAAoP,GAAM,OAAI5V,EAAK6V,UAAYD,IAC5D9e,EAAAC,EAAAC,cAAA,OAAKwP,IAAK,SAAAvG,GAAG,OAAID,EAAKE,OAASD,GAAKzD,MAAM,iBA9HxB9E,aCApB8e,4LAEF,IAAMC,GAAcrgB,KAAKK,MAAMC,SAASC,SAASC,SAAS,YAE1D,OACEE,EAAAC,EAAAC,cAAA,OAAKE,UAAU,WACbJ,EAAAC,EAAAC,cAAA,OACEE,UAAU,eACV8E,MAAO,CAAE0a,WAAaD,EAAa,UAAY,WAC/C3f,EAAAC,EAAAC,cAAC2f,GAAD,CAAStZ,KAAMjH,KAAKK,MAAM4G,KAAMsW,mBAAoBvd,KAAKK,MAAMkd,sBAEjE7c,EAAAC,EAAAC,cAAA,OAAKE,UAAU,mBACbJ,EAAAC,EAAAC,cAAC4f,GAAD,CAAaZ,UAAW5f,KAAKK,MAAMuf,YACnClf,EAAAC,EAAAC,cAAC6f,GAAD,eAbYnf,cAoBPC,eAAW6e,4CC0CXM,4LA7DJ,IAAA3gB,EAAAC,KACP,OACEU,EAAAC,EAAAC,cAACqe,GAAA,EAAD,CACEC,QAAM,EACNV,MAAOxe,KAAKK,MAAMsgB,MAClBxB,KAAM,CAAEb,WAAY,mBAAoBc,QAAS,EAAG9Y,UAAW,sBAC/D0J,MAAO,CAAEsO,WAAY,qBAAsBc,QAAS,EAAG9Y,UAAW,mBAClE+Y,MAAO,CAAEf,WAAY,mBAAoBc,QAAS,EAAG9Y,UAAW,uBAC/D,SAAAqa,GAAK,OAAIA,GAAU,SAAAtgB,GAAK,OACvBK,EAAAC,EAAAC,cAACqe,GAAA,EAASK,IAAV,CACExe,UAAU,WACV8E,MAAO,CAAE0Y,WAAYje,EAAMie,YAC3Bpd,QAAS,SAAC4L,GAAD,OAAOA,EAAEzL,SAAWyL,EAAE8T,eAAiB7gB,EAAKM,MAAMc,gBAC3DT,EAAAC,EAAAC,cAACqe,GAAA,EAASK,IAAV,CACExe,UAAU,gBACV8E,MAAO,CAAEwZ,QAAS/e,EAAM+e,QACtB9Y,UAAWjG,EAAMiG,YACnB5F,EAAAC,EAAAC,cAAA,mBAGAF,EAAAC,EAAAC,cAAA,+DAGAF,EAAAC,EAAAC,cAAA,+NACqNF,EAAAC,EAAAC,cAAA,KAAGQ,KAAK,6BAAR,oBADrN,MAGAV,EAAAC,EAAAC,cAAA,0NAGAF,EAAAC,EAAAC,cAAA,+VACkVF,EAAAC,EAAAC,cAAA,KAAGQ,KAAK,6CAAR,sCADlV,gDACydV,EAAAC,EAAAC,cAAA,KAAGQ,KAAK,wBAAR,iBADzd,MAGAV,EAAAC,EAAAC,cAAA,+KAGAF,EAAAC,EAAAC,cAAA,oRAC0QF,EAAAC,EAAAC,cAAA,KAAGQ,KAAK,6BAAR,oBAD1Q,KAGAV,EAAAC,EAAAC,cAAA,8CACgCF,EAAAC,EAAAC,cAAA,KAAGigB,IAAI,UAAUzf,KAAK,yDAAtB,qDADhC,KAGAV,EAAAC,EAAAC,cAAA,KAAGE,UAAU,uBACXJ,EAAAC,EAAAC,cAAA,oCAAmCF,EAAAC,EAAAC,cAAA,WAAKF,EAAAC,EAAAC,cAAA,KAAGQ,KAAK,gEAAR,8CAE1CV,EAAAC,EAAAC,cAAA,OAAKE,UAAU,yBACbJ,EAAAC,EAAAC,cAAA,OAAKkgB,IAAKC,KAAQC,IAAI,uBACtBtgB,EAAAC,EAAAC,cAAA,OAAKkgB,IAAKG,KAAQD,IAAI,0CA/ClB1f,cCyCL4f,8BA1Cb,SAAAA,EAAY7gB,GAAO,IAAAN,EAAA,OAAA6D,OAAAgE,EAAA,EAAAhE,CAAA5D,KAAAkhB,IACjBnhB,EAAA6D,OAAAqF,EAAA,EAAArF,CAAA5D,KAAA4D,OAAAsF,EAAA,EAAAtF,CAAAsd,GAAA/X,KAAAnJ,KAAMK,KAED+I,MAAQ,CACX+X,OAAQ9gB,EAAM+gB,aAAc,GAE9BrhB,EAAKshB,SAAWthB,EAAKshB,SAAS3X,KAAd9F,OAAA+F,EAAA,EAAA/F,QAAA+F,EAAA,EAAA/F,CAAA7D,KANCA,0EAUjBC,KAAKqL,SAAS,SAAAjC,GAAK,MAAK,CAAE+X,QAAS/X,EAAM+X,2CAGlC,IAAAvX,EAAA5J,KACP,OACEU,EAAAC,EAAAC,cAAA,OAAKE,UAAS,oBAAAC,OAAsBf,KAAKoJ,MAAM+X,OAAS,4BAA8B,KACpFzgB,EAAAC,EAAAC,cAAA,OAAKE,UAAU,0BAA0BI,QAASlB,KAAKqhB,UACrD3gB,EAAAC,EAAAC,cAAA,QAAME,UAAU,gCAAgCd,KAAKK,MAAMihB,OAC3D5gB,EAAAC,EAAAC,cAAA,QAAME,UAAU,iCAAhB,MAIFJ,EAAAC,EAAAC,cAACqe,GAAA,EAAD,CAAQC,QAAM,EAACC,KAAM,CAAE9Y,OAAQrG,KAAKoJ,MAAM+X,OAAS,OAAS,GAAKlgB,GAAI,CAAEoF,OAAQrG,KAAKoJ,MAAM+X,OAAS,OAAS,IACzG,SAAA9gB,GAAK,OACJK,EAAAC,EAAAC,cAACqe,GAAA,EAASK,IAAV,CAAcxe,UAAU,4BAA4B8E,MAAOvF,GACzDK,EAAAC,EAAAC,cAAA,OAAKE,UAAU,mCACZ8I,EAAKvJ,MAAMkhB,qBA3BCjgB,icCiBdkgB,GAAA,CACb/f,EAAGggB,KACH/f,EAAGggB,KACH/f,EAAGggB,KACH/f,EAAGggB,KACHxf,EAAGyf,KACHC,EAAGC,KACHC,EAAGC,KACHC,EAAGC,KACHC,EAAGC,KACHC,GAAIC,KACJC,GAAIC,KACJC,GAAIC,KACJC,GAAIC,KACJC,GAAIC,KACJC,GAAIC,KACJC,GAAIC,KACJC,GAAIC,KACJC,GAAIC,KACJC,GAAIC,KACJC,GAAIC,KACJC,GAAIC,MC4GSC,eA5Ib,SAAAA,EAAYzjB,GAAO,IAAAN,EAAA,OAAA6D,OAAAgE,EAAA,EAAAhE,CAAA5D,KAAA8jB,IACjB/jB,EAAA6D,OAAAqF,EAAA,EAAArF,CAAA5D,KAAA4D,OAAAsF,EAAA,EAAAtF,CAAAkgB,GAAA3a,KAAAnJ,KAAMK,KAED0jB,YAAc,KAHFhkB,qFAMG4F,GACpB,OAAIA,EAAUxC,UAAYnD,KAAKK,MAAM8C,SAChCwC,EAAUrF,WAAaN,KAAKK,MAAMC,+CAI3B0jB,GACZ,OAAOA,EACJ9jB,IAAI,SAAA+jB,GAAG,OAAKvjB,EAAAC,EAAAC,cAAA,QAAMC,IAAKojB,EAAKnjB,UAAU,6BAA6BmjB,KACnErH,OAAO,SAACsH,EAAKC,GAAN,MAAc,CAACD,EAAK,KAAMC,sCAG7B,IAAAva,EAAA5J,KACP,IAAKA,KAAKK,MAAM8C,UAAYnD,KAAK+jB,YAAa,OAAO,KAErD,IAAM5gB,EAAUnD,KAAKK,MAAM8C,SAAWnD,KAAK+jB,YAChB,OAAvB/jB,KAAKK,MAAM8C,UACbnD,KAAK+jB,YAAc/jB,KAAKK,MAAM8C,SALzB,IAAAihB,EAsBHjhB,EAAQK,eAdV0C,EARKke,EAQLle,cACAme,EATKD,EASLC,qBACA9b,EAVK6b,EAUL7b,WACAhF,EAXK6gB,EAWL7gB,OACA+gB,EAZKF,EAYLE,gBACAC,EAbKH,EAaLG,MACAtJ,EAdKmJ,EAcLnJ,SACAlX,EAfKqgB,EAeLrgB,iBACAC,EAhBKogB,EAgBLpgB,iBACAwgB,EAjBKJ,EAiBLI,YACAvU,EAlBKmU,EAkBLnU,aACA/L,EAnBKkgB,EAmBLlgB,UACAugB,EApBKL,EAoBLK,KACAC,EArBKN,EAqBLM,QAGI/gB,EAAWC,OAAAC,EAAA,EAAAD,CAAI,IAAIE,IAAJF,OAAAC,EAAA,EAAAD,CAAYG,GAAZhD,OAAA6C,OAAAC,EAAA,EAAAD,CAAiCI,MAAoBiL,OAEpE0V,EAAQ,CACZnU,IAAK,CAAEiU,KAAI,gBAAA1jB,OAAkBwH,GAAcnI,MAAO,QAClD4I,OAAQ,CAAEyb,KAAI,mBAAA1jB,OAAqBwH,GAAcnI,MAAO,WACxDyU,SAAU,CAAE4P,KAAI,qBAAA1jB,OAAuBwH,GAAcnI,MAAO,cAGxDwkB,EAAWhhB,OAAO0I,KAAKqY,GAAOzkB,IAAI,SAAA2kB,GACtC,IAAM1kB,EAAOwkB,EAAME,GACbzkB,EAAQwJ,EAAKvJ,MAAMC,SAASC,SAASC,SAASL,EAAKC,OACzD,OACEM,EAAAC,EAAAC,cAACI,EAAA,EAAD,CACEH,IAAKgkB,EACL5jB,GAAId,EAAKskB,KACT3jB,UAAS,uBAAAC,OAAyBX,EAAQ,8BAAgC,KACzEykB,KAKP,OACEnkB,EAAAC,EAAAC,cAAA,OAAKE,UAAU,YACbJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,mBAAmB8E,MAAO,CAAEkf,gBAAe,OAAA/jB,OAASygB,GAAcjZ,GAAvB,QAC1D7H,EAAAC,EAAAC,cAAA,OAAKE,UAAU,qBACbJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,4BACbJ,EAAAC,EAAAC,cAAA,MAAIE,UAAU,mBAAmBoF,GACjCxF,EAAAC,EAAAC,cAAA,MAAIE,UAAU,sBAAsBoD,EAAU0J,KAAK,QAErDlN,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAACmkB,GAAD,CAAgBzD,MAAM,uBAAuBF,YAAY,GACvD1gB,EAAAC,EAAAC,cAAA,UACEF,EAAAC,EAAAC,cAAA,4BACAF,EAAAC,EAAAC,cAAA,UACEF,EAAAC,EAAAC,cAAC8d,GAAD,CAAiB9Z,KAAMqL,EAAcoO,MAAOja,EAAkB6L,MAGhEvP,EAAAC,EAAAC,cAAA,iCACAF,EAAAC,EAAAC,cAAA,UAAKyjB,GAEL3jB,EAAAC,EAAAC,cAAA,2BACAF,EAAAC,EAAAC,cAAA,UAAK0jB,GAEL5jB,EAAAC,EAAAC,cAAA,iCACAF,EAAAC,EAAAC,cAAA,aAAAG,OAAQsC,YAAO,IAAPA,CAAYE,EAAOyhB,YAAYthB,QAAQ,KAAM,KAArD,QAEAhD,EAAAC,EAAAC,cAAA,4BACAF,EAAAC,EAAAC,cAAA,aAAAG,OAAQsC,YAAO,IAAPA,CAAYE,EAAOE,QAAQC,QAAQ,KAAM,KAAjD,QAEAhD,EAAAC,EAAAC,cAAA,wBACAF,EAAAC,EAAAC,cAAA,aAAAG,OAAQwjB,EAAMU,MAAd,OAAAlkB,OAAyBwjB,EAAMW,MAE/BxkB,EAAAC,EAAAC,cAAA,yBACAF,EAAAC,EAAAC,cAAA,UAAIF,EAAAC,EAAAC,cAAA,KAAGQ,KAAMqjB,GAAOA,IAEnBC,GACChkB,EAAAC,EAAAC,cAACod,EAAA,SAAD,KACEtd,EAAAC,EAAAC,cAAA,qBACAF,EAAAC,EAAAC,cAAA,UAAIF,EAAAC,EAAAC,cAAA,KAAGQ,KAAMsjB,GAAUA,OAM/BhkB,EAAAC,EAAAC,cAACmkB,GAAD,CAAgBzD,MAAM,aACpB5gB,EAAAC,EAAAC,cAAA,SACGZ,KAAKmlB,cAAclK,KAIxBva,EAAAC,EAAAC,cAACmkB,GAAD,CAAgBzD,MAAM,YACpB5gB,EAAAC,EAAAC,cAAA,SACGZ,KAAKmlB,cAAcxhB,KAIxBjD,EAAAC,EAAAC,cAACmkB,GAAD,CAAgBzD,MAAM,eACpB5gB,EAAAC,EAAAC,cAAA,SACC4jB,EAAYzf,MAAM,MAAM7E,IAAI,SAACwZ,EAAM7Y,GAClC,OAAOH,EAAAC,EAAAC,cAACod,EAAA,SAAD,CAAUnd,IAAKA,GAAM6Y,EAAKhZ,EAAAC,EAAAC,cAAA,iBAMvCF,EAAAC,EAAAC,cAAA,OAAKE,UAAU,mBACZ8jB,YAjIStjB,aCHhB8jB,yMACkBzf,EAAW0X,GAC/B,OAAI1X,EAAUsB,OAASjH,KAAKK,MAAM4G,MAC7BtB,EAAUwC,KAAOnI,KAAKK,MAAM8H,IAC5BxC,EAAUrF,WAAaN,KAAKK,MAAMC,0CAIhC,IAAAP,EAAAC,KACDqlB,EAAiBrlB,KAAKK,MAAM4G,KAAKA,KACpC2V,OAAO,SAACsH,EAAKC,GAAN,OAAAvgB,OAAAiL,EAAA,EAAAjL,CAAA,GAAoBsgB,EAApBtgB,OAAAua,GAAA,EAAAva,CAAA,GAA0BugB,EAAI3gB,eAAe+E,WAAa7H,EAAAC,EAAAC,cAAC0kB,GAAD,CAASniB,QAASghB,EAAK7jB,SAAUP,EAAKM,MAAMC,cAAiB,IAEjI,OACEI,EAAAC,EAAAC,cAACqe,GAAA,EAAD,CACEC,QAAM,EACNV,MAAOxe,KAAKK,MAAM8H,GAClBgX,KAAM,CAAEC,QAAS,EAAG9Y,UAAW,mBAC/B0J,MAAO,CAAEoP,QAAS,EAAG9Y,UAAW,iBAChC+Y,MAAO,CAAED,QAAS,EAAG9Y,UAAW,oBAC/B,SAAA6B,GAAE,OACO,IAARA,GACG,SAAA9H,GAAK,OACJK,EAAAC,EAAAC,cAACqe,GAAA,EAASK,IAAV,CAAcxe,UAAU,qBAAqB8E,MAAKhC,OAAAiL,EAAA,EAAAjL,CAAA,GAAOvD,IACtDglB,EAAeld,cAvBF7G,cAoCfC,eAAW6jB,ICuCXG,8BAlEb,SAAAA,EAAYllB,GAAO,IAAAN,EAAA,OAAA6D,OAAAgE,EAAA,EAAAhE,CAAA5D,KAAAulB,IACjBxlB,EAAA6D,OAAAqF,EAAA,EAAArF,CAAA5D,KAAA4D,OAAAsF,EAAA,EAAAtF,CAAA2hB,GAAApc,KAAAnJ,KAAMK,KAED+I,MAAQ,CACXhB,aAAc+N,GACdyJ,UAAW,KACXe,OAAO,GAGT5gB,EAAKwd,mBAAqBxd,EAAKwd,mBAAmB7T,KAAxB9F,OAAA+F,EAAA,EAAA/F,QAAA+F,EAAA,EAAA/F,CAAA7D,KAC1BA,EAAKgP,gBAAkBhP,EAAKgP,gBAAgBrF,KAArB9F,OAAA+F,EAAA,EAAA/F,QAAA+F,EAAA,EAAA/F,CAAA7D,KACvBA,EAAKoB,YAAcpB,EAAKoB,YAAYuI,KAAjB9F,OAAA+F,EAAA,EAAA/F,QAAA+F,EAAA,EAAA/F,CAAA7D,KAXFA,kFAcAylB,GACjBxlB,KAAKqL,SAAS,CACZjD,aAAcod,4CAIFA,GACdxlB,KAAKqL,SAAS,CACZuU,UAAW4F,0CAKbxlB,KAAKqL,SAAS,SAAAjC,GAAK,MAAK,CACtBuX,OAAQvX,EAAMuX,0CAIT,IAAA/W,EAAA5J,KACP,OACEU,EAAAC,EAAAC,cAAC6kB,EAAA,EAAD,CAAQC,SAAUC,IAChBjlB,EAAAC,EAAAC,cAAA,OAAKE,UAAU,OACbJ,EAAAC,EAAAC,cAACglB,EAAD,CAAQzkB,YAAanB,KAAKmB,cAC1BT,EAAAC,EAAAC,cAAA,OAAKE,UAAU,gBACbJ,EAAAC,EAAAC,cAACilB,GAAD,CAAO1kB,YAAanB,KAAKmB,YAAawf,MAAO3gB,KAAKoJ,MAAMuX,QACxDjgB,EAAAC,EAAAC,cAACklB,GAAD,CAAS7e,KAAMkP,GAAUoH,mBAAoBvd,KAAKud,mBAAoBqC,UAAW5f,KAAKoJ,MAAMwW,YAC5Flf,EAAAC,EAAAC,cAACmlB,EAAA,EAAD,KACErlB,EAAAC,EAAAC,cAAColB,EAAA,EAAD,CAAOhe,KAAK,IAAIC,OAAK,EAACge,OAAQ,SAAA5lB,GAAK,OACjCK,EAAAC,EAAAC,cAACslB,EAAA,EAAD,CAAUjlB,GAAG,eAEfP,EAAAC,EAAAC,cAAColB,EAAA,EAAD,CAAOhe,KAAK,OAAOie,OAAQ,SAAA5lB,GAAK,OAC9BK,EAAAC,EAAAC,cAACulB,GAAD,CAAKlf,KAAMkP,GAAU/N,aAAcwB,EAAKR,MAAMhB,aAAc2G,gBAAiBnF,EAAKmF,qBAEpFrO,EAAAC,EAAAC,cAAColB,EAAA,EAAD,CAAOhe,KAAK,UAAUie,OAAQ,SAAA5lB,GAAK,OACjCK,EAAAC,EAAAC,cAACwlB,EAAD,CAAQnf,KAAMkP,GAAU/N,aAAcwB,EAAKR,MAAMhB,aAAc2G,gBAAiBnF,EAAKmF,qBAEvFrO,EAAAC,EAAAC,cAAColB,EAAA,EAAD,CAAOhe,KAAK,YAAYie,OAAQ,SAAA5lB,GAAK,OACnCK,EAAAC,EAAAC,cAACylB,GAAD,CAAUtX,gBAAiBnF,EAAKmF,sBAGpCrO,EAAAC,EAAAC,cAAColB,EAAA,EAAD,CAAOC,OAAQ,SAAA5lB,GAAK,OAClBK,EAAAC,EAAAC,cAAC0lB,GAAD,CACErf,KAAMkP,GACNhO,GAAIqH,OAAOC,SAASpH,EAAahI,EAAMC,0BA1DrCgB,cCLEilB,QACW,cAA7B1b,OAAOvK,SAASkmB,UAEe,UAA7B3b,OAAOvK,SAASkmB,UAEhB3b,OAAOvK,SAASkmB,SAASpmB,MACvB,2DCNNqmB,IAASR,OAAOvlB,EAAAC,EAAAC,cAAC8lB,GAAD,MAASC,SAASC,eAAe,SD+G3C,kBAAmBC,WACrBA,UAAUC,cAAcC,MAAMC,KAAK,SAAAC,GACjCA,EAAaC,6ylrBE3HnBxnB,EAAAC,QAAA,i8UCAAD,EAAAC,QAAiBC,EAAAC,EAAuB,uDCAxCH,EAAAC,QAAiBC,EAAAC,EAAuB,gFCAxCH,EAAAC,QAAiBC,EAAAC,EAAuB,0ECAxCH,EAAAC,QAAiBC,EAAAC,EAAuB,uFCAxCH,EAAAC,QAAiBC,EAAAC,EAAuB,2ECAxCH,EAAAC,QAAiBC,EAAAC,EAAuB,iECAxCH,EAAAC,QAAiBC,EAAAC,EAAuB","file":"static/js/main.73b0e4d0.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/7-Klimatkampen-Uppsala.fba5b34a.jpg\";","module.exports = __webpack_public_path__ + \"static/media/8-Ladda-lagra-lanka.a75f29f3.png\";","module.exports = __webpack_public_path__ + \"static/media/9-MERiT.483be082.jpg\";","module.exports = __webpack_public_path__ + \"static/media/10-Mo-Bo.87f2f9fc.jpg\";","module.exports = __webpack_public_path__ + \"static/media/11-Matt-och-steg.80797cbb.jpg\";","module.exports = __webpack_public_path__ + \"static/media/12-SAMIR.d14d2eb6.jpg\";","module.exports = __webpack_public_path__ + \"static/media/13-Sensorer-for-luftmiljo.4362eb63.jpg\";","module.exports = __webpack_public_path__ + \"static/media/14-R-energi.05d591b6.JPG\";","module.exports = __webpack_public_path__ + \"static/media/15-Sharing-Cities-Sweden.0c3256df.jpg\";","module.exports = __webpack_public_path__ + \"static/media/16-Matbutik.1f0245a6.jpg\";","module.exports = __webpack_public_path__ + \"static/media/17-Smart-Village.c9934f37.png\";","module.exports = __webpack_public_path__ + \"static/media/18-Smaskalig-elforsorjning.83dc4dda.jpg\";","module.exports = __webpack_public_path__ + \"static/media/19-Urban-ICT-Arena.d10de260.jpg\";","module.exports = __webpack_public_path__ + \"static/media/20-Vardeskapande-med-oppna-data.c4bb7c0c.jpg\";","module.exports = __webpack_public_path__ + \"static/media/21-3De.05da2369.jpg\";","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Link } from \"react-router-dom\";\r\nimport { withRouter } from 'react-router';\r\nimport './Header.css';\r\n\r\nclass Header extends Component {\r\n  render() {\r\n    const views = ['Map', 'Matrix', 'Partners']\r\n    const viewLinks = views.map(view => {\r\n      const match = this.props.location.pathname.includes(view.toLowerCase());\r\n      return (\r\n        <li key={view}\r\n          className={`header-links__item ${match ? 'header-links__item--active' : ''}`}>\r\n          <Link className=\"header-links__item-link\" to={`/${view.toLowerCase()}`}>\r\n            {view}\r\n          </Link>\r\n        </li>\r\n      );\r\n    });\r\n\r\n    return (\r\n      <div className=\"header\">\r\n        <div className=\"header-content\">\r\n          <div className=\"header-content__left\">\r\n            <ul className=\"header-links\">\r\n              {viewLinks}\r\n            </ul>\r\n          </div>\r\n          <div className=\"header-content__right\">\r\n            <ul className=\"header-links\">\r\n              <li className=\"header-links__item\"><button className=\"header-links__item-link\" onClick={this.props.toggleAbout}>About</button></li>\r\n              <li className=\"header-links__item header-links__item--primary\"><a className=\"header-links__item-link\" href=\"https://goo.gl/forms/bX9jxwEtvLveayls2\" target=\"_blank\">Lämna Feedback</a></li>\r\n            </ul>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nHeader.propTypes = {\r\n  toggleAbout: PropTypes.func.isRequired\r\n};\r\n\r\nexport default withRouter(Header);\r\n","import { scaleOrdinal, rgb, packSiblings, packEnclose, select, range, format } from 'd3';\r\n\r\nexport const col2focus = {\r\n  1: 'focus_lifestyle',\r\n  2: 'focus_planning',\r\n  3: 'focus_mobility',\r\n  4: 'focus_infrastructure'\r\n};\r\n\r\nexport const theme2row = {\r\n  testbeds: 1,\r\n  innovation: 2,\r\n  financing: 3,\r\n  management: 4,\r\n  intelligence: 5\r\n};\r\n\r\nexport const row2theme = {\r\n  1: 'testbeds',\r\n  2: 'innovation',\r\n  3: 'financing',\r\n  4: 'management',\r\n  5: 'intelligence'\r\n};\r\n\r\nexport const focusLabel = {\r\n  1: 'Livsstil och  konsumtion',\r\n  2: 'Planering och  byggd miljö',\r\n  3: 'Mobilitet och  tillgänglighet',\r\n  4: 'Integrerad  infrastruktur'\r\n};\r\n\r\nexport const themeLabel = {\r\n  1: 'Testbäddar och  living labs',\r\n  2: 'Innovation och  entreprenörskap',\r\n  3: 'Finansierings- och  affärsmodeller',\r\n  4: 'Styrning',\r\n  5: 'Intelligens,  cybersäkerhet  och etik'\r\n};\r\n\r\nexport const type2class = {\r\n  'Forskningsprojekt': 'research',\r\n  'Innovationsprojekt': 'innovation',\r\n  'Förstudie': 'prestudy'\r\n}\r\n\r\nexport function circleRadius(area) {\r\n  return Math.sqrt(area / Math.PI);\r\n}\r\n\r\nexport const circleSizes = {\r\n  ticks: {\r\n    value: project => 1,\r\n    label: label => `${format('d')(label)} tick`,\r\n    display: 'Tick',\r\n    key: 'ticks'\r\n  },\r\n  budget: {\r\n    value: project => project.survey_answers.budget.funded,\r\n    label: label => `${format(',')(label).replace(/,/g, ' ')} kr`,\r\n    display: 'Budget',\r\n    key: 'budget'\r\n  },\r\n  partners: {\r\n    value: project => [...new Set([...project.survey_answers.other_financiers, ...project.survey_answers.other_recipients])].length,\r\n    label: label => `${format('d')(label)} partners`,\r\n    display: 'Partners',\r\n    key: 'partners'\r\n  },\r\n  locations: {\r\n    value: project => project.survey_answers.locations.length,\r\n    label: label => `${format('d')(label)} platser`,\r\n    display: 'Platser',\r\n    key: 'locations'\r\n  }\r\n}\r\n\r\nexport const projectTypes = ['Forskningsprojekt', 'Innovationsprojekt', 'Förstudie'];\r\nexport const projectTypeColors = scaleOrdinal()\r\n  .range([rgb(0, 125, 145), rgb(151, 194, 142), rgb(234, 154, 0)]) // pms 3145, pms 2255, pms 2011\r\n  .domain(projectTypes);\r\n\r\nexport function packData(data, scaleX, scaleY, circleSize) {\r\n  // first, group together circles that are\r\n  // at the same position in the matrix\r\n  const obj = {};\r\n  for (let row = 1; row <= 5; ++row) {\r\n    obj[row] = {};\r\n    for (let col = 1; col <= 4; ++col) {\r\n      obj[row][col] = [];\r\n    }\r\n  }\r\n  data.data.forEach(project => {\r\n    const pins = []; // so that a circle can find its buddies\r\n    for (let col = 1; col <= 4; ++col) {\r\n      project.survey_answers[col2focus[col]].forEach(theme => {\r\n        pins.push({\r\n          row: theme2row[theme],\r\n          col\r\n        });\r\n        obj[theme2row[theme]][col].push({\r\n          row: theme2row[theme],\r\n          col,\r\n          pins,\r\n          survey_answers: project.survey_answers,\r\n          r: circleRadius(circleSize.value(project))\r\n        })\r\n      });\r\n    }\r\n  });\r\n\r\n  // first pass: pack circles and find the \"optimal scale\"\r\n  // and redo the circle radii to use that scale\r\n  let maxEnclose = 0;\r\n  for (let row = 1; row <= 5; ++row) {\r\n    for (let col = 1; col <= 4; ++col) {\r\n      if (!obj[row][col].length) continue; // if empty continue\r\n      packSiblings(obj[row][col]);\r\n      maxEnclose = Math.max(maxEnclose, packEnclose(obj[row][col]).r);\r\n    }\r\n  }\r\n  const optimalEncloseRadius = Math.min(scaleX.step() / 2, scaleY.step() / 2); // * 0.95?\r\n  const rScale = optimalEncloseRadius / maxEnclose;\r\n  for (let row = 1; row <= 5; ++row) {\r\n    for (let col = 1; col <= 4; ++col) {\r\n      obj[row][col].forEach(pin => {\r\n        pin.r = circleRadius(circleSize.value(pin)) * rScale;\r\n      });\r\n    }\r\n  }\r\n\r\n  // second pass: pack again, fix positions\r\n  // and return as a flat list\r\n  const arr = [];\r\n  for (let row = 1; row <= 5; ++row) {\r\n    for (let col = 1; col <= 4; ++col) {\r\n      packSiblings(obj[row][col]).forEach(pin => {\r\n        arr.push({\r\n          ...pin,\r\n          x: pin.x + scaleX(col),\r\n          y: pin.y + scaleY(row),\r\n          rScale\r\n        })\r\n      });\r\n    }\r\n  }\r\n  return arr;\r\n}\r\n\r\nexport function buildScaleData(packedData, circleSize) {\r\n  if (!packedData.length) return null;\r\n\r\n  const sortedPackedData = [...packedData].sort((a, b) => circleSize.value(a) - circleSize.value(b));\r\n  const minSize = circleSize.value(sortedPackedData[0]);\r\n  const maxSize = circleSize.value(sortedPackedData[sortedPackedData.length - 1]);\r\n  const rScale = packedData[0].rScale;\r\n\r\n  let labelNumbers = [];\r\n  const circleRadii = [];\r\n\r\n  const significantFigures = Number.parseInt(maxSize) > 1000000 ? 1 : 2;\r\n\r\n  labelNumbers[0] = Number.parseInt(maxSize).toPrecision(significantFigures);\r\n  labelNumbers[1] = Number.parseInt(maxSize / 2).toPrecision(significantFigures);\r\n  labelNumbers[2] = Number.parseInt(maxSize / 10).toPrecision(significantFigures);\r\n  labelNumbers = labelNumbers.map(number => Number.parseInt(number) === 0 ? 1 : number);\r\n\r\n  circleRadii[0] = circleRadius(labelNumbers[0]) * rScale;\r\n  circleRadii[1] = circleRadius(labelNumbers[1]) * rScale;\r\n  circleRadii[2] = circleRadius(labelNumbers[2]) * rScale;\r\n\r\n  if (Number.parseInt(maxSize).toPrecision(significantFigures) === Number.parseInt(minSize).toPrecision(significantFigures))\r\n    return [{\r\n      r: circleRadii[0],\r\n      label: circleSize.label(labelNumbers[0])\r\n    }];\r\n\r\n  return range(3).map(i => ({\r\n    r: circleRadii[i],\r\n    label: circleSize.label(labelNumbers[i])\r\n  }));\r\n}\r\n\r\n// inspired by https://bl.ocks.org/mbostock/7555321\r\n// replaces double spaces in the labels with fake \"newlines\"\r\n// (tspan elements) and fixes their positions\r\nexport function parseNewlinesY(texts) {\r\n  texts.each(function() {\r\n    const text = select(this);\r\n    const words = text.text().split(/ {2}/);\r\n    const x = text.attr('x');\r\n    const dy = parseFloat(text.attr('dy'));\r\n    text.text(null);\r\n    const lineHeight = 1.3; // em\r\n    let i = 0;\r\n    words.forEach(word => {\r\n      text.append('tspan')\r\n          .text(word)\r\n          .attr('x', x)\r\n          .attr('y', `-${(words.length - 1) * lineHeight / 2}em`)\r\n          .attr('dy', `${dy + (i++ * lineHeight)}em`);\r\n    });\r\n  });\r\n}\r\nexport function parseNewlinesX(texts) {\r\n  texts.each(function() {\r\n    const text = select(this).attr('text-anchor', 'start');\r\n    const words = text.text().split(/ {2}/);\r\n    const y = text.attr('y');\r\n    const dy = parseFloat(text.attr('dy'));\r\n    text.text(null);\r\n    const lineHeight = 1.3; // em\r\n    let i = 0;\r\n    words.forEach(word => {\r\n      text.append('tspan')\r\n          .text(word)\r\n          .attr('x', 0)\r\n          .attr('dy', `${dy + (i++ * lineHeight)}em`);\r\n    });\r\n    text.attr('transform', `translate(0,${y})rotate(-45)translate(0,${-y})`);\r\n  });\r\n}","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport './MatrixTooltip.css';\r\n\r\nconst topOffset = 10;\r\n\r\nclass MatrixTooltip extends Component {\r\n  shouldComponentUpdate(nextProps) {\r\n    if (nextProps.project !== this.props.project) return true;\r\n    return false;\r\n  }\r\n\r\n  render() {\r\n    if (!this.props.project) return null;\r\n\r\n    return (\r\n      <div\r\n        className=\"matrix-tooltip\"\r\n        style={{\r\n          top: this.props.project.y + this.props.margin.top - this.props.project.r - topOffset + this.props.offset.y,\r\n          left: this.props.project.x + this.props.margin.left + this.props.offset.x\r\n        }}>\r\n        {this.props.project.survey_answers.project_title}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nMatrixTooltip.propTypes = {\r\n  project: PropTypes.object,\r\n  margin: PropTypes.shape({\r\n    top: PropTypes.number,\r\n    right: PropTypes.number,\r\n    bottom: PropTypes.number,\r\n    left: PropTypes.number\r\n  }).isRequired,\r\n  offset: PropTypes.shape({\r\n    x: PropTypes.number,\r\n    y: PropTypes.number\r\n  }).isRequired\r\n};\r\n\r\nexport default MatrixTooltip;\r\n","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { DropdownList } from 'react-widgets'\r\nimport { circleSizes } from './MatrixUtility';\r\nimport './MatrixCircleMenu.css';\r\n\r\nclass MatrixCircleMenu extends Component {\r\n  /**\r\n   * ALT POLYGONS FOR ARROWS:\r\n   *  <polygon points={`${offset} ${r}, ${t + offset} ${r + t}, ${t + offset} ${r - t}`} />\r\n   *  <polygon points={`${r * 2 - offset} ${r}, ${r * 2 - t - offset} ${r + t}, ${r * 2 - t - offset} ${r - t}`} />\r\n   */\r\n\r\n  render() {\r\n    const r = 12;\r\n    const t = 3;\r\n    const offset = 2;\r\n\r\n    return (\r\n      <div className=\"matrix-circle-menu\">\r\n        <div className=\"matrix-circle-menu__svg-wrapper\" style={{ width: r * 2 + 2, height: r * 2 + 2 }}>\r\n          <svg width=\"100%\" height=\"100%\">\r\n            <g transform=\"translate(1, 1)\">\r\n              <circle cx={r} cy={r} r={r} />\r\n              <g transform={`translate(${r}, ${r})rotate(45)translate(${-r}, ${-r})`}>\r\n                <line x1={offset} x2={r * 2 - offset} y1={r} y2={r} />\r\n                <path d={`M ${t + offset} ${r + t} L ${offset} ${r} L ${t + offset} ${r - t}`} />\r\n                <path d={`M ${r * 2 - t - offset} ${r + t} L ${r * 2 - offset} ${r} L ${r * 2 - t - offset} ${r - t}`} />\r\n              </g>\r\n            </g>\r\n          </svg>\r\n        </div>\r\n        <div className=\"matrix-circle-menu__dropdown-wrapper\">\r\n          <DropdownList\r\n            filter={false}\r\n            data={Object.values(circleSizes)}\r\n            valueField='key'\r\n            textField='display'\r\n            value={this.props.circleSize}\r\n            onChange={this.props.updateCircleSize} />\r\n        </div>\r\n      </div>\r\n    );\r\n  }  \r\n}\r\n\r\nMatrixCircleMenu.propTypes = {\r\n  circleSize: PropTypes.object.isRequired,\r\n  updateCircleSize: PropTypes.func.isRequired\r\n}\r\n\r\nexport default MatrixCircleMenu;\r\n","import { matchPath } from 'react-router';\r\n\r\n// NOTE: For all methods that take props as an argument, it assumed that props is an object which contains\r\n// the history property and the filteredData property. If the history property is missing, make sure to \r\n// use the 'withRouter' higher-order-component on whatever component ProjectNavigator is used from.\r\nclass ProjectNavigator {\r\n  constructor(rootPath = '') {\r\n    this.rootPath = rootPath;\r\n    this._hasChangedSinceInit = false;\r\n  }\r\n\r\n  static GetProjectId(location) {\r\n    const match = matchPath(location.pathname, { path: `*/project/:id` });\r\n    if (match !== null)\r\n      return match.params.id;\r\n    return -1;\r\n  }\r\n\r\n  hasChangedSinceInit() {\r\n    return this._hasChangedSinceInit;\r\n  }\r\n\r\n  change() {\r\n    this._hasChangedSinceInit = true;\r\n  }\r\n\r\n  redirectToRoot(history) {\r\n    history.replace(this.rootPath);\r\n  }\r\n\r\n  goToRoot(history, location) {\r\n    if (matchPath(location.pathname, { path: this.rootPath, exact: true }) === null) {\r\n      this._hasChangedSinceInit = true;\r\n      history.push(this.rootPath);\r\n    }\r\n  }\r\n\r\n  goToProject(history, location, id) {\r\n    const path = `${this.rootPath}/project/${id}`;\r\n    if (matchPath(location.pathname, { path }) === null) {\r\n      this._hasChangedSinceInit = true;\r\n      history.push(path);\r\n    }\r\n  }\r\n\r\n  projectExists(location, filteredData) {\r\n    const id = ProjectNavigator.GetProjectId(location);\r\n    if (filteredData.data.find(d => d.survey_answers.project_id === id))\r\n      return true;\r\n    return false;\r\n  }\r\n\r\n  projectHasChanged(location, prevLocation) {\r\n    return ProjectNavigator.GetProjectId(location) !== ProjectNavigator.GetProjectId(prevLocation);\r\n  }\r\n}\r\n\r\nexport const GetProjectId = ProjectNavigator.GetProjectId;\r\nexport default ProjectNavigator;\r\n","import React, { Component } from 'react';\r\nimport { select, axisLeft, axisTop, event, scalePoint, easePolyOut } from 'd3';\r\nimport { themeLabel, focusLabel, packData, buildScaleData, parseNewlinesY, parseNewlinesX, type2class, circleSizes } from './MatrixUtility';\r\nimport { withRouter } from 'react-router-dom';\r\nimport MatrixTooltip from './MatrixTooltip';\r\nimport MatrixCircleMenu from './MatrixCircleMenu';\r\nimport PropTypes from 'prop-types';\r\nimport isEqual from 'react-fast-compare';\r\nimport debounce from 'lodash.debounce';\r\nimport ProjectNavigator from '../ProjectNavigator';\r\nimport './Matrix.css';\r\n\r\nconst masterTransition = (transition) => transition.duration(800).ease(easePolyOut.exponent(4));\r\n\r\nclass Matrix extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      hoveredProject: null,\r\n      circleSize: circleSizes.ticks\r\n    };\r\n\r\n    this.margin = { top: 130, right: 20, bottom: 20, left: 160 };\r\n    this.offset = { x: 0,  y: 0 };\r\n    this.projectNavigator = new ProjectNavigator('/matrix');\r\n    this.draw = this.draw.bind(this);\r\n    this.updateCircleSize = this.updateCircleSize.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.svg = select(this.svgRef);\r\n\r\n    // used for transforming the contents of the svg, if necessary\r\n    this.svgInner = this.svg\r\n      .append('g')\r\n        .classed('matrix-svg-inner', true);\r\n\r\n    // used for moving around the circle menu\r\n    this.circleSizeWrapper = select(this.circleSizeWrapperRef)\r\n      .style('transform', 'translate(0, 0)');\r\n\r\n    this.scaleX = scalePoint()\r\n        .domain([1,2,3,4])\r\n        .padding(0.5)\r\n    this.scaleY = scalePoint()\r\n        .domain([1,2,3,4,5])\r\n        .padding(0.5)\r\n\r\n    // y-axis\r\n    this.svgInner.append('g')\r\n        .classed('matrix-y-axis', true);\r\n\r\n    // themes label\r\n    this.svgInner.append('text')\r\n        .classed('themes-label', true)\r\n        .classed('matrix-axis-label', true)\r\n        .text('Teman');\r\n\r\n    // x-axis\r\n    this.svgInner.append('g')\r\n        .classed('matrix-x-axis', true);\r\n\r\n    // focus areas label\r\n    this.svgInner.append('text')\r\n        .classed('focus-areas-label', true)\r\n        .classed('matrix-axis-label', true)\r\n        .text('Fokusområden');\r\n\r\n    // make some circles\r\n    this.circles = this.svgInner.append('g').classed('circles', true);\r\n    this.draw(true);\r\n\r\n    // clear clickedProject when clicking outside of any circle\r\n    this.svg.on('click', () => {\r\n      if (event.target.tagName !== 'circle') {\r\n        this.projectNavigator.goToRoot(this.props.history, this.props.location);\r\n      }\r\n    });\r\n\r\n    this.debounce = debounce(() => this.draw(), 100);\r\n    window.addEventListener('resize', this.debounce);\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    this.updateHovered(this.state.hoveredProject, prevState.hoveredProject);\r\n    this.updateClicked(this.props, prevProps);\r\n\r\n    if (!isEqual(this.props.filteredData, prevProps.filteredData) ||\r\n      this.state.circleSize !== prevState.circleSize) {\r\n      this.updateData(this.props.filteredData);\r\n      this.setState({\r\n        hoveredProject: null\r\n      });\r\n      this.projectNavigator.goToRoot(this.props.history, this.props.location);\r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    window.removeEventListener('resize', this.debounce);\r\n    this.svg.on('click', null);\r\n  }\r\n\r\n  draw(init = false) {\r\n    let height = +this.svgWrapperRef.clientHeight - this.margin.top - this.margin.bottom;\r\n    let width = +this.svgWrapperRef.clientWidth - this.margin.left - this.margin.right;\r\n\r\n    // 300 px is the size of the infobox that appears when a project is clicked!\r\n    if (this.projectNavigator.projectExists(this.props.location, this.props.filteredData)) width -= 300;\r\n    \r\n    const stretch = false;\r\n    if (!stretch) {\r\n      const aspectRatio = 5 / 5; // 4 / 5 is \"optimal\"\r\n      const optimalHeight = width * 1 / aspectRatio;\r\n      const optimalWidth = height * aspectRatio;\r\n\r\n      if ((optimalHeight + this.margin.top + this.margin.bottom) <= this.svgWrapperRef.clientHeight) {\r\n        this.offset = { x: 0, y: (height - optimalHeight) / 2 };\r\n        height = optimalHeight;\r\n      } else {\r\n        this.offset = { x: (width - optimalWidth) / 2, y: 0 };\r\n        width = optimalWidth;\r\n      }\r\n    }\r\n\r\n    // this is useful further down, if the width/height didn't change, we don't need to call updateData!\r\n    const oldWidth = this.scaleX.range()[1];\r\n    const oldHeight = this.scaleY.range()[1];\r\n    const dimensionsChanged = oldWidth !== width || oldHeight !== height;\r\n\r\n    // update scales\r\n    this.scaleX.range([0, width]);\r\n    this.scaleY.range([0, height]);\r\n\r\n    // set up selectors\r\n    const selectors = {\r\n      svgInner: this.svgInner,\r\n      circleSizeWrapper: this.circleSizeWrapper,\r\n      yAxis: this.svgInner.select('g.matrix-y-axis'),\r\n      themesLabel: this.svgInner.select('text.themes-label'),\r\n      xAxis: this.svgInner.select('g.matrix-x-axis'),\r\n      focusAreasLabel: this.svgInner.select('text.focus-areas-label')\r\n    }\r\n    if (!init)\r\n      Object.keys(selectors).forEach(s => selectors[s] = selectors[s].transition().call(masterTransition));\r\n\r\n    selectors.svgInner\r\n        .attr('transform', `translate(${this.offset.x}, ${this.offset.y})`);\r\n\r\n    selectors.circleSizeWrapper\r\n        //.style('top', `${this.offset.y + this.margin.top - 40}px`)\r\n        //.style('left', `${this.offset.x + this.margin.left - 110}px`);\r\n        .style('transform', `translate(${this.offset.x + this.margin.left - 120}px, ${this.offset.y + this.margin.top - 40}px)`);\r\n\r\n    // themes label\r\n    selectors.themesLabel\r\n        .attr('transform', `translate(25, ${this.margin.top + height / 2})rotate(-90)`);\r\n\r\n    // focus areas label\r\n    selectors.focusAreasLabel\r\n        .attr('transform', `translate(${this.margin.left + width / 2}, 35)`);\r\n\r\n    /**\r\n     * NOTE: The default text elements (labels) on the axes are hidden and replaced to\r\n     * allow for two things: (1) splitting up the labels into multiple lines and (2)\r\n     * having transitions. The default labels can support (1) and (2) separately but not \r\n     * at the same time! So that's why there's some extra code here\r\n     *\r\n     * We don't want remove the original text element and .domain,\r\n     * if we remove the text element, d3-axis will start fucking with our label\r\n     * (changin text contents, position etc)\r\n     * if we remove .domain, d3-axis will just add it again next draw call.\r\n     */\r\n\r\n    // (equivalent to axis.tickPadding [but hardcoded])\r\n    const tickPadding = 20;\r\n\r\n    // y-axis\r\n    selectors.yAxis\r\n        .attr('transform', `translate(${width + this.margin.left}, ${this.margin.top})`)\r\n        .call(axisLeft(this.scaleY).tickSize(width))\r\n    const yAxisSelection = selectors.yAxis.selection ? selectors.yAxis.selection() : selectors.yAxis;\r\n    if (yAxisSelection.selectAll('.tick text.label').empty()) {\r\n      yAxisSelection\r\n          .call(e => e.selectAll('.tick text').attr('display', 'none'))\r\n          .call(e => e.select('.domain').attr('display', 'none'))\r\n        .selectAll('.tick')\r\n        .append('text')\r\n          .classed('label', true)\r\n          .text(i => themeLabel[i])\r\n          .attr('fill', 'currentColor')\r\n          .attr('x', -width - tickPadding)\r\n          .attr('dy', '0.32em') // see d3-axis source code\r\n          .call(parseNewlinesY);\r\n    } else {\r\n      const x = -width - tickPadding;\r\n      selectors.yAxis.selectAll('.tick text.label')\r\n          .attr('x', x)\r\n        .selectAll('tspan')\r\n          .attr('x', x);\r\n    }\r\n\r\n    // x-axis\r\n    selectors.xAxis\r\n        .attr('transform', `translate(${this.margin.left}, ${height + this.margin.top})`)\r\n        .call(axisTop(this.scaleX).tickSize(height))\r\n    const xAxisSelection = selectors.xAxis.selection ? selectors.xAxis.selection() : selectors.xAxis;\r\n    if (xAxisSelection.selectAll('.tick text.label').empty()) {\r\n      xAxisSelection\r\n          .call(e => e.selectAll('.tick text').attr('display', 'none'))\r\n          .call(e => e.select('.domain').attr('display', 'none'))\r\n        .selectAll('.tick')\r\n        .append('text')\r\n          .classed('label', true)\r\n          .text(i => focusLabel[i])\r\n          .attr('fill', 'currentColor')\r\n          .attr('y', -height - tickPadding)\r\n          .attr('dy', '0em') // see d3-axis source code\r\n          .call(parseNewlinesX);\r\n    } else {\r\n      const y = -height - tickPadding;\r\n      selectors.xAxis.selectAll('.tick text.label')\r\n          .attr('y', y)\r\n          .attr('transform', `translate(0,${y})rotate(-45)translate(0,${-y})`);\r\n    }\r\n\r\n    if (dimensionsChanged)\r\n      this.updateData(this.props.filteredData);\r\n  }\r\n\r\n  updateHovered(project, prevProject) {\r\n    if (project === prevProject)\r\n      return;\r\n\r\n    if (prevProject !== null)\r\n      this.circles.selectAll('.hover')\r\n          .classed('hover', false);\r\n\r\n    if (project !== null)\r\n      this.circles.selectAll(`[data-id='${project.survey_answers.project_id}']`)\r\n          .classed('hover', true);\r\n  }\r\n\r\n  updateClicked(props, prevProps) {\r\n    let projectId = ProjectNavigator.GetProjectId(props.location);\r\n    let prevProjectId = ProjectNavigator.GetProjectId(prevProps.location);\r\n\r\n    // if we just started, (i.e. navigated to the site via a permalink with a project id)\r\n    // the projectId and prevProjectId will be identical because of how prevProps.location works\r\n    // so change it to -1.\r\n    if (!this.projectNavigator.hasChangedSinceInit()) {\r\n      prevProjectId = -1;\r\n      this.projectNavigator.change();\r\n    }\r\n\r\n    if (projectId === prevProjectId) return;\r\n\r\n    // necessary only if clicking a project changes svgWrapper size (i.e. infobox takes up more or less space than before)\r\n    if ((projectId === -1 && prevProjectId !== -1) || (projectId !== -1 && prevProjectId === -1))\r\n      this.draw();\r\n\r\n    // clean up from prev\r\n    if (prevProjectId !== -1 && this.svg.classed('clicked')) {\r\n      this.svg.classed('clicked', false);\r\n      this.circles.selectAll('.neighbor')\r\n          .classed('neighbor', false);\r\n      this.circles.selectAll('.clicked')\r\n          .classed('clicked', false);\r\n    }\r\n\r\n    // if no project in path, we done\r\n    if (projectId === -1) return;\r\n\r\n    // if the project from the url doesn't exist in filteredData, redirect to root\r\n    if (!this.projectNavigator.projectExists(props.location, props.filteredData)) {\r\n      this.projectNavigator.redirectToRoot(props.history);\r\n      return;\r\n    }\r\n\r\n    // make a mess with current\r\n    const datum = this.circles.select(`[data-id='${projectId}']`).datum();\r\n    const neighborSelector = datum.pins\r\n      .map(pin => `[data-row='${pin.row}'][data-col='${pin.col}']`)\r\n      .join(', ');\r\n    this.svg.classed('clicked', true);\r\n    this.circles.selectAll(neighborSelector)\r\n        .classed('neighbor', true);\r\n    this.circles.selectAll(`[data-id='${datum.survey_answers.project_id}']`)\r\n        .classed('clicked', true);\r\n  }\r\n\r\n  updateData(data) {\r\n    const packedData = packData(data, this.scaleX, this.scaleY, this.state.circleSize);\r\n    this.props.updateScaleData(buildScaleData(packedData, this.state.circleSize));\r\n    const circle = this.circles\r\n      .selectAll('circle')\r\n      .data(packedData, d => `${d.survey_answers.project_id}[${d.row},${d.col}]`);\r\n\r\n    circle.exit()\r\n        // NOTE: These lines caused a nasty bug when calling updateData more than once in quick succession\r\n        //       with different subsets of data. But they shouldn't be needed regardlessly.\r\n        //.on('mouseover', null)\r\n        //.on('mouseout', null)\r\n        //.on('click', null))\r\n      .transition()\r\n        .call(masterTransition)\r\n        .attr('r', 0)\r\n        .remove();\r\n\r\n    circle\r\n      .transition()\r\n        .call(masterTransition)\r\n        .attr('r', d => d.r)\r\n        .attr('transform', d => `translate(${d.x + this.margin.left},${d.y + this.margin.top})`);\r\n\r\n    circle.enter().append('circle')\r\n        .attr('transform', d => `translate(${d.x + this.margin.left},${d.y + this.margin.top})`)\r\n        .attr('data-id', d => d.survey_answers.project_id)\r\n        .attr('data-row', d => d.row)\r\n        .attr('data-col', d => d.col)\r\n        .attr('class', d => type2class[d.survey_answers.project_type])\r\n        .on('mouseover', d => this.setState({\r\n          hoveredProject: d\r\n        }))\r\n        .on('mouseout', d => this.setState({\r\n          hoveredProject: null\r\n        }))\r\n        .on('click', d => {\r\n          this.projectNavigator.goToProject(this.props.history, this.props.location, d.survey_answers.project_id);\r\n          this.setState({\r\n            hoveredProject: null\r\n          });\r\n        })\r\n        .attr('r', 0)\r\n      .transition()\r\n        .call(masterTransition)\r\n        .attr('r', d => d.r);\r\n  }\r\n\r\n  updateCircleSize(circleSize) {\r\n    this.setState({ circleSize });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"matrix-wrapper\" ref={svgWrapper => { this.svgWrapperRef = svgWrapper; }}>\r\n        <svg className=\"matrix\" width=\"100%\" height=\"100%\" ref={svg => { this.svgRef = svg; }} />\r\n        <MatrixTooltip project={this.state.hoveredProject} margin={this.margin} offset={this.offset} />\r\n        <div className=\"matrix-circle-scale-wrapper\" ref={circleSizeWrapper => { this.circleSizeWrapperRef = circleSizeWrapper; }}>\r\n          <MatrixCircleMenu updateCircleSize={this.updateCircleSize} circleSize={this.state.circleSize} />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nMatrix.propTypes = {\r\n  data: PropTypes.object.isRequired,\r\n  filteredData: PropTypes.object.isRequired,\r\n  updateScaleData: PropTypes.func.isRequired\r\n};\r\n\r\nexport default withRouter(Matrix);\r\n","import React, { Component} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport isEqual from 'react-fast-compare';\r\nimport { withRouter } from 'react-router-dom';\r\nimport * as d3 from 'd3';\r\nimport * as topojson from 'topojson';\r\nimport europe from '../assets/data/europe.topo.json';\r\nimport sweden from '../assets/data/sweden.topo.json';\r\nimport cities from '../assets/data/cities-v2.json';\r\nimport mockData from '../assets/data/mock-data-v8.json';\r\nimport project_coordinates from '../assets/data/project-coordinates.json';\r\nimport './Map.css';\r\nimport ProjectNavigator from '../ProjectNavigator';\r\nimport debounce from 'lodash.debounce';\r\n\r\n// current bugs\r\n// Multiple cities are not highlighted when clicked on a project.\r\n// Switching between map/matrix through project doesn't keep color on clicked project\r\n// Semantic zoom in factor needs to change from transform.y to transform.k \r\n\r\nclass Map extends Component {\r\n\r\n  constructor(props){\r\n    super(props);\r\n    this.margin = { top: 130, right: 20, bottom: 20, left: 160 };\r\n    this.offset = { x: 0,  y: 0 };\r\n    this.projectNavigator = new ProjectNavigator('/map');\r\n\r\n  }\r\n\r\n\r\n  // Render före compMount\r\n  componentDidMount(){\r\n\r\n    this.height = +this.svgWrapperRef.clientHeight - this.margin.top - this.margin.bottom;\r\n    this.width = +this.svgWrapperRef.clientWidth - this.margin.left - this.margin.right;\r\n\r\n    this.scaleLegendDebounce = debounce(() => this.updateScaleLegend(), 200);\r\n    this.zoom = d3.zoom()\r\n        .scaleExtent([1, 100])\r\n        .on(\"zoom.foo\", this.zoomed2.bind(this))\r\n        .on(\"zoom.bar\", () => {this.g.attr(\"transform\",  d3.event.transform);})\r\n        .on(\"zoom.legend\", this.scaleLegendDebounce);\r\n        // .on(this.updateData, this.zoomed2.bind(this));\r\n        // console.log(this.zoom);\r\n    this.projection = d3.geoMercator()\r\n        .rotate([5,-1])\r\n        // .scale(500)\r\n        // .center([15,58])\r\n        .scale(900)\r\n        .center([20,63])\r\n        .translate([this.width / 2, this.height / 2]);\r\n\r\n    this.path = d3.geoPath()\r\n        .projection(this.projection);\r\n\r\n    this.multiple_projects_box = d3.select(this.svgWrapperRef).append(\"div\")\r\n        .classed(\"multiple_projects_box\",true)\r\n        .style(\"opacity\", 0);\r\n    this.svg = d3.select(this.svgRef)\r\n            .attr(\"width\", this.width)\r\n            .attr(\"height\", this.height)\r\n            .call(this.zoom);\r\n\r\n    this.svg.on('click', () => {\r\n      if (d3.event.target.tagName !== 'circle') {\r\n        this.projectNavigator.goToRoot(this.props.history, this.props.location);\r\n        this.multiple_projects_box.transition().style('opacity',0);\r\n        this.multiple_projects_box.text(\"\");\r\n        this.projects.selectAll('circle').classed('clicked_bubble',false);\r\n\r\n      }\r\n    });\r\n\r\n    this.updateScaleLegend();\r\n\r\n    this.g = this.svg.append(\"g\");                              // The map itself\r\n\r\n    this.cities_container = this.svg.append(\"g\")                // All the black dot cities\r\n                          .classed(\"circle_box\",true);\r\n\r\n    this.projects = this.svg.append(\"g\");                       // All the projects + cities\r\n\r\n    // Tooltip for cities popup.\r\n    this.tooltip = d3.select(this.svgWrapperRef).append(\"div\")\r\n        .attr(\"class\", \"tooltip_bubble\")\r\n        .style(\"opacity\", 0);\r\n\r\n    // Tooltip for projects popup\r\n    this.tooltip2 = d3.select(this.svgWrapperRef).append(\"div\")\r\n        .attr(\"class\", \"tooltip_bubble2\")\r\n        .style(\"opacity\", 0);\r\n\r\n    // Tooltip for multi-proj.\r\n    this.tooltip3 = d3.select(this.svgWrapperRef).append(\"div\")\r\n        .attr(\"class\", \"tooltip_bubble3\")\r\n        .attr(\"id\",\"tooltip_bubble3\")\r\n        .style(\"opacity\", 0);\r\n\r\n    this.tooltip3_showed = 0;\r\n    this.project_count_city = {};\r\n\r\n\r\n\r\n\r\n    this.cities_circles = this.cities_container.selectAll(\"circle\")\r\n       .data(cities).enter()\r\n       .append(\"circle\")\r\n       .attr(\"id\",function(d){return\"circle-\"+d.id})\r\n       .attr(\"cx\", d => {return this.projection([d.coordinates.x, d.coordinates.y])[0]; })\r\n       .attr(\"cy\", d => { return this.projection([d.coordinates.x, d.coordinates.y])[1]; })\r\n       .attr(\"r\", 1.2)\r\n       .attr(\"fill\",\"black\")\r\n       .on(\"mouseover\", d => {\r\n         this.tooltip.transition(\"tooltip-1\").style(\"opacity\", .9);\r\n         this.tooltip.html(\"<b>\"+d.name + \"</b>\")\r\n            .style(\"left\", (d3.event.offsetX) + \"px\")\r\n            .style(\"top\", (d3.event.offsetY - 18) + \"px\")\r\n            .style(\"max-width\",  200 + \"px\");\r\n       })\r\n       .on(\"mouseout\", d => { this.tooltip.transition().style(\"opacity\", 0); });\r\n\r\n       this.updateData(this.props.filteredData);\r\n        //Europe\r\n        this.g.selectAll(\".continent_Europe_subunits\")\r\n          .data(topojson.feature(europe, europe.objects.europe).features)\r\n            .enter().append(\"path\")\r\n            .attr(\"d\", this.path)\r\n            .attr(\"fill\",'#e4e4e4');\r\n        // Sweden\r\n        this.g.selectAll('.continent_Sweden_subnits')\r\n          .data(topojson.feature(sweden, sweden.objects.subunits).features)\r\n          .enter().append(\"path\")\r\n          .attr(\"class\", function(d) {return \"country-\" + d.id;})\r\n          .attr(\"d\", this.path)\r\n          .attr(\"fill\", '#bdbdbd'); //https://www.color-hex.com/color/d3d3d3#shades-tints\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    // console.log(prevProps);\r\n    // console.log(prevState);\r\n    // console.log(this.props.filteredData);\r\n    // this.updateHovered(this.state.hoveredProject, prevState.hoveredProject);\r\n    this.updateClicked(this.props, prevProps);\r\n\r\n    if (!isEqual(this.props.filteredData, prevProps.filteredData)) {\r\n      this.updateData(this.props.filteredData);\r\n      // this.setState({\r\n        // hoveredProject: null\r\n      // });\r\n      this.projectNavigator.goToRoot(this.props.history, this.props.location);\r\n    }\r\n  }\r\n\r\n  updateClicked(props, prevProps){\r\n    let projectId = ProjectNavigator.GetProjectId(props.location);\r\n    let prevProjectId = ProjectNavigator.GetProjectId(prevProps.location);\r\n\r\n    // if we just started, (i.e. navigated to the site via a permalink with a project id)\r\n    // the projectId and prevProjectId will be identical because of how prevProps.location works\r\n    // so change it to -1.\r\n    console.log(projectId);\r\n    if (!this.projectNavigator.hasChangedSinceInit()) {\r\n      prevProjectId = -1;\r\n      this.projectNavigator.change();\r\n      // this.projects.selectAll('circle').classed('clicked_bubble',false);\r\n      // d3.select('#project-'+stra).classed('clicked_bubble',true);\r\n\r\n    }\r\n\r\n    if (projectId === prevProjectId) return;\r\n\r\n    // necessary only if clicking a project changes svgWrapper size (i.e. infobox takes up more or less space than before)\r\n    // if ((projectId === -1 && prevProjectId !== -1) || (projectId !== -1 && prevProjectId === -1))\r\n      // this.draw();\r\n\r\n    // if no project in path, we done\r\n    if (projectId === -1) return;\r\n\r\n    // if the project from the url doesn't exist in filteredData, redirect to root\r\n    if (!this.projectNavigator.projectExists(props.location, props.filteredData)) {\r\n      this.projectNavigator.redirectToRoot(props.history);\r\n      return;\r\n    }\r\n  }\r\n\r\n  updateData(dat){\r\n\r\n    var mockData_real = [];\r\n    let tetra = dat.data.length;\r\n    for(var i = 0; i < tetra; i++){\r\n      var da = dat.data[i].survey_answers;\r\n      var leng = da.locations.length;\r\n      for(var j = 0; j < leng; j++){\r\n        var obj = {};\r\n        //https://stackoverflow.com/questions/728360/how-do-i-correctly-clone-a-javascript-object\r\n        obj.survey_answers = JSON.parse(JSON.stringify(da));\r\n        obj.survey_answers.location = da.locations[j];\r\n        mockData_real.push(obj);\r\n      }\r\n    }\r\n    var loc_circles = [];\r\n    let tetr = mockData_real.length;\r\n    for(var i = 0; i < tetr; i ++){\r\n      var ob = {};\r\n      ob.name =  mockData_real[i].survey_answers.location;\r\n      ob.data = mockData_real[i];\r\n      loc_circles.push(ob);\r\n    }\r\n\r\n    // My variable names are awful here.\r\n    this.xx_loc = [];\r\n    for(var i = 0; i < tetr; i++){\r\n      var ab = loc_circles[i].name;\r\n      var xx = false;\r\n      for(var j = 0; j < this.xx_loc.length; j++){\r\n        var k = this.xx_loc[j].name;\r\n        if(ab.match(k)){\r\n          var tt = this.xx_loc[j].data;\r\n          tt.push(loc_circles[i].data);\r\n          this.xx_loc[j].data = tt;\r\n          xx = true;\r\n        }\r\n      }\r\n      if(xx == false){\r\n        var obj = {};\r\n        obj.name = ab;\r\n        var xxx = loc_circles[i].data;\r\n        obj.data = [];\r\n        obj.data.push(xxx);\r\n        this.xx_loc.push(obj);\r\n      }\r\n    }\r\n\r\n    this.project_circles = this.projects\r\n      .selectAll('circle')\r\n      .data(this.xx_loc, d => { return d.name;});\r\n    this.project_circles.exit()\r\n      .transition()\r\n      .attr('r',0)\r\n      .remove();\r\n\r\n      this.project_circles.transition()\r\n             .attr(\"r\", d => {\r\n               let a = d.data.length;\r\n               let i = d3.interpolateNumber(3+a, 30*a);\r\n               let x = ((d3.zoomTransform(this.svg.node()).y)*-1) -1000;\r\n               if(x > 0){\r\n                 let t = x/21776;\r\n                 return i(t);\r\n               }\r\n               return 3 + a;\r\n             });\r\n\r\n      this.project_circles.enter().append('circle')\r\n         .attr(\"id\",function(d,i){let stra = d.name.split(\" \")[0]; return\"project-\"+stra;})\r\n         .attr(\"cx\", d => { let c = project_coordinates[d.name]; return this.projection([c.x,c.y])[0];})\r\n         .attr(\"cy\", d => { let c = project_coordinates[d.name]; return this.projection([c.x,c.y])[1];})\r\n         .attr('transform', d => {\r\n           // I hate projections.\r\n           let c = project_coordinates[d.name];\r\n           let cx = this.projection([c.x,c.y]);\r\n           var trans = d3.zoomTransform(this.svg.node());\r\n           var t = trans.apply(cx);\r\n           let x = [t[0] - cx[0], t[1]-cx[1]];\r\n           return \"translate(\" + x + \")\";\r\n         })\r\n         .classed(\"bubble\",\"true\")\r\n         .style(\"stroke-width\", .7)\r\n         .style(\"stroke\",\"#007082\")\r\n         // .attr(\"fill\",\"#007d91\")\r\n         .attr('fill','hsl(173, 100%, 37%)')  // Temporary\r\n         .on('mouseover', d => {\r\n           let tx = \"\"\r\n           if(d.data.length > 1){\r\n             tx = \"<b>\"+ d.name +\"</b><br>\" + d.data.length+ \" Projects\"\r\n           } else {\r\n             tx = \"<b>\" + d.name +\"</b>\\n<br>\" + d.data[0].survey_answers.project_title;\r\n           }\r\n             this.tooltip2.transition().style(\"opacity\", .9);\r\n             this.tooltip2.html(tx)\r\n                .style(\"left\", (d3.event.offsetX) + \"px\")\r\n                .style(\"top\", (d3.event.offsetY - 18) + \"px\")\r\n                .style(\"max-width\",  200 + \"px\");\r\n              })\r\n         .on('mouseout', d => { this.tooltip2.transition(\"check\").style(\"opacity\", 0);})\r\n         .on('click',d => {\r\n           let stra = d.name.split(\" \")[0];\r\n           if(d.data.length == 1) {\r\n             this.projectNavigator.goToProject(this.props.history, this.props.location, d.data[0].survey_answers.project_id);\r\n             this.projects.selectAll('circle').classed('clicked_bubble',false);\r\n             d3.select('#project-'+stra).classed('clicked_bubble',true);\r\n           } else {\r\n             this.multiple_projects_box.text('');\r\n             this.multiple_projects_box.transition().style(\"opacity\", .9);\r\n             var header = d3.select('.multiple_projects_box').append('h4')\r\n                  .style('margin-top','2px')\r\n                  .text(d.name + \" has \"+ d.data.length +\" projects\");\r\n\r\n            var projects_listed = d3.select('.multiple_projects_box').append('ul').classed('mp_inner_list',true);\r\n            projects_listed.exit().remove();\r\n            projects_listed.selectAll('li').data(d.data, d => {return d.survey_answers.project_id;})\r\n              .enter().append('li')\r\n              .style('cursor','pointer')\r\n              .on('click', d=>{\r\n                this.projectNavigator.goToProject(this.props.history, this.props.location, d.survey_answers.project_id);\r\n                this.multiple_projects_box.transition().style('opacity',0);\r\n                this.multiple_projects_box.text(\"\");\r\n                this.projects.selectAll('circle').classed('clicked_bubble',false);\r\n                d3.select('#project-'+stra).classed('clicked_bubble',true);\r\n              })\r\n              .text(function(d){return d.survey_answers.project_title;});\r\n           }\r\n         })\r\n        .transition()\r\n         .attr(\"r\", d => {\r\n           let a = d.data.length;\r\n           let i = d3.interpolateNumber(3+a, 30*a);\r\n           let x = ((d3.zoomTransform(this.svg.node()).y)*-1) -1000;\r\n           if(x > 0){\r\n             let t = x/21776;\r\n             return i(t);\r\n           }\r\n           return 3 + a;\r\n         });\r\n  }\r\n\r\n\r\n  zoomed2(){\r\n    let afa = this.projects\r\n      .selectAll('circle')\r\n      .data(this.xx_loc, d => { return d.name;});\r\n\r\n      this.cities_circles.attr(\"transform\",this.circle_transform(d3.event.transform));\r\n      afa.attr(\"transform\",this.circle_transform(d3.event.transform));\r\n\r\n      this.cities_circles.attr(\"r\",this.circle_size_increase.bind(this));\r\n      afa.attr(\"r\",this.project_size_increase.bind(this));\r\n\r\n  }\r\n\r\n  circle_size_increase(d){\r\n    let i = d3.interpolateNumber(2, 20);\r\n    let x = (d3.event.transform.y * -1)-2000;\r\n    if(x > 0){\r\n      let t = x/21776;\r\n      return i(t);\r\n    }\r\n    return 1.3;\r\n  }\r\n\r\n  // Projects increase after zoom in factor X.\r\n  project_size_increase(d){\r\n    let a = d.data.length;\r\n    let i = d3.interpolateNumber(3+a, 30*a);\r\n    let x = (d3.event.transform.y * -1)-1000;\r\n    if(x > 0){\r\n      let t = x/21776;\r\n      return i(t);\r\n    }\r\n    return 3 + a;\r\n  }\r\n\r\n  // Semantic transformation\r\n  circle_transform(t) {\r\n    return function(d) {\r\n      let c = [this.getAttribute('cx'), this.getAttribute('cy')];\r\n      let r = t.apply(c);\r\n      let x = [r[0] - c[0], r[1]-c[1]];\r\n      return \"translate(\" + x + \")\";\r\n    };\r\n  }\r\n\r\n  updateScaleLegend() {\r\n    // Just copied this from the lines following \"this.project_circles.transition()...\"\r\n    // (lines 193-200) at the time of writing this.\r\n    const radius = (a) => {\r\n      let i = d3.interpolateNumber(3+a, 30*a);\r\n      // console.log(d3.zoomTransform(this.svg.node()));\r\n      let x = ((d3.zoomTransform(this.svg.node()).y)*-1) -1000;\r\n      if(x > 0){\r\n        let t = x/21776;\r\n        return i(t);\r\n      }\r\n      return 3 + a;\r\n    }\r\n\r\n    this.props.updateScaleData([\r\n      { r: radius(7), label: '7 projekt' },\r\n      { r: radius(4), label: '4 projekt' },\r\n      { r: radius(1), label: '1 projekt' }\r\n    ]);\r\n  }\r\n\r\n  // Efter constructor\r\n  render() {\r\n    return (\r\n      <div className=\"mapWrap\" ref={svgWrapper => this.svgWrapperRef = svgWrapper}>\r\n        <svg className=\"bubbles_svg_area\" id=\"bubbles_svg_area\" ref={svg => { this.svgRef = svg;}}></svg>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nMap.propTypes = {\r\n  data: PropTypes.object.isRequired,\r\n  filteredData: PropTypes.object.isRequired\r\n};\r\n\r\nexport default withRouter(Map);\r\n","import React, {Component} from 'react';\r\nimport * as d3 from 'd3';\r\nimport './Bubbles.css';\r\nimport mockData from '../assets/data/mock-data-v8.json';\r\nimport partners from '../assets/data/partners.json';\r\nimport debounce from 'lodash.debounce';\r\n\r\n\r\nclass Partners extends Component {\r\n\r\n  constructor(props){\r\n    super(props);\r\n    this.omrade_titles = {\r\n      0: \"Civilsamhälle\",\r\n      1: \"Forskning\",\r\n      2: \"Näringsliv\",\r\n      3: \"Offentlig verksamhet\"\r\n    };\r\n\r\n\r\n    this.helix_colors = {\r\n      0 : \"#007d91\",\r\n      1 : \"#EA9A00\",\r\n      2 : \"#00A389\",\r\n      3 : \"#97C28E\"\r\n    };\r\n\r\n    this.helix_colors_borders = {\r\n      0 : \"#007082\",\r\n      1 : \"#d28a00\",\r\n      2 : \"#00927b\",\r\n      3 : \"#87ae7f\"\r\n    };\r\n\r\n    this.margin = { top: 130, right: 20, bottom: 20, left: 160 };\r\n    this.offset = { x: 0,  y: 0 };\r\n    // Hardcoded section titles\r\n    this.omrade_titles_x = {\r\n        3: 70,\r\n        0: 255,\r\n        1: 400,\r\n        2: 570\r\n    };\r\n    this.omrade_titles_y = {\r\n      3: 70,\r\n      0: 70,\r\n      1: 70,\r\n      2:50\r\n    };\r\n\r\n\r\n    // Location on screen\r\n    this.projectSpace = {\r\n      0 : 415,\r\n      1 : 730\r\n    };\r\n    this.projspace_title_x = {\r\n      0: 410,\r\n      1: 800\r\n    };\r\n    this.projspace_title_y = {\r\n      0: 10,\r\n      1: 80\r\n    };\r\n\r\n    this.project_no = -1;\r\n    this.bubbles = null;   // Bubbles in object.\r\n    this.nodes = {};            // Bubbles as nodes.\r\n    this.view_option = 0;\r\n\r\n    this.forceStrength = 0.025;\r\n\r\n    this.createNewNodes = this.createNewNodes.bind(this);\r\n\r\n  }\r\n\r\n  componentDidMount(){\r\n    // console.log(\"heck\");\r\n    this.height = +this.svgWrapperRef.clientHeight - this.margin.top - this.margin.bottom;\r\n    this.width = +this.svgWrapperRef.clientWidth - this.margin.left - this.margin.right;\r\n    // console.log(this.svgWrapperRef.clientHeight);\r\n    this.tooltip = d3.select(this.svgWrapperRef).append(\"div\")\r\n        .attr(\"class\", \"tooltip_bubble_partners\")\r\n        .style(\"opacity\", 0);\r\n\r\n    // $(\"#dropdown_menu\").html(str);\r\n\r\n    this.button_collection = d3.select(this.svgWrapperRef).append(\"div\")\r\n        .classed(\"button_collection\",true);\r\n\r\n    this.normal_button = this.button_collection.append(\"div\")\r\n            .classed(\"button\",true)\r\n            .classed(\"overview_button\",true)\r\n            .classed('button_selected',true)\r\n            .on('click', () => {d3.selectAll('.button').classed('button_selected',false);this.normal_button.classed('button_selected',true);this.move_bubbles(0);})\r\n            .text(\"Översikt\");\r\n    this.helix_button = this.button_collection.append(\"div\")\r\n        .classed(\"button\",true)\r\n        .classed(\"helix_button\",true)\r\n        .on('click', () => {d3.selectAll('.button').classed('button_selected',false);this.helix_button.classed('button_selected',true);this.move_bubbles(1);})\r\n        .text(\"Quadruple Helix\");\r\n\r\n    this.expand_button = this.button_collection.append(\"div\")\r\n        .classed(\"button\",true)\r\n        .classed(\"expand_button\",true)\r\n        .on('click', () => {d3.selectAll('.button_collections').style('display','initial');})\r\n        .text(\"Projekt ↓ \")\r\n\r\n    this.nodes = this.createNewNodes(partners);\r\n\r\n    this.projspace_title = {};\r\n    this.projspace_title[0] = \"Partners\";\r\n    for(var i = 0; i < mockData.data.length; i++){\r\n      this.projspace_title[mockData.data[i].survey_answers.project_id] = mockData.data[i].survey_answers.project_title;\r\n    }\r\n\r\n    // !!!!!!!!!!\r\n    // This is good code. Just needs to be placed elsewhere.\r\n    this.button_collections = d3.select(this.svgWrapperRef).append(\"div\")\r\n        .classed(\"button_collections\",true)\r\n        // .style('width','100%')\r\n        .style('background-color','lightgrey');\r\n    this.button_collections.append('h2').text(\"Projekt\").style('margin-top','2px');\r\n    this.project_buttons = this.button_collections.append(\"div\").selectAll('div')\r\n      .data(mockData.data);\r\n    this.project_buttons.enter().append('div')\r\n      // .text('hey')\r\n      .classed(\"buttons\",true)\r\n      .classed('project_button',true)\r\n      // .text( d => {console.log(d); return \"gaga\"});\r\n      .on('click', d => {this.change_view_spec(2, d.survey_answers.project_id);\r\n        d3.selectAll('.button_collections').style('display','none');\r\n        d3.selectAll('.button').classed('button_selected',false);\r\n        this.expand_button.classed('button_selected',true);})\r\n      .on('mouseover',function(d){\r\n        d3.select(this).style('background-color','white');\r\n      })\r\n      .on('mouseout',function(d){\r\n        d3.select(this).style('background-color','lightgrey');\r\n      })\r\n      .html( d => {return d.survey_answers.project_title + \"<br>\";});\r\n    // !!!!!!!!!!\r\n\r\n    this.omradeCenters = {\r\n      0: { x: 255, y: 0 },\r\n      1: { x: 400, y: 0 },\r\n      2: { x: 570, y: 0 },\r\n      3: { x: 70, y:0}\r\n    };\r\n\r\n\r\n    this.center = { x: this.width / 2, y: this.height / 2 };\r\n\r\n    // this.projspace_title = {};\r\n    this.scaleLegendDebounce = debounce(() => this.updateScaleLegend(), 200);\r\n    this.zoom = d3.zoom()\r\n        .scaleExtent([.2, 20])\r\n        .on(\"zoom.transform\", () => {this.g.attr(\"transform\", d3.event.transform);})\r\n        .on(\"zoom.legend\", this.scaleLegendDebounce);\r\n\r\n    this.svg = d3.select(this.svgRef)\r\n          .attr(\"width\",this.width)\r\n          .attr(\"height\",this.height)\r\n          .call(this.zoom);\r\n    this.updateScaleLegend();\r\n    this.svg.on('click', () => {\r\n      if (d3.event.target.class !== 'project_button') {\r\n        // this.projectNavigator.goToRoot(this.props.history, this.props.location);\r\n        d3.selectAll('.button_collections').style('display','none');\r\n      }\r\n    });\r\n    this.g = this.svg.append(\"g\");\r\n\r\n    this.simulation = d3.forceSimulation()\r\n      .velocityDecay(0.2)\r\n      .force('x', d3.forceX().strength(this.forceStrength).x(this.center.x))\r\n      .force('y', d3.forceY().strength(this.forceStrength).y(this.center.y))\r\n      .force('charge', d3.forceManyBody().strength(this.charge.bind(this)))\r\n      .on('tick', this.ticked.bind(this));\r\n\r\n    this.simulation.stop();\r\n    this.maxAmount = d3.max(mockData, d => { return +d.total_amount; });\r\n\r\n    this.radiusScale = d3.scalePow()\r\n      .exponent(0.5)\r\n      .range([2, 85])\r\n      .domain([0, this.maxAmount]);\r\n\r\n    // console.log(mockData);\r\n    this.bubbles = this.g.selectAll('.bubble')\r\n      .data(this.nodes, d => { return d.id; });\r\n\r\n    this.bubblesE = this.bubbles.enter().append('circle')\r\n      .classed('bubble', true)\r\n      .attr('r', 0)\r\n      .style(\"fill\",d => { return this.helix_colors[d.kategori];})\r\n      .attr('stroke-width', .5)\r\n      .attr('stroke',d => {return this.helix_colors_borders[d.kategori]})\r\n      .on(\"mouseover\",d => {\r\n        let id = d.id;\r\n        // this.parentNode.appendChild(this);\r\n        d3.selectAll(\".bubble\")\r\n          .filter(function(d){if(d.id===id){return false;}return true;})\r\n          .transition()\r\n            .style(\"opacity\",\"0.3\");\r\n\r\n        this.tooltip.transition().style(\"opacity\", .9);\r\n        this.tooltip.html(d.organisation) //+ \" \" + omrade_titles[d.kategori])\r\n          .style(\"left\", (d3.event.offsetX) + \"px\")\r\n          .style(\"top\", (d3.event.offsetY - 28) + \"px\")\r\n          .style(\"max-width\",  200 + \"px\");\r\n      })\r\n      .on(\"mouseout\",d => {\r\n          this.tooltip.transition().style(\"opacity\", 0);\r\n          d3.selectAll(\".bubble\")\r\n            .transition()\r\n              .style(\"opacity\",\"1\");\r\n      });\r\n\r\n\r\n    this.bubbles = this.bubbles.merge(this.bubblesE);\r\n\r\n    this.bubbles.transition(\"start\")\r\n      .duration(2000)\r\n      .attr('r', d => { return d.radius; });\r\n\r\n    // Start simulation\r\n    this.simulation.nodes(this.nodes);\r\n    this.move_bubbles(0);\r\n\r\n\r\n    let omradeData = d3.keys(this.omrade_titles);\r\n    this.years = this.g.selectAll('.omradeTitles')\r\n    .data(omradeData);\r\n\r\n    this.years.enter().append('text')\r\n      .attr('class', 'omradeTitles')\r\n      .attr('display','none')\r\n      .attr('font-size','20px')\r\n      .attr('x', d => { return this.omrade_titles_x[d]; })\r\n      .attr('y', d => { return this.omrade_titles_y[d];})\r\n      .attr('text-anchor', 'middle')\r\n      .text(d => { return this.omrade_titles[d]; });\r\n\r\n    this.temp_str = {0 : \"Partners\", 1: \"temp\"};\r\n    let projData2 = d3.keys(this.temp_str);\r\n    this.projTitlesObj = this.g.selectAll('.projTitles')\r\n    .data(projData2);\r\n\r\n    this.projTitlesObj.enter().append('text')\r\n      .attr('class', 'projTitles')\r\n      .attr('display','none')\r\n      .attr('font-size','20px')\r\n      .attr('x', d => { return this.projspace_title_x[d]; })\r\n      .attr('y', d => { return this.projspace_title_y[d];})\r\n      .attr('text-anchor', 'middle')\r\n      .text(d => { return this.temp_str[d]; })\r\n      .filter(function (d){\r\n        if(d == 1){\r\n          return true;\r\n        }\r\n        return false;\r\n      })\r\n      .attr('font-size','12px')\r\n      .attr(\"id\",\"proj_text_change\");\r\n\r\n\r\n    // Move legedn elsewhere.\r\n    // create_legend();\r\n  }\r\n\r\n\r\n  move_bubbles(opt){\r\n    if(opt == 0){\r\n      this.simulation.force('x', d3.forceX().strength(this.forceStrength).x(this.center.x));\r\n    } else if (opt == 1){\r\n      this.simulation.force('x', d3.forceX().strength(this.forceStrength).x(this.omrade_view.bind(this)));\r\n    } else if (opt == 2){\r\n      this.simulation.force('x', d3.forceX().strength(this.forceStrength).x(this.project_view.bind(this)));\r\n    }\r\n    this.view_option = opt;\r\n    this.simulation.alpha(1).restart();\r\n    this.toggle_title(opt);\r\n  }\r\n\r\n  toggle_title(opt){\r\n    if(opt == 1){\r\n      d3.selectAll('.omradeTitles')\r\n        .attr('display','initial');\r\n    } else {\r\n      d3.selectAll('.omradeTitles')\r\n        .attr('display', 'none');\r\n    }\r\n    if(opt == 2){\r\n      d3.selectAll('.projTitles')\r\n        .attr('display','initial');\r\n    } else {\r\n        d3.selectAll('.projTitles')\r\n          .attr('display','none');\r\n    }\r\n  }\r\n  omrade_view(d){\r\n    return this.omradeCenters[d.kategori].x;\r\n  }\r\n\r\n  project_view(d){\r\n    let projs = d.projects;\r\n    for(var i = 0; i < projs.length; i++){\r\n      if(projs[i] == this.project_no){\r\n        return this.projectSpace[1];\r\n      }\r\n    }\r\n    return this.projectSpace[0];\r\n  }\r\n  charge(d) {\r\n    return -Math.pow(d.radius, 2.0) * this.forceStrength;\r\n  }\r\n\r\n  ticked() {\r\n    this.bubbles.attr('cx', d => { return d.x; })\r\n                .attr('cy', d => { return d.y; });\r\n    }\r\n\r\n  change_view_spec(opt, proj_opt){\r\n    this.view_option = opt;\r\n    this.project_no = proj_opt;\r\n    d3.select('#proj_text_change').text(this.projspace_title[proj_opt]);\r\n    this.move_bubbles(opt);\r\n  }\r\n\r\n  componentDidUpdate(){\r\n\r\n  }\r\n\r\n  createNewNodes(rawData){\r\n    let q_o = {\r\n       \"Civilsamhälle\" : 0,\r\n       \"Forskning\" : 1,\r\n       \"Näringsliv\": 2,\r\n       \"Offentlig verksamhet\": 3\r\n    };\r\n    let myNodes = rawData.map(function (d,i){\r\n      return {\r\n        id: (i),\r\n        radius : 15,\r\n        organisation: d.Organisation,\r\n        value: Math.random() * 10,\r\n        projects : d.Projects,\r\n        kategori: q_o[d.Kategori],\r\n        x: Math.random() * 900,\r\n        y: Math.random() * 800\r\n      };\r\n    });\r\n    myNodes.sort(function (a,b){ return b.value - a.value; });\r\n    return myNodes;\r\n  }\r\n\r\n  updateScaleLegend() {\r\n    const scaleFactor = d3.zoomTransform(this.svg.node()).k;\r\n    this.props.updateScaleData([{ r: 15 * scaleFactor, label: '1 partner' }]);\r\n  }\r\n\r\n\r\n  render(){\r\n    return (\r\n      <div className=\"partnerWrap\" ref={svgWrapper => this.svgWrapperRef = svgWrapper}>\r\n        <svg className=\"partner_svg_area\" id=\"partner_svg_area\" ref={svg => { this.svgRef = svg;}}></svg>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Partners;\r\n","import React, { Component } from 'react';\r\nimport { range } from 'd3';\r\nimport isEqual from 'react-fast-compare';\r\nimport PropTypes from 'prop-types';\r\nimport './Matchmaking.css';\r\n\r\nconst ROWS = 5;\r\nconst COLS = 4;\r\n\r\n// input is '[ROW,COL]' where ROW and COL are numbers.\r\nconst parsePosition = (name) => {\r\n  const split = name.substring(1, name.length - 1).split(',');\r\n  return { row: Number.parseInt(split[0]), col: Number.parseInt(split[1]) };\r\n};\r\n\r\nclass Matchmaking extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      expanded: false\r\n    };\r\n\r\n    this.handleChange = this.handleChange.bind(this);\r\n  }\r\n\r\n  handleChange(event) {\r\n    const position = parsePosition(event.target.name);\r\n    const valueCopy = [...this.props.value];\r\n\r\n    const index = this.props.value.findIndex(item => isEqual(position, item));\r\n    if (index !== -1) valueCopy.splice(index, 1);\r\n    if (event.target.checked) valueCopy.push(position);\r\n\r\n    if (this.props.onChange) this.props.onChange(valueCopy);\r\n  }\r\n\r\n  isChecked(row, col) {\r\n    return this.props.value.findIndex(item => isEqual(item, { row, col })) !== -1;\r\n  }\r\n\r\n  render() {\r\n    const columns = (row) => {\r\n      return range(1, COLS + 1).map(col => (\r\n        <td key={(row - 1) * COLS + col}>\r\n          <input\r\n            type=\"checkbox\"\r\n            name={`[${row},${col}]`}\r\n            checked={this.isChecked(row, col)}\r\n            onChange={this.handleChange}\r\n            disabled={this.props.enabled && !this.props.enabled[row][col]} />\r\n        </td>\r\n      ));\r\n    };\r\n\r\n    const rows = range(1, ROWS + 1).map(row => (\r\n      <tr key={row}>\r\n        {columns(row)}\r\n      </tr>\r\n    ));\r\n\r\n    return (\r\n      <div className=\"filters-box filters-box--matchmaking\">\r\n        <span className=\"filters-box__title\">\r\n          Teman och fokusområden\r\n        </span>\r\n        <div className=\"matchmaking-table-container\">\r\n          <table className=\"matchmaking-table\">\r\n            <tbody>\r\n              {rows}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nMatchmaking.defaultProps = {\r\n  value: []\r\n};\r\n\r\nMatchmaking.propTypes = {\r\n  onChange: PropTypes.func,\r\n  value: PropTypes.arrayOf(PropTypes.shape({\r\n    row: PropTypes.number,\r\n    col: PropTypes.number\r\n  })).isRequired,\r\n  enabled: PropTypes.objectOf(PropTypes.objectOf(PropTypes.bool))\r\n};\r\n\r\nexport default Matchmaking;\r\n","import React, { Component, Fragment } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { range } from 'd3';\r\nimport { Multiselect } from 'react-widgets'\r\nimport { col2focus, row2theme, theme2row } from '../matrix/MatrixUtility';\r\nimport Matchmaking from './Matchmaking';\r\nimport isEqual from 'react-fast-compare';\r\nimport _intersection from 'lodash.intersection';\r\nimport './Filters.css';\r\n\r\n// find the intersection of an arbitrary number of subsets of data\r\nfunction intersection(...data) {\r\n  return { data: _intersection(...data.map(d => d.data)) };\r\n}\r\n\r\n// presentation of the multiselect options\r\nconst ListItem = ({ item }) => (\r\n  <div className=\"filters-item\">\r\n    <span className=\"filters-item__name\">{item.name}</span>\r\n    <span className=\"filters-item__count\">{item.count}</span>\r\n  </div>\r\n);\r\n\r\nclass Filters extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      filteredBy: {\r\n        titles: props.data,\r\n        locations: props.data,\r\n        partners: props.data,\r\n        keywords: props.data,\r\n        matchmaking: props.data,\r\n      },\r\n      filterValues: {\r\n        titles: [],\r\n        locations: [],\r\n        partners: [],\r\n        keywords: [],\r\n        matchmaking: []\r\n      },\r\n      filteredData: props.data\r\n    };\r\n\r\n    // used for optimizations\r\n    this.prevFilteredData = null;\r\n\r\n    // data used by filter components when rendering, e.g.\r\n    // location names, partners, enabled matrix cells etc\r\n    this.componentData = {\r\n      titles: null,\r\n      locations: null,\r\n      partners: null,\r\n      keywords: null,\r\n      matchmaking: null\r\n    };\r\n\r\n    this.projectLocations = {};\r\n    this.projectPartners = {};\r\n    this.projectKeywords = {};\r\n\r\n    props.data.data.forEach(d => {\r\n      this.projectLocations[d.survey_answers.project_id] = new Set();\r\n      d.survey_answers.locations.forEach(location => {\r\n        this.projectLocations[d.survey_answers.project_id].add(location);\r\n      });\r\n\r\n      this.projectPartners[d.survey_answers.project_id] = new Set();\r\n      d.survey_answers.other_financiers.forEach(financier => {\r\n        this.projectPartners[d.survey_answers.project_id].add(financier);\r\n      });\r\n      d.survey_answers.other_recipients.forEach(recipient => {\r\n        this.projectPartners[d.survey_answers.project_id].add(recipient);\r\n      });\r\n\r\n      this.projectKeywords[d.survey_answers.project_id] = new Set();\r\n      d.survey_answers.keywords.forEach(keyword => {\r\n        this.projectKeywords[d.survey_answers.project_id].add(keyword);\r\n      });\r\n    });\r\n\r\n    this.filterBy = {\r\n      titles: (titles) => {\r\n        if (!titles.length) return this.props.data;\r\n\r\n        return {\r\n          data: this.props.data.data.filter((d) => {\r\n            if (!titles.includes(d.survey_answers.project_title)) return false;\r\n            return true;\r\n          })\r\n        };\r\n      },\r\n      locations: (locations) => {\r\n        if (!locations.length) return this.props.data;\r\n\r\n        return {\r\n          data: this.props.data.data.filter((d) => {\r\n            if (!locations.some(location => {\r\n              return this.projectLocations[d.survey_answers.project_id].has(location.name);\r\n            })) return false;\r\n            return true;\r\n          })\r\n        };\r\n      },\r\n      partners: (partners) => {\r\n        if (!partners.length) return this.props.data;\r\n\r\n        return {\r\n          data: this.props.data.data.filter((d) => {\r\n            if (!partners.some(partner => {\r\n              return this.projectPartners[d.survey_answers.project_id].has(partner.name);\r\n            })) return false;\r\n            return true;\r\n          })\r\n        }\r\n      },\r\n      keywords: (keywords) => {\r\n        if (!keywords.length) return this.props.data;\r\n\r\n        return {\r\n          data: this.props.data.data.filter((d) => {\r\n            if (!keywords.some(keyword => {\r\n              return this.projectKeywords[d.survey_answers.project_id].has(keyword.name);\r\n            })) return false;\r\n            return true;\r\n          })\r\n        }\r\n      },\r\n      matchmaking: (matchmaking) => {\r\n        if (!matchmaking.length) return this.props.data;\r\n\r\n        return {\r\n          data: this.props.data.data.filter((d) => {\r\n            if (!matchmaking.every(position => {\r\n              return d.survey_answers[col2focus[position.col]].includes(row2theme[position.row])\r\n            })) return false;\r\n            return true;\r\n          })\r\n        }\r\n      }\r\n    };\r\n  }\r\n\r\n  empty() {\r\n    return Object.values(this.state.filterValues).every(value => value.length === 0);\r\n  }\r\n\r\n  filteredByAllExcept(filter) {\r\n    return intersection(...Object.entries(this.state.filteredBy)\r\n      .filter(([key, value]) => key !== filter)\r\n      .map(([key, value]) => value))\r\n  }\r\n\r\n  buildTitlesList() {\r\n    const data = this.filteredByAllExcept('titles');\r\n    return data.data.map(d => d.survey_answers.project_title)\r\n  }\r\n\r\n  buildLocationList() {\r\n    const data = this.filteredByAllExcept('locations');\r\n\r\n    const ret = new Map();\r\n    data.data.forEach(d => {\r\n      d.survey_answers.locations.forEach(location => {\r\n        ret.has(location) ? ret.set(location, ret.get(location) + 1) : ret.set(location, 1);\r\n      });\r\n    });\r\n\r\n    return [...ret]\r\n      .sort()\r\n      .reduce((arr, [key, value]) => [...arr, {name: key, count: value}], [])\r\n  }\r\n\r\n  buildPartnerList() {\r\n    const data = this.filteredByAllExcept('partners');\r\n\r\n    const ret = new Map();\r\n    data.data.forEach(d => {\r\n      this.projectPartners[d.survey_answers.project_id].forEach(partner => {\r\n        ret.has(partner) ? ret.set(partner, ret.get(partner) + 1) : ret.set(partner, 1);\r\n      });\r\n    });\r\n\r\n    return [...ret]\r\n      .sort()\r\n      .reduce((arr, [key, value]) => [...arr, {name: key, count: value}], [])\r\n  }\r\n\r\n  buildKeywordList() {\r\n    const data = this.filteredByAllExcept('keywords');\r\n\r\n    const ret = new Map();\r\n    data.data.forEach(d => {\r\n      d.survey_answers.keywords.forEach(keyword => {\r\n        ret.has(keyword) ? ret.set(keyword, ret.get(keyword) + 1) : ret.set(keyword, 1);\r\n      });\r\n    });\r\n\r\n    return [...ret]\r\n      .sort()\r\n      .reduce((arr, [key, value]) => [...arr, {name: key, count: value}], [])\r\n  }\r\n\r\n  buildMatchmakingList() {\r\n    const data = this.state.filteredData;\r\n\r\n    const ROWS = 5;\r\n    const COLS = 4;\r\n\r\n    const colRange = range(1, COLS + 1);\r\n\r\n    const nonEmpty = {};\r\n    for (let row = 1; row <= ROWS; ++row) {\r\n      nonEmpty[row] = {};\r\n      for (let col = 1; col <= COLS; ++col) {\r\n        nonEmpty[row][col] = false;\r\n      }\r\n    }\r\n\r\n    data.data.forEach(d => {\r\n      colRange.forEach(col => {\r\n        d.survey_answers[col2focus[col]].forEach(theme => {\r\n          const row = theme2row[theme];\r\n          if (!nonEmpty[row][col]) nonEmpty[row][col] = true;\r\n        })\r\n      });\r\n    });\r\n\r\n    return nonEmpty;\r\n  }\r\n\r\n  // only render if state changed, ignore props since they shouldn't change anyway\r\n  shouldComponentUpdate(nextProps, nextState) {\r\n    if (!isEqual(nextState, this.state)) return true;\r\n    return false;\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if (prevState === this.state) return;\r\n\r\n    if (!isEqual(prevState.filterValues, this.state.filterValues)) {\r\n      const filteredBy = {};\r\n      Object.keys(this.filterBy).forEach(filter => {\r\n        if (!isEqual(prevState.filterValues[filter], this.state.filterValues[filter])) {\r\n          filteredBy[filter] = this.filterBy[filter](this.state.filterValues[filter]);\r\n        }\r\n      });\r\n      if (Object.keys(filteredBy).length) {\r\n        this.setState((state, props) => ({\r\n          filteredBy: {\r\n            ...state.filteredBy,\r\n            ...filteredBy\r\n          }\r\n        }))\r\n      }\r\n    }\r\n\r\n    if (!isEqual(prevState.filteredBy, this.state.filteredBy)) {\r\n      const newFilteredData = intersection(...Object.values(this.state.filteredBy));\r\n      this.setState({\r\n        filteredData: newFilteredData\r\n      });\r\n      this.props.updateFilteredData(newFilteredData);\r\n    }\r\n  }\r\n\r\n  render() {\r\n    // load these here, otherwise lazy evaluation can cause some choppiness in the browser\r\n    if (this.state.filteredData !== this.prevFilteredData) {\r\n      this.prevFilteredData = this.state.filteredData;\r\n      this.componentData = {\r\n        titles: this.buildTitlesList(),\r\n        locations: this.buildLocationList(),\r\n        partners: this.buildPartnerList(),\r\n        keywords: this.buildKeywordList(),\r\n        matchmaking: this.buildMatchmakingList()\r\n      }\r\n    }\r\n\r\n    return (\r\n      <div className=\"filters\">\r\n        <h2>Filter</h2>\r\n        <div className=\"filters-box\">\r\n          <span className=\"filters-box__title\">\r\n            Titel\r\n          </span>\r\n          <Multiselect\r\n            data={this.componentData.titles}\r\n            onChange={titles => {\r\n              this.setState({\r\n                filterValues: {\r\n                  ...this.state.filterValues,\r\n                  titles\r\n                }\r\n              });\r\n            }}\r\n            placeholder=\"Filtera efter titlar\"\r\n            filter=\"contains\"\r\n            value={this.state.filterValues.titles} />\r\n        </div>\r\n        <div className=\"filters-box\">\r\n          <span className=\"filters-box__title\">\r\n            Plats\r\n          </span>\r\n          <Multiselect\r\n            data={this.componentData.locations}\r\n            onChange={locations => {\r\n              this.setState({\r\n                filterValues: {\r\n                  ...this.state.filterValues,\r\n                  locations\r\n                }\r\n              });\r\n            }}\r\n            placeholder=\"Filtrera efter plats\"\r\n            valueField=\"name\"\r\n            textField=\"name\"\r\n            itemComponent={ListItem}\r\n            value={this.state.filterValues.locations} />\r\n        </div>\r\n        <div className=\"filters-box\">\r\n          <span className=\"filters-box__title\">\r\n            Partner\r\n          </span>\r\n          <Multiselect\r\n            data={this.componentData.partners}\r\n            onChange={partners => {\r\n              this.setState({\r\n                filterValues: {\r\n                  ...this.state.filterValues,\r\n                  partners\r\n                }\r\n              });\r\n            }}\r\n            placeholder=\"Filtrera efter partners\"\r\n            filter=\"contains\"\r\n            valueField=\"name\"\r\n            textField=\"name\"\r\n            itemComponent={ListItem}\r\n            value={this.state.filterValues.partners} />\r\n        </div>\r\n        <div className=\"filters-box\">\r\n          <span className=\"filters-box__title\">\r\n            Nyckelord\r\n          </span>\r\n          <Multiselect\r\n            data={this.componentData.keywords}\r\n            onChange={keywords => {\r\n              this.setState({\r\n                filterValues: {\r\n                  ...this.state.filterValues,\r\n                  keywords\r\n                }\r\n              });\r\n            }}\r\n            placeholder=\"Filtera efter nyckelord\"\r\n            filter=\"contains\"\r\n            valueField=\"name\"\r\n            textField=\"name\"\r\n            itemComponent={ListItem}\r\n            value={this.state.filterValues.keywords} />\r\n        </div>\r\n\r\n        <Matchmaking\r\n          value={this.state.filterValues.matchmaking}\r\n          onChange={matchmaking => {\r\n            this.setState({\r\n              filterValues: {\r\n                ...this.state.filterValues,\r\n                matchmaking\r\n              }\r\n            });\r\n          }}\r\n          enabled={this.componentData.matchmaking} />\r\n\r\n        {!this.empty() &&\r\n          <Fragment>\r\n            <p className='filters-results-text'>\r\n              Visar <span className=\"filters-results-text__number\">{this.state.filteredData.data.length}</span>\r\n              {' '} av <span className=\"filters-results-text__number\">{this.props.data.data.length}</span> projekt.\r\n            </p>\r\n\r\n            <div className='filters-button-box'>\r\n              <button\r\n                className=\"filters-button\"\r\n                onClick={() => this.setState({\r\n                  filterValues: Object.entries(this.state.filterValues)\r\n                    .reduce((obj, [k,_]) => ({...obj, [k]: []}), {})\r\n                })}>\r\n                Rensa filter\r\n              </button>\r\n            </div>\r\n          </Fragment>\r\n        }\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nFilters.propTypes = {\r\n  data: PropTypes.object.isRequired,\r\n  updateFilteredData: PropTypes.func.isRequired,\r\n  scaleData: PropTypes.shape({\r\n    rScale: PropTypes.number,\r\n    minBudget: PropTypes.number,\r\n    maxBudget: PropTypes.number\r\n  })\r\n};\r\n\r\nexport default Filters;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport './ColorLegendItem.css';\r\n\r\nfunction ColorLegendItem({ text, color }) {\r\n  return (\r\n    <div className=\"color-legend-item\">\r\n      <div className=\"color-legend-item__box\" style={{background: color}} />\r\n      <span className=\"color-legend-item__text\">{text}</span>\r\n    </div>\r\n  );\r\n}\r\n\r\nColorLegendItem.propTypes = {\r\n  text: PropTypes.string.isRequired,\r\n  color: PropTypes.any.isRequired\r\n}\r\n\r\nexport default ColorLegendItem;\r\n","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { range } from 'd3';\r\nimport { withRouter } from 'react-router';\r\nimport { Transition, animated } from 'react-spring';\r\nimport ColorLegendItem from './ColorLegendItem';\r\nimport { projectTypes, projectTypeColors } from './matrix/MatrixUtility';\r\nimport './ColorLegend.css';\r\n\r\n// NOTE: Hardcoded for now, but for prettier code these could be imported directly from Partners.jsx\r\nconst omrade_titles = {\r\n  0: \"Civilsamhälle\",\r\n  1: \"Forskning\",\r\n  2: \"Näringsliv\",\r\n  3: \"Offentlig verksamhet\"\r\n};\r\n\r\nconst helix_colors = {\r\n  0: \"#007d91\",\r\n  1: \"#EA9A00\",\r\n  2: \"#00A389\",\r\n  3: \"#97C28E\"\r\n};\r\n\r\nfunction RouteColorLegend({ labels }) {\r\n  let items = labels.map(label => \r\n    <li key={label.text}>\r\n      <ColorLegendItem {...label} />\r\n    </li>\r\n  );\r\n\r\n  return (\r\n    <div className=\"color-legend\">\r\n      <ul>\r\n        {items}\r\n      </ul>\r\n    </div>\r\n  );\r\n};\r\n\r\nRouteColorLegend.propTypes = {\r\n  labels: PropTypes.arrayOf(PropTypes.shape({\r\n    text: PropTypes.string.isRequired,\r\n    color: PropTypes.any.isRequired\r\n  })).isRequired\r\n};\r\n\r\nclass ColorLegend extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    const mapLabels = [{ text: 'Projekt', color: '#007d91'}]; // hard-coded\r\n    const matrixLabels = projectTypes.map(type => ({ text: type, color: projectTypeColors(type) }));\r\n    const partnersLabels = range(4).map(i => ({ text: omrade_titles[i], color: helix_colors[i] }));\r\n\r\n    this.legends = {\r\n      map: (<RouteColorLegend labels={mapLabels} />),\r\n      matrix: (<RouteColorLegend labels={matrixLabels} />),\r\n      partners: (<RouteColorLegend labels={partnersLabels} />)\r\n    };\r\n  }\r\n\r\n  shouldComponentUpdate(nextProps, nextState) {\r\n    if (this.props.location.pathname !== nextProps.location.pathname) return true;\r\n    return false;\r\n  }\r\n\r\n  render() {\r\n    const route = Object.keys(this.legends).find(route => this.props.location.pathname.includes(route));\r\n\r\n    return (\r\n      <Transition\r\n        native\r\n        items={route}\r\n        from={{ height: 0, opacity: 0}}\r\n        enter={{ height: 'auto', opacity: 1 }}\r\n        leave={{ height: 0, opacity: 0}}>\r\n        {route =>\r\n          route !== undefined &&\r\n            (props => \r\n              <animated.div style={{ ...props}}>\r\n                {this.legends[route]}\r\n              </animated.div>)\r\n        }\r\n      </Transition>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withRouter(ColorLegend);\r\n","import React, { Component } from 'react';\r\nimport { select, easePolyOut } from 'd3';\r\nimport PropTypes from 'prop-types';\r\nimport './ScaleLegend.css';\r\n\r\nconst masterTransition = (transition) => transition.duration(800).ease(easePolyOut.exponent(4));\r\n\r\nclass ScaleLegend extends Component {\r\n  componentDidMount() {\r\n    this.parent = select(this.parentRef).style('width', '150px');\r\n    this.svg = select(this.svgRef).attr('height', 0);\r\n\r\n    this.margin = { top: 10, right: 10, bottom: 10, left: 20};\r\n    this.lineWidth = 10;\r\n    this.labelWidth = 60; // hard-coded approximation of label width for centering\r\n\r\n    this.updateData(this.props.scaleData);\r\n  }\r\n\r\n  updateData(data) {\r\n    if (!data || !data.length) return;\r\n\r\n    const fixedData = data.slice().map((d, i) => ({ ...d, i })).reverse();\r\n    const selection = this.svg.selectAll('g').data(fixedData);\r\n\r\n    const labels = data.map((circle, index) => {\r\n      let left = data[0].r + this.margin.left;\r\n      let top = data[0].r * 2 - circle.r * 2 + this.margin.top;\r\n      let width = data[0].r + this.lineWidth;\r\n      if (index === data.length - 1) {\r\n        left += circle.r;\r\n        top += circle.r;\r\n        width -= circle.r;\r\n      }\r\n\r\n      return { left, top, width };\r\n    })\r\n\r\n    // We the previous height and width to align the items properly on enter,\r\n    // otherwise it will looks like they're sliding on from the side.\r\n    const svgHeight = data[0].r * 2 + this.margin.top + this.margin.bottom;\r\n    const svgHeightChange = svgHeight - this.svg.attr('height');\r\n    const parentWidth = data[0].r * 2 + this.margin.left + this.margin.right + this.lineWidth + this.labelWidth;\r\n    const parentWidthChange = parentWidth - Number.parseInt(this.svg.style('width').replace('px', ''));\r\n\r\n    this.parent\r\n      .transition()\r\n        .call(masterTransition)\r\n        .style('width', `${parentWidth}px`)\r\n\r\n    this.svg\r\n      .transition()\r\n        .call(masterTransition)\r\n        .attr('height', svgHeight)\r\n\r\n    selection.exit()\r\n        .call(g => g.select('line')\r\n            .attr('opacity', 0))\r\n        .call(g => g.select('text')\r\n            .attr('opacity', 0))\r\n      .transition()\r\n        .call(masterTransition)\r\n        .call(g => g.select('circle')\r\n            .attr('cx', data[0].r + this.margin.left)\r\n            .attr('cy', d => data[0].r * 2 - d.r + this.margin.top)\r\n            .attr('opacity', 0))\r\n        .remove();\r\n\r\n    selection\r\n      .transition()\r\n        .call(masterTransition)\r\n        .call(g => g.select('circle')\r\n            .attr('opacity', 1)\r\n            .attr('r', d => d.r)\r\n            .attr('cx', data[0].r + this.margin.left)\r\n            .attr('cy', d => data[0].r * 2 - d.r + this.margin.top))\r\n        .call(g => g.select('line')\r\n            .attr('opacity', 1)\r\n            .attr('x1', d => labels[d.i].left)\r\n            .attr('x2', d => labels[d.i].left + labels[d.i].width)\r\n            .attr('y1', d => labels[d.i].top)\r\n            .attr('y2', d => labels[d.i].top))\r\n        .call(g => g.select('text')\r\n            .attr('opacity', 1)\r\n            .attr('x', d => labels[d.i].left + labels[d.i].width + 5)\r\n            .attr('y', d => labels[d.i].top)\r\n            .text(d => d.label))\r\n\r\n    selection.enter().append('g')\r\n        .call(g => g.append('circle')\r\n            .attr('r', d => d.r)\r\n            .attr('cx', data[0].r + this.margin.left - parentWidthChange / 2)\r\n            .attr('cy', d => data[0].r * 2 - d.r + this.margin.top - svgHeightChange)\r\n            .attr('opacity', 0))\r\n        .call(g => g.append('line')\r\n            .attr('x1', d => labels[d.i].left - parentWidthChange / 2)\r\n            .attr('x2', d => labels[d.i].left + labels[d.i].width - parentWidthChange / 2)\r\n            .attr('y1', d => labels[d.i].top - svgHeightChange)\r\n            .attr('y2', d => labels[d.i].top - svgHeightChange)\r\n            .attr('shape-rendering', 'crispEdges')\r\n            .attr('opacity', 0))\r\n        .call(g => g.append('text')\r\n            .attr('x', d => labels[d.i].left + labels[d.i].width + 5 - parentWidthChange / 2)\r\n            .attr('y', d => labels[d.i].top - svgHeightChange)\r\n            .attr('alignment-baseline', 'central')\r\n            .text(d => d.label)\r\n            .attr('opacity', 0))\r\n      .transition()\r\n        .call(masterTransition)\r\n        .call(g => g.select('circle')\r\n            .attr('cx', data[0].r + this.margin.left)\r\n            .attr('cy', d => data[0].r * 2 - d.r + this.margin.top)\r\n            .attr('opacity', 1))\r\n        .call(g => g.select('line')\r\n            .attr('x1', d => labels[d.i].left)\r\n            .attr('x2', d => labels[d.i].left + labels[d.i].width)\r\n            .attr('y1', d => labels[d.i].top)\r\n            .attr('y2', d => labels[d.i].top)\r\n            .attr('opacity', 1))\r\n        .call(g => g.select('text')\r\n            .attr('x', d => labels[d.i].left + labels[d.i].width + 5)\r\n            .attr('y', d => labels[d.i].top)\r\n            .attr('opacity', 1))\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (prevProps.scaleData !== this.props.scaleData)\r\n      this.updateData(this.props.scaleData);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"scale-legend\" ref={parent => this.parentRef = parent}>\r\n        <svg ref={svg => this.svgRef = svg} width=\"100%\" />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nScaleLegend.propTypes = {\r\n  scaleData: PropTypes.arrayOf(PropTypes.shape({\r\n    r: PropTypes.number.isRequired,\r\n    label: PropTypes.string.isRequired\r\n  }))\r\n};\r\n\r\nexport default ScaleLegend;","import React, { Component } from 'react';\r\nimport { withRouter } from 'react-router';\r\nimport Filters from './filters/Filters';\r\nimport ColorLegend from './ColorLegend';\r\nimport ScaleLegend from './ScaleLegend';\r\nimport './Sidebar.css';\r\n\r\nclass Sidebar extends Component {\r\n  render() {\r\n    const noPartners = !this.props.location.pathname.includes('partners');\r\n\r\n    return (\r\n      <div className=\"sidebar\">\r\n        <div\r\n          className=\"sidebar__top\"\r\n          style={{ visibility: (noPartners ? 'visible' : 'hidden') }}>\r\n          <Filters data={this.props.data} updateFilteredData={this.props.updateFilteredData} />\r\n        </div>\r\n        <div className=\"sidebar__bottom\">\r\n          <ScaleLegend scaleData={this.props.scaleData} />\r\n          <ColorLegend />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withRouter(Sidebar);\r\n","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Transition, animated } from 'react-spring';\r\nimport image1 from './assets/images/about/image1.png';\r\nimport image2 from './assets/images/about/image2.png';\r\nimport './About.css';\r\n\r\nclass About extends Component {\r\n  render() {\r\n    return (\r\n      <Transition\r\n        native\r\n        items={this.props.about}\r\n        from={{ background: 'rgba(0, 0, 0, 0)', opacity: 0, transform: 'translate(0, 50px)' }}\r\n        enter={{ background: 'rgba(0, 0, 0, 0.5)', opacity: 1, transform: 'translate(0, 0)' }}\r\n        leave={{ background: 'rgba(0, 0, 0, 0)', opacity: 0, transform: 'translate(0, 30px)' }}>\r\n        {about => about && (props =>\r\n          <animated.div\r\n            className=\"about-bg\"\r\n            style={{ background: props.background }}\r\n            onClick={(e) => e.target === e.currentTarget && this.props.toggleAbout()}>\r\n            <animated.div\r\n              className=\"about-content\"\r\n              style={{ opacity: props.opacity,\r\n                transform: props.transform }}>\r\n              <h1>\r\n                About\r\n              </h1>\r\n              <small>\r\n                ViableCitiesViz, version 0.7 beta [2018-12-04]\r\n              </small>\r\n              <p>\r\n                This web interface is part of ongoing development to create a visualization tool for projects and impact assessment within Viable Cities, the Swedish Strategic Innovation programme for smart sustainable cities (<a href=\"https://viablecities.com/\">viablecities.com</a>). \r\n              </p>\r\n              <p>\r\n                The data has been provided by Viable Cities; the Swedish Energy Agency; The Swedish Innovation Agency: and Formas. It includes information about signed contracts within the Viable Cities project portfolio. \r\n              </p>\r\n              <p>\r\n                ViableCitiesViz is an intermediate result from open source development within the strategic project Knowledge-sharing that develops 2017-2021. If you have questions regarding the data or are interested in beta-testing or a customization for your own organisation, please contact the project leader Charlie Gullström, KTH Viable Cities (<a href=\"mailto:charlie.gullstrom@viablecities.com\">charlie.gullstrom@viablecities.com</a>) or Mario Romero, KTH Visualization Center (<a href=\"mailto:marior@kth.se\">marior@kth.se</a>).\r\n              </p>\r\n              <p>\r\n                The design and development team has consisted of: Jonas Beckman, Charlie Gullström, Tobias Hindersson, Alex Jonsson, Victor Kesten, Åsa Minoz, Mario Romero.\r\n              </p>\r\n              <p>\r\n                This web interface is the intellectual property of Viable Cities, which claims copyright for the images presented herein. We kindly request that Viable Cities be acknowledged if pictures from this interface are quoted, copied, reproduced or distributed, refer to: <a href=\"https://viablecities.com/\">viablecities.com</a>. \r\n              </p>\r\n              <small>\r\n                This work is licensed under a <a rel=\"license\" href=\"http://creativecommons.org/licenses/by/3.0/deed.en_US\">Creative Commons Attribution 3.0 Unported License</a>.\r\n              </small>\r\n              <p className=\"about-content__repo\">\r\n                <strong>GitHub repository:</strong><br/><a href=\"https://github.com/ViableCitiesViz/viablecitiesviz.github.io\">ViableCitiesViz/viablecitiesviz.github.io</a>\r\n              </p>\r\n              <div className=\"about-content__images\">\r\n                <img src={image1} alt=\"Viable Cities logo\" />\r\n                <img src={image2} alt=\"Supporting organizations\" />\r\n              </div>\r\n            </animated.div>\r\n          </animated.div>\r\n        )}\r\n      </Transition>\r\n    );\r\n  }\r\n}\r\n\r\nAbout.propTypes = {\r\n  about: PropTypes.bool.isRequired,\r\n  toggleAbout: PropTypes.func.isRequired\r\n};\r\n\r\nexport default About;\r\n","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Spring, animated } from 'react-spring';\r\nimport './InfoBoxSection.css';\r\n\r\nclass InfoBoxSection extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      toggle: props.initToggle || false\r\n    };\r\n    this.onToggle = this.onToggle.bind(this);\r\n  }\r\n\r\n  onToggle() {\r\n    this.setState(state => ({ toggle: !state.toggle }));\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className={`info-box-section ${this.state.toggle ? 'info-box-section--toggled' : ''}`}>\r\n        <div className=\"info-box-section__title\" onClick={this.onToggle}>\r\n          <span className=\"info-box-section__title-text\">{this.props.title}</span>\r\n          <span className='info-box-section__title-cross'>\r\n            +\r\n          </span>\r\n        </div>\r\n        <Spring native from={{ height: this.state.toggle ? 'auto' : 0 }} to={{ height: this.state.toggle ? 'auto' : 0 }}>\r\n          {props => (\r\n            <animated.div className=\"info-box-section__content\" style={props}>\r\n              <div className=\"info-box-section__inner-content\">\r\n                {this.props.children}\r\n              </div>\r\n            </animated.div>\r\n          )}\r\n        </Spring>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nInfoBoxSection.propTypes = {\r\n  title: PropTypes.string,\r\n  children: PropTypes.node.isRequired,\r\n  initToggle: PropTypes.bool\r\n};\r\n\r\nexport default InfoBoxSection;\r\n","import p1 from '../assets/images/projects/1-Aktivitetsbaserad-modellering.png';\r\nimport p2 from '../assets/images/projects/2-DDS-energieffektiv-vard.jpg';\r\nimport p3 from '../assets/images/projects/3-Digitalt-kontrollerade-odlingssystem.jpg';\r\nimport p4 from '../assets/images/projects/4-Effektiv-energiplanering.jpg';\r\nimport p5 from '../assets/images/projects/5-Hotmodellering.jpg';\r\nimport p6 from '../assets/images/projects/6-Hallbara-urbana-livstillar.jpg';\r\nimport p7 from '../assets/images/projects/7-Klimatkampen-Uppsala.jpg';\r\nimport p8 from '../assets/images/projects/8-Ladda-lagra-lanka.png';\r\nimport p9 from '../assets/images/projects/9-MERiT.jpg';\r\nimport p10 from '../assets/images/projects/10-Mo-Bo.jpg';\r\nimport p11 from '../assets/images/projects/11-Matt-och-steg.jpg';\r\nimport p12 from '../assets/images/projects/12-SAMIR.jpg';\r\nimport p13 from '../assets/images/projects/13-Sensorer-for-luftmiljo.jpg';\r\nimport p14 from '../assets/images/projects/14-R-energi.JPG';\r\nimport p15 from '../assets/images/projects/15-Sharing-Cities-Sweden.jpg';\r\nimport p16 from '../assets/images/projects/16-Matbutik.jpg';\r\nimport p17 from '../assets/images/projects/17-Smart-Village.png';\r\nimport p18 from '../assets/images/projects/18-Smaskalig-elforsorjning.jpg';\r\nimport p19 from '../assets/images/projects/19-Urban-ICT-Arena.jpg';\r\nimport p20 from '../assets/images/projects/20-Vardeskapande-med-oppna-data.jpg';\r\nimport p21 from '../assets/images/projects/21-3De.jpg';\r\n\r\nexport default {\r\n  1: p1,\r\n  2: p2,\r\n  3: p3,\r\n  4: p4,\r\n  5: p5,\r\n  6: p6,\r\n  7: p7,\r\n  8: p8,\r\n  9: p9,\r\n  10: p10,\r\n  11: p11,\r\n  12: p12,\r\n  13: p13,\r\n  14: p15,\r\n  15: p14,\r\n  16: p16,\r\n  17: p17,\r\n  18: p18,\r\n  19: p19,\r\n  20: p20,\r\n  21: p21\r\n};\r\n","import React, { Component, Fragment } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport PropTypes from 'prop-types';\r\nimport { format } from 'd3';\r\nimport './InfoBox.css';\r\nimport ColorLegendItem from '../ColorLegendItem';\r\nimport InfoBoxSection from './InfoBoxSection';\r\nimport projectImages from './projectImages';\r\nimport { projectTypeColors } from '../matrix/MatrixUtility';\r\n\r\nclass InfoBox extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.lastProject = null;\r\n  }\r\n\r\n  shouldComponentUpdate(nextProps) {\r\n    if (nextProps.project !== this.props.project\r\n      || nextProps.location !== this.props.location) return true;\r\n    return false;\r\n  }\r\n\r\n  decorateItems(stringList) {\r\n    return stringList\r\n      .map(str => (<span key={str} className=\"info-box__item-decoration\">{str}</span> ))\r\n      .reduce((acc, cur) => [acc, ', ', cur]);\r\n  }\r\n\r\n  render() {\r\n    if (!this.props.project && !this.lastProject) return null;\r\n\r\n    const project = this.props.project || this.lastProject;\r\n    if (this.props.project !== null)\r\n      this.lastProject = this.props.project;\r\n\r\n    const {\r\n      project_title,\r\n      project_organization,\r\n      project_id,\r\n      budget,\r\n      project_manager,\r\n      dates,\r\n      keywords,\r\n      other_financiers,\r\n      other_recipients,\r\n      description,\r\n      project_type,\r\n      locations,\r\n      link,\r\n      website\r\n    } = project.survey_answers;\r\n\r\n    const partners = [...new Set([...other_financiers, ...other_recipients])].sort();\r\n\r\n    const views = {\r\n      Map: { link: `/map/project/${project_id}`, match: '/map' },\r\n      Matrix: { link: `/matrix/project/${project_id}`, match: '/matrix' },\r\n      Partners: { link: `/partners/project/${project_id}`, match: '/partners' }\r\n    }\r\n\r\n    const vizViews = Object.keys(views).map(viewName => {\r\n      const view = views[viewName];\r\n      const match = this.props.location.pathname.includes(view.match);\r\n      return (\r\n        <Link\r\n          key={viewName}\r\n          to={view.link}\r\n          className={`info-box__view-link ${match ? 'info-box__view-link--active' : ''}`}>\r\n          {viewName}\r\n        </Link>\r\n      );\r\n    });\r\n\r\n    return (\r\n      <div className=\"info-box\">\r\n        <div className=\"info-box__splash\" style={{ backgroundImage: `url(${projectImages[project_id]})` }} />\r\n        <div className=\"info-box__content\">\r\n          <div className=\"info-box__content-header\">\r\n            <h2 className=\"info-box__title\">{project_title}</h2>\r\n            <h3 className=\"info-box__subtitle\">{locations.join(', ')}</h3>\r\n          </div>\r\n          <div>\r\n            <InfoBoxSection title=\"Generell Information\" initToggle={true}>\r\n              <dl>\r\n                <dt>Typ av projekt</dt>\r\n                <dd>\r\n                  <ColorLegendItem text={project_type} color={projectTypeColors(project_type)} />\r\n                </dd>\r\n\r\n                <dt>Projektorganisation</dt>\r\n                <dd>{project_organization}</dd>\r\n\r\n                <dt>Projektledare</dt>\r\n                <dd>{project_manager}</dd>\r\n\r\n                <dt>Total projektbudget</dt>\r\n                <dd>{`${format(',')(budget.total_cost).replace(/,/g, ' ')} kr`}</dd>\r\n\r\n                <dt>Sökt bidrag</dt>\r\n                <dd>{`${format(',')(budget.funded).replace(/,/g, ' ')} kr`}</dd>\r\n\r\n                <dt>Projekttid</dt>\r\n                <dd>{`${dates.start} - ${dates.end}`}</dd>\r\n\r\n                <dt>Projektsida</dt>\r\n                <dd><a href={link}>{link}</a></dd>\r\n\r\n                {website &&\r\n                  <Fragment>\r\n                    <dt>Hemsida</dt>\r\n                    <dd><a href={website}>{website}</a></dd>\r\n                  </Fragment>}\r\n\r\n              </dl>\r\n            </InfoBoxSection>\r\n\r\n            <InfoBoxSection title=\"Nyckelord\">\r\n              <p>\r\n                {this.decorateItems(keywords)}\r\n              </p>\r\n            </InfoBoxSection>\r\n\r\n            <InfoBoxSection title=\"Partners\">\r\n              <p>\r\n                {this.decorateItems(partners)}\r\n              </p>\r\n            </InfoBoxSection>\r\n\r\n            <InfoBoxSection title=\"Beskrivning\">\r\n              <p>\r\n              {description.split('\\n').map((item, key) => {\r\n                return <Fragment key={key}>{item}<br/></Fragment>\r\n              })}\r\n            </p>\r\n            </InfoBoxSection>\r\n          </div>\r\n\r\n          <div className=\"info-box__views\">\r\n            {vizViews}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nInfoBox.propTypes = {\r\n  project: PropTypes.object\r\n};\r\n\r\nexport default InfoBox;","import React, { Component } from 'react';\r\nimport { withRouter } from 'react-router';\r\nimport { Transition, animated } from 'react-spring';\r\nimport PropTypes from 'prop-types';\r\nimport InfoBox from './InfoBox';\r\nimport './AnimatedInfoBox.css';\r\n\r\nclass AnimatedInfoBox extends Component {\r\n  shouldComponentUpdate(nextProps, nextState) {\r\n    if (nextProps.data !== this.props.data\r\n      || nextProps.id !== this.props.id\r\n      || nextProps.location !== this.props.location) return true;\r\n    return false;\r\n  }\r\n\r\n  render() {\r\n    const projectDetails = this.props.data.data\r\n      .reduce((acc, cur) => ({ ...acc, [cur.survey_answers.project_id]: <InfoBox project={cur} location={this.props.location} /> }), {});\r\n\r\n    return (\r\n      <Transition\r\n        native\r\n        items={this.props.id}\r\n        from={{ opacity: 0, transform: 'translateX(80%)' }}\r\n        enter={{ opacity: 1, transform: 'translateX(0)' }}\r\n        leave={{ opacity: 0, transform: 'translateX(70%)'}}>\r\n        {id =>\r\n          id !== -1 &&\r\n            (props => \r\n              <animated.div className=\"info-box-container\" style={{ ...props}}>\r\n                {projectDetails[id]}\r\n              </animated.div>)\r\n        }\r\n      </Transition>\r\n    );\r\n  }\r\n}\r\n\r\nAnimatedInfoBox.propTypes = {\r\n  data: PropTypes.object,\r\n  id: PropTypes.number\r\n}\r\n\r\nexport default withRouter(AnimatedInfoBox);\r\n","import React, { Component } from 'react';\r\nimport { BrowserRouter as Router, Route, Redirect, Switch } from \"react-router-dom\";\r\nimport Header from './Header';\r\nimport Matrix from './matrix/Matrix';\r\nimport Map from './map/Map';\r\nimport Partners from './partners/Partners'\r\nimport Sidebar from './Sidebar';\r\nimport About from './About';\r\nimport AnimatedInfoBox from './info-box/AnimatedInfoBox';\r\nimport { GetProjectId } from './ProjectNavigator';\r\nimport mockData from './assets/data/mock-data-v8.json';\r\nimport './App.css';\r\nimport 'react-widgets/dist/css/react-widgets.css';\r\n\r\n\r\nclass App extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      filteredData: mockData,\r\n      scaleData: null,\r\n      about: false\r\n    };\r\n\r\n    this.updateFilteredData = this.updateFilteredData.bind(this);\r\n    this.updateScaleData = this.updateScaleData.bind(this);\r\n    this.toggleAbout = this.toggleAbout.bind(this);\r\n  }\r\n\r\n  updateFilteredData(newData) {\r\n    this.setState({\r\n      filteredData: newData\r\n    });\r\n  }\r\n\r\n  updateScaleData(newData) {\r\n    this.setState({\r\n      scaleData: newData\r\n    });\r\n  }\r\n\r\n  toggleAbout() {\r\n    this.setState(state => ({\r\n      about: !state.about\r\n    }));\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Router basename={process.env.PUBLIC_URL}>\r\n        <div className=\"App\">\r\n          <Header toggleAbout={this.toggleAbout} />\r\n          <div className=\"App__content\">\r\n            <About toggleAbout={this.toggleAbout} about={this.state.about} />\r\n            <Sidebar data={mockData} updateFilteredData={this.updateFilteredData} scaleData={this.state.scaleData} />\r\n            <Switch>\r\n              <Route path=\"/\" exact render={props => (\r\n                <Redirect to=\"/matrix\" />\r\n              )}/>\r\n              <Route path=\"/map\" render={props => (\r\n                <Map data={mockData} filteredData={this.state.filteredData} updateScaleData={this.updateScaleData} />\r\n              )}/>\r\n              <Route path=\"/matrix\" render={props => (\r\n                <Matrix data={mockData} filteredData={this.state.filteredData} updateScaleData={this.updateScaleData} />\r\n              )}/>\r\n              <Route path=\"/partners\" render={props => (\r\n                <Partners updateScaleData={this.updateScaleData} />\r\n              )}/>\r\n            </Switch>\r\n            <Route render={props => (\r\n              <AnimatedInfoBox\r\n                data={mockData}\r\n                id={Number.parseInt(GetProjectId(props.location))}/>\r\n            )}/>\r\n          </div>\r\n        </div>\r\n      </Router>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","// In production, we register a service worker to serve assets from local cache.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\r\n// cached resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\r\n// This link also includes instructions on opting out of this behavior.\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://goo.gl/SC7cgQ'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not local host. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the old content will have been purged and\r\n              // the fresh content will have been added to the cache.\r\n              // It's the perfect time to display a \"New content is\r\n              // available; please refresh.\" message in your web app.\r\n              console.log('New content is available; please refresh.');\r\n\r\n              // Execute callback\r\n              if (config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      if (\r\n        response.status === 404 ||\r\n        response.headers.get('content-type').indexOf('javascript') === -1\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","// NOTE: This polyfill causes gh-pages to not work \"Page build failure\"\r\n// It's still valuable though, giving browser compatability with ie11.\r\n// So put it back if the website is ever moved away from github pages.\r\n//import 'react-app-polyfill/ie11';\r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: http://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n","module.exports = \"data:image/png;base64,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\"","module.exports = __webpack_public_path__ + \"static/media/image2.6026cdaf.png\";","module.exports = __webpack_public_path__ + \"static/media/1-Aktivitetsbaserad-modellering.1074af03.png\";","module.exports = __webpack_public_path__ + \"static/media/2-DDS-energieffektiv-vard.289abdde.jpg\";","module.exports = __webpack_public_path__ + \"static/media/3-Digitalt-kontrollerade-odlingssystem.1d19642a.jpg\";","module.exports = __webpack_public_path__ + \"static/media/4-Effektiv-energiplanering.ea5820f2.jpg\";","module.exports = __webpack_public_path__ + \"static/media/5-Hotmodellering.b9fbeb16.jpg\";","module.exports = __webpack_public_path__ + \"static/media/6-Hallbara-urbana-livstillar.0c4ecf15.jpg\";"],"sourceRoot":""}