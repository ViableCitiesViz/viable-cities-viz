{"version":3,"sources":["assets/images/projects/9-MERiT.jpg","assets/images/projects/10-Mo-Bo.jpg","assets/images/projects/11-Matt-och-steg.jpg","assets/images/projects/12-SAMIR.jpg","assets/images/projects/13-Sensorer-for-luftmiljo.jpg","assets/images/projects/14-R-energi.JPG","assets/images/projects/15-Sharing-Cities-Sweden.jpg","assets/images/projects/16-Matbutik.jpg","assets/images/projects/17-Smart-Village.png","assets/images/projects/18-Smaskalig-elforsorjning.jpg","assets/images/projects/19-Urban-ICT-Arena.jpg","assets/images/projects/20-Vardeskapande-med-oppna-data.jpg","assets/images/projects/21-3De.jpg","Header.jsx","matrix/MatrixUtility.js","matrix/MatrixTooltip.jsx","ProjectNavigator.js","matrix/Matrix.jsx","map/Map.jsx","partners/Partners.jsx","filters/Matchmaking.jsx","filters/Filters.jsx","ColorLegendItem.jsx","ColorLegend.jsx","ScaleLegend.jsx","Sidebar.jsx","info-box/InfoBoxSection.jsx","info-box/projectImages.js","info-box/InfoBox.jsx","info-box/AnimatedInfoBox.jsx","App.jsx","serviceWorker.js","index.js","assets/images/projects/1-Aktivitetsbaserad-modellering.png","assets/images/projects/2-DDS-energieffektiv-vard.jpg","assets/images/projects/3-Digitalt-kontrollerade-odlingssystem.jpg","assets/images/projects/4-Effektiv-energiplanering.jpg","assets/images/projects/5-Hotmodellering.jpg","assets/images/projects/6-Hallbara-urbana-livstillar.jpg","assets/images/projects/7-Klimatkampen-Uppsala.jpg","assets/images/projects/8-Ladda-lagra-lanka.png"],"names":["module","exports","__webpack_require__","p","Header","_this","this","viewLinks","map","view","match","props","location","pathname","includes","toLowerCase","react_default","a","createElement","key","className","concat","Link","to","href","Component","withRouter","col2focus","1","2","3","4","theme2row","testbeds","innovation","financing","management","intelligence","row2theme","5","focusLabel","themeLabel","type2class","Forskningsprojekt","Innovationsprojekt","Förstudie","circleRadius","area","Math","sqrt","PI","projectTypes","projectTypeColors","scaleOrdinal","range","rgb","domain","parseNewlinesY","texts","each","text","select","words","split","x","attr","dy","parseFloat","i","forEach","word","append","length","parseNewlinesX","y","MatrixTooltip","nextProps","project","style","top","margin","r","offset","left","survey_answers","project_title","ProjectNavigator","rootPath","arguments","undefined","Object","classCallCheck","_hasChangedSinceInit","history","replace","matchPath","path","exact","push","id","filteredData","GetProjectId","data","find","d","project_id","prevLocation","params","masterTransition","transition","duration","ease","easePolyOut","exponent","Matrix","possibleConstructorReturn","getPrototypeOf","call","state","hoveredProject","right","bottom","projectNavigator","draw","bind","assertThisInitialized","_this2","svg","svgRef","svgInner","classed","scaleX","scalePoint","padding","scaleY","circles","on","event","target","tagName","goToRoot","debounce","window","addEventListener","prevProps","prevState","updateHovered","updateClicked","isEqual","updateData","setState","removeEventListener","init","height","svgWrapperRef","clientHeight","width","clientWidth","projectExists","optimalHeight","optimalWidth","selectors","yAxis","themesLabel","xAxis","focusAreasLabel","keys","s","axisLeft","tickSize","yAxisSelection","selection","selectAll","empty","e","axisTop","xAxisSelection","prevProject","projectId","prevProjectId","hasChangedSinceInit","change","datum","neighborSelector","pins","pin","row","col","join","redirectToRoot","_this3","packedData","obj","_loop","theme","budget","funded","maxEnclose","packSiblings","max","packEnclose","rScale","min","step","arr","_loop2","_loop3","objectSpread","packData","updateScaleData","sortedPackedData","toConsumableArray","sort","b","minBudget","maxBudget","labelNumbers","circleRadii","Number","parseInt","toPrecision","label","format","buildScaleData","circle","exit","remove","enter","project_type","goToProject","_this4","ref","svgWrapper","src_matrix_MatrixTooltip","Map","scaleLegendDebounce","updateScaleLegend","zoom","d3","scaleExtent","zoomed2","g","transform","projection","rotate","scale","center","translate","cities_container","projects","tooltip","tooltip2","tooltip3","tooltip3_showed","project_count_city","cities_circles","cities","coordinates","html","name","offsetX","offsetY","mockData","topojson","europe","objects","features","sweden","subunits","dat","mockData_real","tetra","da","leng","locations","j","JSON","parse","stringify","loc_circles","tetr","ob","xx_loc","ab","xx","k","tt","xxx","project_circles","node","c","project_coordinates","cx","t","apply","tx","afa","circle_transform","circle_size_increase","project_size_increase","getAttribute","radius","_this5","Partners","omrade_titles","0","helix_colors","helix_colors_borders","omrade_titles_x","omrade_titles_y","projectSpace","projspace_title_x","projspace_title_y","project_no","bubbles","nodes","view_option","forceStrength","createNewNodes","button_collection","normal_button","move_bubbles","helix_button","partners","projspace_title","omradeCenters","simulation","velocityDecay","force","strength","charge","ticked","stop","maxAmount","total_amount","radiusScale","bubblesE","kategori","filter","organisation","merge","omradeData","years","temp_str","projData2","projTitlesObj","opt","omrade_view","project_view","alpha","restart","toggle_title","projs","pow","proj_opt","rawData","q_o","Civilsamhälle","Forskning","Näringsliv","Offentlig verksamhet","myNodes","Organisation","value","random","Projects","Kategori","scaleFactor","Matchmaking","expanded","handleChange","position","substring","parsePosition","valueCopy","index","findIndex","item","splice","checked","onChange","rows","ROWS","COLS","type","isChecked","disabled","enabled","columns","defaultProps","intersection","_len","Array","_key","_intersection","ListItem","_ref","count","Filters","filteredBy","titles","keywords","matchmaking","filterValues","prevFilteredData","componentData","projectLocations","projectPartners","projectKeywords","Set","add","other_financiers","financier","other_recipients","recipient","keyword","filterBy","some","has","partner","every","values","entries","_ref2","_ref3","slicedToArray","_ref4","_ref5","filteredByAllExcept","ret","set","get","reduce","_ref6","_ref7","_ref8","_ref9","_ref10","_ref11","colRange","nonEmpty","nextState","newFilteredData","updateFilteredData","buildTitlesList","buildLocationList","buildPartnerList","buildKeywordList","buildMatchmakingList","lib","placeholder","valueField","textField","itemComponent","src_filters_Matchmaking","react","onClick","_ref12","_ref13","defineProperty","ColorLegendItem","color","background","RouteColorLegend","items","labels","src_ColorLegendItem","ColorLegend","matrixLabels","partnersLabels","legends","matrix","route","web","native","from","opacity","leave","div","ScaleLegend","parent","parentRef","lineWidth","labelWidth","scaleData","fixedData","slice","reverse","prevSvgHeight","svgHeight","svgHeightChange","prevParentWidth","parentWidth","parentWidthChange","Sidebar","src_filters_Filters","src_ScaleLegend_0","src_ColorLegend_0","InfoBoxSection","toggle","initToggle","onToggle","title","children","projectImages","p1","p2","p3","p4","p5","6","p6","7","p7","8","p8","9","p9","10","p10","11","p11","12","p12","13","p13","14","p15","15","p14","16","p16","17","p17","18","p18","19","p19","20","p20","21","p21","InfoBox","lastProject","stringList","str","acc","cur","_project$survey_answe","project_organization","project_manager","dates","description","views","link","vizViews","viewName","backgroundImage","src_info_box_InfoBoxSection","total_cost","start","end","decorateItems","AnimatedInfoBox","projectDetails","src_info_box_InfoBox","App","newData","BrowserRouter","basename","process","src_Header_0","src_Sidebar_0","Switch","Route","render","Redirect","src_map_Map","src_matrix_Matrix","partners_Partners","src_info_box_AnimatedInfoBox","Boolean","hostname","ReactDOM","src_App_0","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"6EAAAA,EAAAC,QAAiBC,EAAAC,EAAuB,yDCAxCH,EAAAC,QAAiBC,EAAAC,EAAuB,0DCAxCH,EAAAC,QAAiBC,EAAAC,EAAuB,kECAxCH,EAAAC,QAAiBC,EAAAC,EAAuB,0DCAxCH,EAAAC,QAAiBC,EAAAC,EAAuB,2ECAxCH,EAAAC,QAAiBC,EAAAC,EAAuB,6DCAxCH,EAAAC,QAAiBC,EAAAC,EAAuB,0ECAxCH,EAAAC,QAAiBC,EAAAC,EAAuB,6DCAxCH,EAAAC,QAAiBC,EAAAC,EAAuB,kECAxCH,EAAAC,QAAiBC,EAAAC,EAAuB,4ECAxCH,EAAAC,QAAiBC,EAAAC,EAAuB,oECAxCH,EAAAC,QAAiBC,EAAAC,EAAuB,iFCAxCH,EAAAC,QAAiBC,EAAAC,EAAuB,8x3BCKlCC,2LACK,IAAAC,EAAAC,KAEDC,EADQ,CAAC,MAAO,SAAU,YACRC,IAAI,SAAAC,GAC1B,IAAMC,EAAQL,EAAKM,MAAMC,SAASC,SAASC,SAASL,EAAKM,eACzD,OACEC,EAAAC,EAAAC,cAAA,MAAIC,IAAKV,EACPW,UAAS,sBAAAC,OAAwBX,EAAQ,6BAA+B,KACxEM,EAAAC,EAAAC,cAACI,EAAA,EAAD,CAAMC,GAAE,IAAAF,OAAMZ,EAAKM,gBAChBN,MAMT,OACEO,EAAAC,EAAAC,cAAA,OAAKE,UAAU,UACbJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,kBACbJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,wBACbJ,EAAAC,EAAAC,cAAA,MAAIE,UAAU,gBACXb,IAGLS,EAAAC,EAAAC,cAAA,OAAKE,UAAU,yBACbJ,EAAAC,EAAAC,cAAA,MAAIE,UAAU,gBACZJ,EAAAC,EAAAC,cAAA,MAAIE,UAAU,sBAAqBJ,EAAAC,EAAAC,cAAA,KAAGM,KAAK,KAAR,qBAzB5BC,cAkCNC,cAAWtB,0BCrCbuB,EAAY,CACvBC,EAAG,kBACHC,EAAG,iBACHC,EAAG,iBACHC,EAAG,wBAGQC,EAAY,CACvBC,SAAU,EACVC,WAAY,EACZC,UAAW,EACXC,WAAY,EACZC,aAAc,GAGHC,EAAY,CACvBV,EAAG,WACHC,EAAG,aACHC,EAAG,YACHC,EAAG,aACHQ,EAAG,gBAGQC,EAAa,CACxBZ,EAAG,2BACHC,EAAG,gCACHC,EAAG,mCACHC,EAAG,6BAGQU,EAAa,CACxBb,EAAG,iCACHC,EAAG,qCACHC,EAAG,wCACHC,EAAG,WACHQ,EAAG,4CAGQG,EAAa,CACxBC,kBAAqB,WACrBC,mBAAsB,aACtBC,eAAa,YAGR,SAASC,EAAaC,GAC3B,OAAOC,KAAKC,KAAKF,EAAOC,KAAKE,IAGxB,IAAMC,EAAe,CAAC,oBAAqB,qBAAsB,gBAC3DC,EAAoBC,cAC9BC,MAAM,CAACC,YAAI,EAAG,IAAK,KAAMA,YAAI,IAAK,IAAK,KAAMA,YAAI,IAAK,IAAK,KAC3DC,OAAOL,GAuGH,SAASM,EAAeC,GAC7BA,EAAMC,KAAK,WACT,IAAMC,EAAOC,YAAOvD,MACdwD,EAAQF,EAAKA,OAAOG,MAAM,QAC1BC,EAAIJ,EAAKK,KAAK,KACdC,EAAKC,WAAWP,EAAKK,KAAK,OAChCL,EAAKA,KAAK,MACV,IACIQ,EAAI,EACRN,EAAMO,QAAQ,SAAAC,GACZV,EAAKW,OAAO,SACPX,KAAKU,GACLL,KAAK,IAAKD,GACVC,KAAK,IAHV,IAAA5C,OAHiB,KAMGyC,EAAMU,OAAS,GAAkB,EAHrD,OAIKP,KAAK,KAJV,GAAA5C,OAImB6C,EAPF,IAOQE,IAJzB,WAQC,SAASK,EAAef,GAC7BA,EAAMC,KAAK,WACT,IAAMC,EAAOC,YAAOvD,MAAM2D,KAAK,cAAe,SACxCH,EAAQF,EAAKA,OAAOG,MAAM,QAC1BW,EAAId,EAAKK,KAAK,KACdC,EAAKC,WAAWP,EAAKK,KAAK,OAChCL,EAAKA,KAAK,MACV,IACIQ,EAAI,EACRN,EAAMO,QAAQ,SAAAC,GACZV,EAAKW,OAAO,SACPX,KAAKU,GACLL,KAAK,IAAK,GACVA,KAAK,KAHV,GAAA5C,OAGmB6C,EANF,IAMQE,IAHzB,SAKFR,EAAKK,KAAK,YAAV,eAAA5C,OAAsCqD,EAAtC,4BAAArD,QAAmEqD,EAAnE,qBCnJWC,wMAnCSC,GACpB,OAAIA,EAAUC,UAAYvE,KAAKK,MAAMkE,yCAKrC,OAAKvE,KAAKK,MAAMkE,QAGd7D,EAAAC,EAAAC,cAAA,OACEE,UAAU,iBACV0D,MAAO,CACLC,IAAKzE,KAAKK,MAAMkE,QAAQH,EAAIpE,KAAKK,MAAMqE,OAAOD,IAAMzE,KAAKK,MAAMkE,QAAQI,EAf/D,GAe+E3E,KAAKK,MAAMuE,OAAOR,EACzGS,KAAM7E,KAAKK,MAAMkE,QAAQb,EAAI1D,KAAKK,MAAMqE,OAAOG,KAAO7E,KAAKK,MAAMuE,OAAOlB,IAEzE1D,KAAKK,MAAMkE,QAAQO,eAAeC,eATP,YAPR5D,wDCDtB6D,aACJ,SAAAA,IAA2B,IAAfC,EAAeC,UAAAhB,OAAA,QAAAiB,IAAAD,UAAA,GAAAA,UAAA,GAAJ,GAAIE,OAAAC,EAAA,EAAAD,CAAApF,KAAAgF,GACzBhF,KAAKiF,SAAWA,EAChBjF,KAAKsF,sBAAuB,oEAW5B,OAAOtF,KAAKsF,sDAIZtF,KAAKsF,sBAAuB,yCAGfC,GACbA,EAAQC,QAAQxF,KAAKiF,2CAGdM,EAASjF,GAC2D,OAAvEmF,YAAUnF,EAASC,SAAU,CAAEmF,KAAM1F,KAAKiF,SAAUU,OAAO,MAC7D3F,KAAKsF,sBAAuB,EAC5BC,EAAQK,KAAK5F,KAAKiF,+CAIVM,EAASjF,EAAUuF,GAC7B,IAAMH,EAAI,GAAA3E,OAAMf,KAAKiF,SAAX,aAAAlE,OAA+B8E,GACM,OAA3CJ,YAAUnF,EAASC,SAAU,CAAEmF,WACjC1F,KAAKsF,sBAAuB,EAC5BC,EAAQK,KAAKF,0CAIHpF,EAAUwF,GACtB,IAAMD,EAAKb,EAAiBe,aAAazF,GACzC,QAAIwF,EAAaE,KAAKC,KAAK,SAAAC,GAAC,OAAIA,EAAEpB,eAAeqB,aAAeN,8CAKhDvF,EAAU8F,GAC1B,OAAOpB,EAAiBe,aAAazF,KAAc0E,EAAiBe,aAAaK,0CA1C/D9F,GAClB,IAAMF,EAAQqF,YAAUnF,EAASC,SAAU,CAAEmF,KAAI,kBACjD,OAAc,OAAVtF,EACKA,EAAMiG,OAAOR,IACd,WA0CCE,EAAef,EAAiBe,aAC9Bf,IC/CTsB,UAAmB,SAACC,GAAD,OAAgBA,EAAWC,SAAS,KAAKC,KAAKC,IAAYC,SAAS,MAEtFC,cACJ,SAAAA,EAAYvG,GAAO,IAAAN,EAAA,OAAAqF,OAAAC,EAAA,EAAAD,CAAApF,KAAA4G,IACjB7G,EAAAqF,OAAAyB,EAAA,EAAAzB,CAAApF,KAAAoF,OAAA0B,EAAA,EAAA1B,CAAAwB,GAAAG,KAAA/G,KAAMK,KACD2G,MAAQ,CACXC,eAAgB,MAGlBlH,EAAK2E,OAAS,CAAED,IAAK,IAAKyC,MAAO,GAAIC,OAAQ,GAAItC,KAAM,KACvD9E,EAAK6E,OAAS,CAAElB,EAAG,EAAIU,EAAG,GAC1BrE,EAAKqH,iBAAmB,IAAIpC,EAAiB,WAC7CjF,EAAKsH,KAAOtH,EAAKsH,KAAKC,KAAVlC,OAAAmC,EAAA,EAAAnC,QAAAmC,EAAA,EAAAnC,CAAArF,KATKA,mFAYC,IAAAyH,EAAAxH,KAClBA,KAAKyH,IAAMlE,YAAOvD,KAAK0H,QAGvB1H,KAAK2H,SAAW3H,KAAKyH,IAClBxD,OAAO,KACL2D,QAAQ,oBAAoB,GAEjC5H,KAAK6H,OAASC,cACT5E,OAAO,CAAC,EAAE,EAAE,EAAE,IACd6E,QAAQ,IACb/H,KAAKgI,OAASF,cACT5E,OAAO,CAAC,EAAE,EAAE,EAAE,EAAE,IAChB6E,QAAQ,IAGb/H,KAAK2H,SAAS1D,OAAO,KAChB2D,QAAQ,iBAAiB,GAG9B5H,KAAK2H,SAAS1D,OAAO,QAChB2D,QAAQ,gBAAgB,GACxBA,QAAQ,qBAAqB,GAC7BtE,KAAK,SAGVtD,KAAK2H,SAAS1D,OAAO,KAChB2D,QAAQ,iBAAiB,GAG9B5H,KAAK2H,SAAS1D,OAAO,QAChB2D,QAAQ,qBAAqB,GAC7BA,QAAQ,qBAAqB,GAC7BtE,KAAK,mBAGVtD,KAAKiI,QAAUjI,KAAK2H,SAAS1D,OAAO,KAAK2D,QAAQ,WAAW,GAC5D5H,KAAKqH,MAAK,GAGVrH,KAAKyH,IAAIS,GAAG,QAAS,WACU,WAAzBC,IAAMC,OAAOC,SACfb,EAAKJ,iBAAiBkB,SAASd,EAAKnH,MAAMkF,QAASiC,EAAKnH,MAAMC,YAIlEN,KAAKuI,SAAWA,IAAS,kBAAMf,EAAKH,QAAQ,KAC5CmB,OAAOC,iBAAiB,SAAUzI,KAAKuI,qDAGtBG,EAAWC,GAC5B3I,KAAK4I,cAAc5I,KAAKgH,MAAMC,eAAgB0B,EAAU1B,gBACxDjH,KAAK6I,cAAc7I,KAAKK,MAAOqI,GAE1BI,IAAQ9I,KAAKK,MAAMyF,aAAc4C,EAAU5C,gBAC9C9F,KAAK+I,WAAW/I,KAAKK,MAAMyF,cAC3B9F,KAAKgJ,SAAS,CACZ/B,eAAgB,OAElBjH,KAAKoH,iBAAiBkB,SAAStI,KAAKK,MAAMkF,QAASvF,KAAKK,MAAMC,0DAKhEkI,OAAOS,oBAAoB,SAAUjJ,KAAKuI,UAC1CvI,KAAKyH,IAAIS,GAAG,QAAS,qCAGJ,IAAdgB,EAAchE,UAAAhB,OAAA,QAAAiB,IAAAD,UAAA,IAAAA,UAAA,GACbiE,GAAUnJ,KAAKoJ,cAAcC,aAAerJ,KAAK0E,OAAOD,IAAMzE,KAAK0E,OAAOyC,OAC1EmC,GAAStJ,KAAKoJ,cAAcG,YAAcvJ,KAAK0E,OAAOG,KAAO7E,KAAK0E,OAAOwC,MAGzElH,KAAKoH,iBAAiBoC,cAAcxJ,KAAKK,MAAMC,SAAUN,KAAKK,MAAMyF,gBAAewD,GAAS,KAEhG,IAGQG,EAAwB,EAARH,EADF,EAEdI,EAFc,EAECP,EAEhBM,EAAgBzJ,KAAK0E,OAAOD,IAAMzE,KAAK0E,OAAOyC,QAAWnH,KAAKoJ,cAAcC,cAC/ErJ,KAAK4E,OAAS,CAAElB,EAAG,EAAGU,GAAI+E,EAASM,GAAiB,GACpDN,EAASM,IAETzJ,KAAK4E,OAAS,CAAElB,GAAI4F,EAAQI,GAAgB,EAAGtF,EAAG,GAClDkF,EAAQI,GAKZ1J,KAAK6H,OAAO7E,MAAM,CAAC,EAAGsG,IACtBtJ,KAAKgI,OAAOhF,MAAM,CAAC,EAAGmG,IAGtB,IAAMQ,EAAY,CAChBhC,SAAU3H,KAAK2H,SACfiC,MAAO5J,KAAK2H,SAASpE,OAAO,mBAC5BsG,YAAa7J,KAAK2H,SAASpE,OAAO,qBAClCuG,MAAO9J,KAAK2H,SAASpE,OAAO,mBAC5BwG,gBAAiB/J,KAAK2H,SAASpE,OAAO,2BAEnC2F,GACH9D,OAAO4E,KAAKL,GAAW5F,QAAQ,SAAAkG,GAAC,OAAIN,EAAUM,GAAKN,EAAUM,GAAG1D,aAAaQ,KAAKT,KAEpFqD,EAAUhC,SACLhE,KAAK,YADV,aAAA5C,OACoCf,KAAK4E,OAAOlB,EADhD,MAAA3C,OACsDf,KAAK4E,OAAOR,EADlE,MAIAuF,EAAUE,YACLlG,KAAK,YADV,iBAAA5C,OACwCf,KAAK0E,OAAOD,IAAM0E,EAAS,EADnE,iBAIAQ,EAAUI,gBACLpG,KAAK,YADV,aAAA5C,OACoCf,KAAK0E,OAAOG,KAAOyE,EAAQ,EAD/D,UAmBAK,EAAUC,MACLjG,KAAK,YADV,aAAA5C,OACoCuI,EAAQtJ,KAAK0E,OAAOG,KADxD,MAAA9D,OACiEf,KAAK0E,OAAOD,IAD7E,MAEKsC,KAAKmD,YAASlK,KAAKgI,QAAQmC,SAASb,IACzC,IAAMc,EAAiBT,EAAUC,MAAMS,UAAYV,EAAUC,MAAMS,YAAcV,EAAUC,MAC3F,GAAIQ,EAAeE,UAAU,oBAAoBC,QAC/CH,EACKrD,KAAK,SAAAyD,GAAC,OAAIA,EAAEF,UAAU,cAAc3G,KAAK,UAAW,UACpDoD,KAAK,SAAAyD,GAAC,OAAIA,EAAEjH,OAAO,WAAWI,KAAK,UAAW,UAChD2G,UAAU,SACVrG,OAAO,QACL2D,QAAQ,SAAS,GACjBtE,KAAK,SAAAQ,GAAC,OAAI3B,EAAW2B,KACrBH,KAAK,OAAQ,gBACbA,KAAK,KAAM2F,EAhBE,IAiBb3F,KAAK,KAAM,UACXoD,KAAK5D,OACL,CACL,IAAMO,GAAK4F,EApBO,GAqBlBK,EAAUC,MAAMU,UAAU,oBACrB3G,KAAK,IAAKD,GACZ4G,UAAU,SACR3G,KAAK,IAAKD,GAIjBiG,EAAUG,MACLnG,KAAK,YADV,aAAA5C,OACoCf,KAAK0E,OAAOG,KADhD,MAAA9D,OACyDoI,EAASnJ,KAAK0E,OAAOD,IAD9E,MAEKsC,KAAK0D,YAAQzK,KAAK6H,QAAQsC,SAAShB,IACxC,IAAMuB,EAAiBf,EAAUG,MAAMO,UAAYV,EAAUG,MAAMO,YAAcV,EAAUG,MAC3F,GAAIY,EAAeJ,UAAU,oBAAoBC,QAC/CG,EACK3D,KAAK,SAAAyD,GAAC,OAAIA,EAAEF,UAAU,cAAc3G,KAAK,UAAW,UACpDoD,KAAK,SAAAyD,GAAC,OAAIA,EAAEjH,OAAO,WAAWI,KAAK,UAAW,UAChD2G,UAAU,SACVrG,OAAO,QACL2D,QAAQ,SAAS,GACjBtE,KAAK,SAAAQ,GAAC,OAAI5B,EAAW4B,KACrBH,KAAK,OAAQ,gBACbA,KAAK,KAAMwF,EAzCE,IA0CbxF,KAAK,KAAM,OACXoD,KAAK5C,OACL,CACL,IAAMC,GAAK+E,EA7CO,GA8ClBQ,EAAUG,MAAMQ,UAAU,oBACrB3G,KAAK,IAAKS,GACVT,KAAK,YAFV,eAAA5C,OAEsCqD,EAFtC,4BAAArD,QAEmEqD,EAFnE,MAKFpE,KAAK+I,WAAW/I,KAAKK,MAAMyF,oDAGfvB,EAASoG,GACjBpG,IAAYoG,IAGI,OAAhBA,GACF3K,KAAKiI,QAAQqC,UAAU,UAClB1C,QAAQ,SAAS,GAER,OAAZrD,GACFvE,KAAKiI,QAAQqC,UAAb,aAAAvJ,OAAoCwD,EAAQO,eAAeqB,WAA3D,OACKyB,QAAQ,SAAS,0CAGZvH,EAAOqI,GACnB,IAAIkC,EAAY5F,EAAiBe,aAAa1F,EAAMC,UAChDuK,EAAgB7F,EAAiBe,aAAa2C,EAAUpI,UAU5D,GALKN,KAAKoH,iBAAiB0D,wBACzBD,GAAiB,EACjB7K,KAAKoH,iBAAiB2D,UAGpBH,IAAcC,MAGE,IAAfD,IAAuC,IAAnBC,IAAyC,IAAfD,IAAuC,IAAnBC,IACrE7K,KAAKqH,QAGgB,IAAnBwD,GAAwB7K,KAAKyH,IAAIG,QAAQ,aAC3C5H,KAAKyH,IAAIG,QAAQ,WAAW,GAC5B5H,KAAKiI,QAAQqC,UAAU,aAClB1C,QAAQ,YAAY,GACzB5H,KAAKiI,QAAQqC,UAAU,YAClB1C,QAAQ,WAAW,KAIP,IAAfgD,GAGJ,GAAK5K,KAAKoH,iBAAiBoC,cAAcnJ,EAAMC,SAAUD,EAAMyF,cAA/D,CAMA,IAAMkF,EAAQhL,KAAKiI,QAAQ1E,OAAb,aAAAxC,OAAiC6J,EAAjC,OAAgDI,QACxDC,EAAmBD,EAAME,KAC5BhL,IAAI,SAAAiL,GAAG,oBAAApK,OAAkBoK,EAAIC,IAAtB,iBAAArK,OAAyCoK,EAAIE,IAA7C,QACPC,KAAK,MACRtL,KAAKyH,IAAIG,QAAQ,WAAW,GAC5B5H,KAAKiI,QAAQqC,UAAUW,GAClBrD,QAAQ,YAAY,GACzB5H,KAAKiI,QAAQqC,UAAb,aAAAvJ,OAAoCiK,EAAMlG,eAAeqB,WAAzD,OACKyB,QAAQ,WAAW,QAbtB5H,KAAKoH,iBAAiBmE,eAAelL,EAAMkF,4CAgBpCS,GAAM,IAAAwF,EAAAxL,KACTyL,EHxNH,SAAkBzF,EAAM6B,EAAQG,GAIrC,IADA,IAAM0D,EAAM,GACHN,EAAM,EAAGA,GAAO,IAAKA,EAAK,CACjCM,EAAIN,GAAO,GACX,IAAK,IAAIC,EAAM,EAAGA,GAAO,IAAKA,EAC5BK,EAAIN,GAAKC,GAAO,GAGpBrF,EAAKA,KAAKjC,QAAQ,SAAAQ,GAEhB,IADA,IAAM2G,EAAO,GADcS,EAAA,SAElBN,GACP9G,EAAQO,eAAezD,EAAUgK,IAAMtH,QAAQ,SAAA6H,GAC7CV,EAAKtF,KAAK,CACRwF,IAAK1J,EAAUkK,GACfP,QAEFK,EAAIhK,EAAUkK,IAAQP,GAAKzF,KAAK,CAC9BwF,IAAK1J,EAAUkK,GACfP,MACAH,OACApG,eAAgBP,EAAQO,eACxBH,EAAGnC,EAAa+B,EAAQO,eAAe+G,OAAOC,aAX3CT,EAAM,EAAGA,GAAO,IAAKA,EAAKM,EAA1BN,KAoBX,IADA,IAAIU,EAAa,EACRX,EAAM,EAAGA,GAAO,IAAKA,EAC5B,IAAK,IAAIC,EAAM,EAAGA,GAAO,IAAKA,EACvBK,EAAIN,GAAKC,GAAKnH,SACnB8H,YAAaN,EAAIN,GAAKC,IACtBU,EAAarJ,KAAKuJ,IAAIF,EAAYG,YAAYR,EAAIN,GAAKC,IAAM1G,IAKjE,IAFA,IACMwH,EADuBzJ,KAAK0J,IAAIvE,EAAOwE,OAAS,EAAGrE,EAAOqE,OAAS,GACnCN,EAC7BX,EAAM,EAAGA,GAAO,IAAKA,EAC5B,IAAK,IAAIC,EAAM,EAAGA,GAAO,IAAKA,EAC5BK,EAAIN,GAAKC,GAAKtH,QAAQ,SAAAoH,GACpBA,EAAIxG,EAAInC,EAAa2I,EAAIrG,eAAe+G,OAAOC,QAAUK,IAQ/D,IADA,IAAMG,EAAM,GAnDiCC,EAAA,SAoDpCnB,GACP,IArD2C,IAAAoB,EAAA,SAqDlCnB,GACPW,YAAaN,EAAIN,GAAKC,IAAMtH,QAAQ,SAAAoH,GAClCmB,EAAI1G,KAAJR,OAAAqH,EAAA,EAAArH,CAAA,GACK+F,EADL,CAEEzH,EAAGyH,EAAIzH,EAAImE,EAAOwD,GAClBjH,EAAG+G,EAAI/G,EAAI4D,EAAOoD,GAClBe,eANGd,EAAM,EAAGA,GAAO,IAAKA,EAAKmB,EAA1BnB,IADFD,EAAM,EAAGA,GAAO,IAAKA,EAAKmB,EAA1BnB,GAYT,OAAOkB,EGwJcI,CAAS1G,EAAMhG,KAAK6H,OAAQ7H,KAAKgI,QACpDhI,KAAKK,MAAMsM,gBHtJR,SAAwBlB,GAC7B,IAAKA,EAAWvH,OAAQ,OAAO,KAE/B,IAAM0I,EAAmBxH,OAAAyH,EAAA,EAAAzH,CAAIqG,GAAYqB,KAAK,SAACnM,EAAGoM,GAAJ,OAAUpM,EAAEmE,eAAe+G,OAAOC,OAASiB,EAAEjI,eAAe+G,OAAOC,SAC3GkB,EAAYJ,EAAiB,GAAG9H,eAAe+G,OAAOC,OACtDmB,EAAYL,EAAiBA,EAAiB1I,OAAS,GAAGY,eAAe+G,OAAOC,OAChFK,EAASV,EAAW,GAAGU,OAEvBe,EAAe,GACfC,EAAc,GAUpB,OARAD,EAAa,GAAKE,OAAOC,SAASJ,GAAWK,YAAY,GACzDJ,EAAa,GAAKE,OAAOC,SAASJ,EAAY,GAAGK,YAAY,GAC7DJ,EAAa,GAAKE,OAAOC,SAASJ,EAAY,IAAIK,YAAY,GAE9DH,EAAY,GAAK3K,EAAa0K,EAAa,IAAMf,EACjDgB,EAAY,GAAK3K,EAAa0K,EAAa,IAAMf,EACjDgB,EAAY,GAAK3K,EAAa0K,EAAa,IAAMf,EAE7CiB,OAAOC,SAASJ,GAAWK,YAAY,KAAOF,OAAOC,SAASL,GAAWM,YAAY,GAChF,CAAC,CACN3I,EAAGwI,EAAY,GACfI,MAAK,GAAAxM,OAAKyM,YAAO,IAAPA,CAAYN,EAAa,IAAI1H,QAAQ,KAAM,KAAhD,SAGFxC,YAAM,GAAG9C,IAAI,SAAA4D,GAAC,MAAK,CACxBa,EAAGwI,EAAYrJ,GACfyJ,MAAK,GAAAxM,OAAKyM,YAAO,IAAPA,CAAYN,EAAapJ,IAAI0B,QAAQ,KAAM,KAAhD,UG2HsBiI,CAAehC,IAC1C,IAAMiC,EAAS1N,KAAKiI,QACjBqC,UAAU,UACVtE,KAAKyF,EAAY,SAAAvF,GAAC,SAAAnF,OAAOmF,EAAEpB,eAAeqB,WAAxB,KAAApF,OAAsCmF,EAAEkF,IAAxC,KAAArK,OAA+CmF,EAAEmF,IAAjD,OAErBqC,EAAOC,OAMJpH,aACEQ,KAAKT,GACL3C,KAAK,IAAK,GACViK,SAELF,EACGnH,aACEQ,KAAKT,GACL3C,KAAK,IAAK,SAAAuC,GAAC,OAAIA,EAAEvB,IACjBhB,KAAK,YAAa,SAAAuC,GAAC,mBAAAnF,OAAiBmF,EAAExC,EAAI8H,EAAK9G,OAAOG,KAAnC,KAAA9D,OAA2CmF,EAAE9B,EAAIoH,EAAK9G,OAAOD,IAA7D,OAExBiJ,EAAOG,QAAQ5J,OAAO,UACjBN,KAAK,YAAa,SAAAuC,GAAC,mBAAAnF,OAAiBmF,EAAExC,EAAI8H,EAAK9G,OAAOG,KAAnC,KAAA9D,OAA2CmF,EAAE9B,EAAIoH,EAAK9G,OAAOD,IAA7D,OACnBd,KAAK,UAAW,SAAAuC,GAAC,OAAIA,EAAEpB,eAAeqB,aACtCxC,KAAK,WAAY,SAAAuC,GAAC,OAAIA,EAAEkF,MACxBzH,KAAK,WAAY,SAAAuC,GAAC,OAAIA,EAAEmF,MACxB1H,KAAK,QAAS,SAAAuC,GAAC,OAAI9D,EAAW8D,EAAEpB,eAAegJ,gBAC/C5F,GAAG,YAAa,SAAAhC,GAAC,OAAIsF,EAAKxC,SAAS,CAClC/B,eAAgBf,MAEjBgC,GAAG,WAAY,SAAAhC,GAAC,OAAIsF,EAAKxC,SAAS,CACjC/B,eAAgB,SAEjBiB,GAAG,QAAS,SAAAhC,GACXsF,EAAKpE,iBAAiB2G,YAAYvC,EAAKnL,MAAMkF,QAASiG,EAAKnL,MAAMC,SAAU4F,EAAEpB,eAAeqB,YAC5FqF,EAAKxC,SAAS,CACZ/B,eAAgB,SAGnBtD,KAAK,IAAK,GACZ4C,aACEQ,KAAKT,GACL3C,KAAK,IAAK,SAAAuC,GAAC,OAAIA,EAAEvB,qCAGf,IAAAqJ,EAAAhO,KACP,OACEU,EAAAC,EAAAC,cAAA,OAAKE,UAAU,iBAAiBmN,IAAK,SAAAC,GAAgBF,EAAK5E,cAAgB8E,IACxExN,EAAAC,EAAAC,cAAA,OAAKE,UAAU,SAASwI,MAAM,OAAOH,OAAO,OAAO8E,IAAK,SAAAxG,GAASuG,EAAKtG,OAASD,KAC/E/G,EAAAC,EAAAC,cAACuN,EAAD,CAAe5J,QAASvE,KAAKgH,MAAMC,eAAgBvC,OAAQ1E,KAAK0E,OAAQE,OAAQ5E,KAAK4E,iBArTxEzD,aAiUNC,cAAWwF,mDCEXwH,uBA/Tb,SAAAA,EAAY/N,GAAM,IAAAN,EAAA,OAAAqF,OAAAC,EAAA,EAAAD,CAAApF,KAAAoO,IAChBrO,EAAAqF,OAAAyB,EAAA,EAAAzB,CAAApF,KAAAoF,OAAA0B,EAAA,EAAA1B,CAAAgJ,GAAArH,KAAA/G,KAAMK,KACDqE,OAAS,CAAED,IAAK,IAAKyC,MAAO,GAAIC,OAAQ,GAAItC,KAAM,KACvD9E,EAAK6E,OAAS,CAAElB,EAAG,EAAIU,EAAG,GAC1BrE,EAAKqH,iBAAmB,IAAIpC,EAAiB,QAJ7BjF,mFAUC,IAAAyH,EAAAxH,KAEjBA,KAAKmJ,QAAUnJ,KAAKoJ,cAAcC,aAAerJ,KAAK0E,OAAOD,IAAMzE,KAAK0E,OAAOyC,OAC/EnH,KAAKsJ,OAAStJ,KAAKoJ,cAAcG,YAAcvJ,KAAK0E,OAAOG,KAAO7E,KAAK0E,OAAOwC,MAE9ElH,KAAKqO,oBAAsB9F,IAAS,kBAAMf,EAAK8G,qBAAqB,KACpEtO,KAAKuO,KAAOC,MACPC,YAAY,CAAC,EAAG,MAChBvG,GAAG,WAAYlI,KAAK0O,QAAQpH,KAAKtH,OACjCkI,GAAG,WAAY,WAAOV,EAAKmH,EAAEhL,KAAK,YAAc6K,IAASI,aACzD1G,GAAG,cAAelI,KAAKqO,qBAG5BrO,KAAK6O,WAAaL,MACbM,OAAO,CAAC,GAAG,IAGXC,MAAM,KACNC,OAAO,CAAC,GAAG,KACXC,UAAU,CAACjP,KAAKsJ,MAAQ,EAAGtJ,KAAKmJ,OAAS,IAE9CnJ,KAAK0F,KAAO8I,MACPK,WAAW7O,KAAK6O,YAErB7O,KAAKyH,IAAM+G,IAAUxO,KAAK0H,QACjB/D,KAAK,QAAS3D,KAAKsJ,OACnB3F,KAAK,SAAU3D,KAAKmJ,QACpBpC,KAAK/G,KAAKuO,MACnBvO,KAAKsO,oBAELtO,KAAK2O,EAAI3O,KAAKyH,IAAIxD,OAAO,KAEzBjE,KAAKkP,iBAAmBlP,KAAKyH,IAAIxD,OAAO,KACjB2D,QAAQ,cAAa,GAE5C5H,KAAKmP,SAAWnP,KAAKyH,IAAIxD,OAAO,KAGhCjE,KAAKoP,QAAUZ,IAAUxO,KAAKoJ,eAAenF,OAAO,OAC/CN,KAAK,QAAS,kBACda,MAAM,UAAW,GAGtBxE,KAAKqP,SAAWb,IAAUxO,KAAKoJ,eAAenF,OAAO,OAChDN,KAAK,QAAS,mBACda,MAAM,UAAW,GAGtBxE,KAAKsP,SAAWd,IAAUxO,KAAKoJ,eAAenF,OAAO,OAChDN,KAAK,QAAS,mBACdA,KAAK,KAAK,mBACVa,MAAM,UAAW,GAEtBxE,KAAKuP,gBAAkB,EACvBvP,KAAKwP,mBAAqB,GAG1BxP,KAAKyP,eAAiBzP,KAAKkP,iBAAiB5E,UAAU,UAClDtE,KAAK0J,GAAQ7B,QACb5J,OAAO,UACPN,KAAK,KAAK,SAASuC,GAAG,MAAM,UAAUA,EAAEL,KACxClC,KAAK,KAAM,SAAAuC,GAAM,OAAOsB,EAAKqH,WAAW,CAAC3I,EAAEyJ,YAAYjM,EAAGwC,EAAEyJ,YAAYvL,IAAI,KAC5ET,KAAK,KAAM,SAAAuC,GAAO,OAAOsB,EAAKqH,WAAW,CAAC3I,EAAEyJ,YAAYjM,EAAGwC,EAAEyJ,YAAYvL,IAAI,KAC7ET,KAAK,IAAK,KACVA,KAAK,OAAO,SACZuE,GAAG,YAAa,SAAAhC,GACfsB,EAAK4H,QAAQ7I,WAAW,aAAa/B,MAAM,UAAW,IACtDgD,EAAK4H,QAAQQ,KAAK,MAAM1J,EAAE2J,KAAO,QAC7BrL,MAAM,OAASgK,IAASsB,QAAW,MACnCtL,MAAM,MAAQgK,IAASuB,QAAU,GAAM,MACvCvL,MAAM,YAAc,WAEzB0D,GAAG,WAAY,SAAAhC,GAAOsB,EAAK4H,QAAQ7I,aAAa/B,MAAM,UAAW,KAElExE,KAAK+I,WAAWiH,GAGfhQ,KAAK2O,EAAErE,UAAU,8BACdtE,KAAKiK,IAAiBC,EAAQA,EAAOC,QAAQD,QAAQE,UACnDvC,QAAQ5J,OAAO,QACfN,KAAK,IAAK3D,KAAK0F,MACf/B,KAAK,OAAO,WAEjB3D,KAAK2O,EAAErE,UAAU,6BACdtE,KAAKiK,IAAiBI,EAAQA,EAAOF,QAAQG,UAAUF,UACvDvC,QAAQ5J,OAAO,QACfN,KAAK,QAAS,SAASuC,GAAI,MAAO,WAAaA,EAAEL,KACjDlC,KAAK,IAAK3D,KAAK0F,MACf/B,KAAK,OAAQ,sDAGH+E,EAAWC,GAOvBG,IAAQ9I,KAAKK,MAAMyF,aAAc4C,EAAU5C,eAC9C9F,KAAK+I,WAAW/I,KAAKK,MAAMyF,iDAQpByK,GAIT,IAJa,IAAA/E,EAAAxL,KAETwQ,EAAgB,GAChBC,EAAQF,EAAIvK,KAAK9B,OACbJ,EAAI,EAAGA,EAAI2M,EAAO3M,IAGxB,IAFA,IAAI4M,EAAKH,EAAIvK,KAAKlC,GAAGgB,eACjB6L,EAAOD,EAAGE,UAAU1M,OAChB2M,EAAI,EAAGA,EAAIF,EAAME,IAAI,EACvBnF,EAAM,IAEN5G,eAAiBgM,KAAKC,MAAMD,KAAKE,UAAUN,IAC/ChF,EAAI5G,eAAexE,SAAWoQ,EAAGE,UAAUC,GAC3CL,EAAc5K,KAAK8F,GAGvB,IAAIuF,EAAc,GACdC,EAAOV,EAActM,OACzB,IAAQJ,EAAI,EAAGA,EAAIoN,EAAMpN,IAAK,CAC5B,IAAIqN,EAAK,GACTA,EAAGtB,KAAQW,EAAc1M,GAAGgB,eAAexE,SAC3C6Q,EAAGnL,KAAOwK,EAAc1M,GACxBmN,EAAYrL,KAAKuL,GAInBnR,KAAKoR,OAAS,GACd,IAAQtN,EAAI,EAAGA,EAAIoN,EAAMpN,IAAI,CAC3B,IAAIuN,EAAKJ,EAAYnN,GAAG+L,KACpByB,GAAK,EACT,IAAQT,EAAI,EAAGA,EAAI7Q,KAAKoR,OAAOlN,OAAQ2M,IAAI,CACzC,IAAIU,EAAIvR,KAAKoR,OAAOP,GAAGhB,KACvB,GAAGwB,EAAGjR,MAAMmR,GAAG,CACb,IAAIC,EAAKxR,KAAKoR,OAAOP,GAAG7K,KACxBwL,EAAG5L,KAAKqL,EAAYnN,GAAGkC,MACvBhG,KAAKoR,OAAOP,GAAG7K,KAAOwL,EACtBF,GAAK,GAGT,GAAS,GAANA,EAAY,CACb,IAAI5F,KAAM,IACNmE,KAAOwB,EACX,IAAII,EAAMR,EAAYnN,GAAGkC,KACzB0F,EAAI1F,KAAO,GACX0F,EAAI1F,KAAKJ,KAAK6L,GACdzR,KAAKoR,OAAOxL,KAAK8F,IAIrB1L,KAAK0R,gBAAkB1R,KAAKmP,SACzB7E,UAAU,UACVtE,KAAKhG,KAAKoR,OAAQ,SAAAlL,GAAO,OAAOA,EAAE2J,OACrC7P,KAAK0R,gBAAgB/D,OAClBpH,aACA5C,KAAK,IAAI,GACTiK,SAED5N,KAAK0R,gBAAgBnL,aACb5C,KAAK,IAAK,SAAAuC,GACT,IAAIvF,EAAIuF,EAAEF,KAAK9B,OACXJ,EAAI0K,IAAqB,EAAE7N,EAAG,GAAGA,GACjC+C,GAA4C,EAAtC8K,IAAiBhD,EAAK/D,IAAIkK,QAAQvN,EAAQ,IACpD,OAAGV,EAAI,EAEEI,EADCJ,EAAE,OAGL,EAAI/C,IAGpBX,KAAK0R,gBAAgB7D,QAAQ5J,OAAO,UAChCN,KAAK,KAAK,SAASuC,EAAEpC,GAAG,MAAM,WAAWoC,EAAE2J,OAC3ClM,KAAK,KAAM,SAAAuC,GAAO,IAAI0L,EAAIC,EAAoB3L,EAAE2J,MAAO,OAAOrE,EAAKqD,WAAW,CAAC+C,EAAElO,EAAEkO,EAAExN,IAAI,KACzFT,KAAK,KAAM,SAAAuC,GAAO,IAAI0L,EAAIC,EAAoB3L,EAAE2J,MAAO,OAAOrE,EAAKqD,WAAW,CAAC+C,EAAElO,EAAEkO,EAAExN,IAAI,KACzFT,KAAK,YAAa,SAAAuC,GAEjB,IAAI0L,EAAIC,EAAoB3L,EAAE2J,MAC1BiC,EAAKtG,EAAKqD,WAAW,CAAC+C,EAAElO,EAAEkO,EAAExN,IAE5B2N,EADQvD,IAAiBhD,EAAK/D,IAAIkK,QACxBK,MAAMF,GAEpB,MAAO,aADC,CAACC,EAAE,GAAKD,EAAG,GAAIC,EAAE,GAAGD,EAAG,IACL,MAE3BlK,QAAQ,SAAS,QACjBpD,MAAM,eAAgB,IACtBA,MAAM,SAAS,WACfb,KAAK,OAAO,WACZuE,GAAG,YAAa,SAAAhC,GACf,IAAI+L,EAAK,GAEPA,EADC/L,EAAEF,KAAK9B,OAAS,EACZ,MAAOgC,EAAE2J,KAAM,WAAa3J,EAAEF,KAAK9B,OAAQ,YAE3C,MAAQgC,EAAE2J,KAAM,aAAe3J,EAAEF,KAAK,GAAGlB,eAAeC,cAE7DyG,EAAK6D,SAAS9I,aAAa/B,MAAM,UAAW,IAC5CgH,EAAK6D,SAASO,KAAKqC,GACfzN,MAAM,OAASgK,IAASsB,QAAW,MACnCtL,MAAM,MAAQgK,IAASuB,QAAU,GAAM,MACvCvL,MAAM,YAAc,WAE3B0D,GAAG,WAAY,SAAAhC,GAAOsF,EAAK6D,SAAS9I,WAAW,SAAS/B,MAAM,UAAW,KACzE0D,GAAG,QAAQ,SAAAhC,MAGZK,aACC5C,KAAK,IAAK,SAAAuC,GACT,IAAIvF,EAAIuF,EAAEF,KAAK9B,OACXJ,EAAI0K,IAAqB,EAAE7N,EAAG,GAAGA,GACjC+C,GAA4C,EAAtC8K,IAAiBhD,EAAK/D,IAAIkK,QAAQvN,EAAQ,IAGpD,OAAGV,EAAI,EAEEI,EADCJ,EAAE,OAGL,EAAI/C,IAGZuH,GAAG,MAAO,SAAAhC,wCAQhB,IAAIgM,EAAMlS,KAAKmP,SACZ7E,UAAU,UACVtE,KAAKhG,KAAKoR,OAAQ,SAAAlL,GAAO,OAAOA,EAAE2J,OAEnC7P,KAAKyP,eAAe9L,KAAK,YAAY3D,KAAKmS,iBAAiB3D,IAASI,YACpEsD,EAAIvO,KAAK,YAAY3D,KAAKmS,iBAAiB3D,IAASI,YAEpD5O,KAAKyP,eAAe9L,KAAK,IAAI3D,KAAKoS,qBAAqB9K,KAAKtH,OAC5DkS,EAAIvO,KAAK,IAAI3D,KAAKqS,sBAAsB/K,KAAKtH,oDAI5BkG,GACnB,IAAIpC,EAAI0K,IAAqB,EAAG,IAC5B9K,GAA6B,EAAxB8K,IAASI,UAAUxK,EAAQ,IACpC,OAAGV,EAAI,EAEEI,EADCJ,EAAE,OAGL,kDAIawC,GACpB,IAAIvF,EAAIuF,EAAEF,KAAK9B,OACXJ,EAAI0K,IAAqB,EAAE7N,EAAG,GAAGA,GACjC+C,GAA6B,EAAxB8K,IAASI,UAAUxK,EAAQ,IACpC,OAAGV,EAAI,EAEEI,EADCJ,EAAE,OAGL,EAAI/C,2CAIIoR,GACf,OAAO,SAAS7L,GACd,IAAI0L,EAAI,CAAC5R,KAAKsS,aAAa,MAAOtS,KAAKsS,aAAa,OAChD3N,EAAIoN,EAAEC,MAAMJ,GAEhB,MAAO,aADC,CAACjN,EAAE,GAAKiN,EAAE,GAAIjN,EAAE,GAAGiN,EAAE,IACH,iDAIV,IAAA5D,EAAAhO,KAGZuS,EAAS,SAAC5R,GACd,IAAImD,EAAI0K,IAAqB,EAAE7N,EAAG,GAAGA,GACjC+C,GAA4C,EAAtC8K,IAAiBR,EAAKvG,IAAIkK,QAAQvN,EAAQ,IACpD,OAAGV,EAAI,EAEEI,EADCJ,EAAE,OAGL,EAAI/C,GAGbX,KAAKK,MAAMsM,gBAAgB,CACzB,CAAEhI,EAAG4N,EAAO,GAAIhF,MAAO,aACvB,CAAE5I,EAAG4N,EAAO,GAAIhF,MAAO,gDAKlB,IAAAiF,EAAAxS,KACP,OACEU,EAAAC,EAAAC,cAAA,OAAKE,UAAU,UAAUmN,IAAK,SAAAC,GAAU,OAAIsE,EAAKpJ,cAAgB8E,IAC/DxN,EAAAC,EAAAC,cAAA,OAAKE,UAAU,mBAAmB+E,GAAG,mBAAmBoI,IAAK,SAAAxG,GAAS+K,EAAK9K,OAASD,aAtT1EtG,gCCwUHsR,eA7Ub,SAAAA,EAAYpS,GAAM,IAAAN,EAAA,OAAAqF,OAAAC,EAAA,EAAAD,CAAApF,KAAAyS,IAChB1S,EAAAqF,OAAAyB,EAAA,EAAAzB,CAAApF,KAAAoF,OAAA0B,EAAA,EAAA1B,CAAAqN,GAAA1L,KAAA/G,KAAMK,KACDqS,cAAgB,CACnBC,EAAG,mBACHrR,EAAG,YACHC,EAAG,gBACHC,EAAG,wBAILzB,EAAK6S,aAAe,CAClBD,EAAI,UACJrR,EAAI,UACJC,EAAI,UACJC,EAAI,WAGNzB,EAAK8S,qBAAuB,CAC1BF,EAAI,UACJrR,EAAI,UACJC,EAAI,UACJC,EAAI,WAGNzB,EAAK2E,OAAS,CAAED,IAAK,IAAKyC,MAAO,GAAIC,OAAQ,GAAItC,KAAM,KACvD9E,EAAK6E,OAAS,CAAElB,EAAG,EAAIU,EAAG,GAE1BrE,EAAK+S,gBAAkB,CACnBtR,EAAG,GACHmR,EAAG,IACHrR,EAAG,IACHC,EAAG,KAEPxB,EAAKgT,gBAAkB,CACrBvR,EAAG,GACHmR,EAAG,GACHrR,EAAG,GACHC,EAAE,IAIJxB,EAAKiT,aAAe,CAClBL,EAAI,IACJrR,EAAI,KAENvB,EAAKkT,kBAAoB,CACvBN,EAAG,IACHrR,EAAG,KAELvB,EAAKmT,kBAAoB,CACvBP,EAAG,GACHrR,EAAG,IAGLvB,EAAKoT,YAAc,EACnBpT,EAAKqT,QAAU,KACfrT,EAAKsT,MAAQ,GACbtT,EAAKuT,YAAc,EAEnBvT,EAAKwT,cAAgB,KAErBxT,EAAKyT,eAAiBzT,EAAKyT,eAAelM,KAApBlC,OAAAmC,EAAA,EAAAnC,QAAAmC,EAAA,EAAAnC,CAAArF,KA7DNA,mFAiEC,IAAAyH,EAAAxH,KAEjBA,KAAKmJ,QAAUnJ,KAAKoJ,cAAcC,aAAerJ,KAAK0E,OAAOD,IAAMzE,KAAK0E,OAAOyC,OAC/EnH,KAAKsJ,OAAStJ,KAAKoJ,cAAcG,YAAcvJ,KAAK0E,OAAOG,KAAO7E,KAAK0E,OAAOwC,MAE9ElH,KAAKoP,QAAUZ,IAAUxO,KAAKoJ,eAAenF,OAAO,OAC/CN,KAAK,QAAS,2BACda,MAAM,UAAW,GAItBxE,KAAKyT,kBAAoBjF,IAAUxO,KAAKoJ,eAAenF,OAAO,OACzD2D,QAAQ,qBAAoB,GAEjC5H,KAAK0T,cAAgB1T,KAAKyT,kBAAkBxP,OAAO,OAC1C2D,QAAQ,UAAS,GACjBA,QAAQ,mBAAkB,GAC1BM,GAAG,QAAS,WAAOV,EAAKmM,aAAa,KACrCrQ,KAAK,YACdtD,KAAK4T,aAAe5T,KAAKyT,kBAAkBxP,OAAO,OAC7C2D,QAAQ,UAAS,GACjBA,QAAQ,gBAAe,GACvBM,GAAG,QAAS,WAAOV,EAAKmM,aAAa,KACrCrQ,KAAK,mBAEVtD,KAAKqT,MAAQrT,KAAKwT,eAAeK,IAEjC7T,KAAK8T,gBAAkB,GACvB9T,KAAK8T,gBAAgB,GAAK,WAC1B,IAAI,IAAIhQ,EAAI,EAAGA,EAAIkM,EAAShK,KAAK9B,OAAQJ,IACvC9D,KAAK8T,gBAAgB9D,EAAShK,KAAKlC,GAAGgB,eAAeqB,YAAc6J,EAAShK,KAAKlC,GAAGgB,eAAeC,cAerG/E,KAAK+T,cAAgB,CACnBpB,EAAG,CAAEjP,EAAG1D,KAAKsJ,MAAQ,EAAGlF,EAAGpE,KAAKmJ,OAAS,GACzC7H,EAAG,CAAEoC,EAAG1D,KAAKsJ,MAAQ,EAAGlF,EAAGpE,KAAKmJ,OAAS,GACzC5H,EAAG,CAAEmC,EAAG,EAAI1D,KAAKsJ,MAAQ,EAAGlF,EAAGpE,KAAKmJ,OAAS,GAC7C3H,EAAG,CAAEkC,EAAG,IAAKU,EAAE,IAGjBpE,KAAKgP,OAAS,CAAEtL,EAAG1D,KAAKsJ,MAAQ,EAAGlF,EAAGpE,KAAKmJ,OAAS,GAGpDnJ,KAAKqO,oBAAsB9F,IAAS,kBAAMf,EAAK8G,qBAAqB,KACpEtO,KAAKuO,KAAOC,MACPC,YAAY,CAAC,GAAI,KACjBvG,GAAG,iBAAkB,WAAOV,EAAKmH,EAAEhL,KAAK,YAAa6K,IAASI,aAC9D1G,GAAG,cAAelI,KAAKqO,qBAE5BrO,KAAKyH,IAAM+G,IAAUxO,KAAK0H,QACnB/D,KAAK,QAAQ3D,KAAKsJ,OAClB3F,KAAK,SAAS3D,KAAKmJ,QACnBpC,KAAK/G,KAAKuO,MACjBvO,KAAKsO,oBAELtO,KAAK2O,EAAI3O,KAAKyH,IAAIxD,OAAO,KAEzBjE,KAAKgU,WAAaxF,MACfyF,cAAc,IACdC,MAAM,IAAK1F,MAAY2F,SAASnU,KAAKuT,eAAe7P,EAAE1D,KAAKgP,OAAOtL,IAClEwQ,MAAM,IAAK1F,MAAY2F,SAASnU,KAAKuT,eAAenP,EAAEpE,KAAKgP,OAAO5K,IAClE8P,MAAM,SAAU1F,MAAmB2F,SAASnU,KAAKoU,OAAO9M,KAAKtH,QAC7DkI,GAAG,OAAQlI,KAAKqU,OAAO/M,KAAKtH,OAE/BA,KAAKgU,WAAWM,OAChBtU,KAAKuU,UAAY/F,IAAOwB,EAAU,SAAA9J,GAAO,OAAQA,EAAEsO,eAEnDxU,KAAKyU,YAAcjG,MAChB7H,SAAS,IACT3D,MAAM,CAAC,EAAG,KACVE,OAAO,CAAC,EAAGlD,KAAKuU,YAGnBvU,KAAKoT,QAAUpT,KAAK2O,EAAErE,UAAU,WAC7BtE,KAAKhG,KAAKqT,MAAO,SAAAnN,GAAO,OAAOA,EAAEL,KAEpC7F,KAAK0U,SAAW1U,KAAKoT,QAAQvF,QAAQ5J,OAAO,UACzC2D,QAAQ,UAAU,GAClBjE,KAAK,IAAK,GACVa,MAAM,OAAO,SAAA0B,GAAO,OAAOsB,EAAKoL,aAAa1M,EAAEyO,YAC/ChR,KAAK,eAAgB,IACrBA,KAAK,SAAS,SAAAuC,GAAM,OAAOsB,EAAKqL,qBAAqB3M,EAAEyO,YACvDzM,GAAG,YAAY,SAAAhC,GACd,IAAIL,EAAKK,EAAEL,GAEX2I,IAAa,WACVoG,OAAO,SAAS1O,GAAG,OAAGA,EAAEL,KAAKA,IAC7BU,aACE/B,MAAM,UAAU,OAErBgD,EAAK4H,QAAQ7I,aAAa/B,MAAM,UAAW,IAC3CgD,EAAK4H,QAAQQ,KAAK1J,EAAE2O,cACjBrQ,MAAM,OAASgK,IAASsB,QAAW,MACnCtL,MAAM,MAAQgK,IAASuB,QAAU,GAAM,MACvCvL,MAAM,YAAc,WAExB0D,GAAG,WAAW,SAAAhC,GACXsB,EAAK4H,QAAQ7I,aAAa/B,MAAM,UAAW,GAC3CgK,IAAa,WACVjI,aACE/B,MAAM,UAAU,OAI3BxE,KAAKoT,QAAUpT,KAAKoT,QAAQ0B,MAAM9U,KAAK0U,UAEvC1U,KAAKoT,QAAQ7M,WAAW,SACrBC,SAAS,KACT7C,KAAK,IAAK,SAAAuC,GAAO,OAAOA,EAAEqM,SAG7BvS,KAAKgU,WAAWX,MAAMrT,KAAKqT,OAC3BrT,KAAK2T,aAAa,GAGlB,IAAIoB,EAAavG,IAAQxO,KAAK0S,eAC9B1S,KAAKgV,MAAQhV,KAAK2O,EAAErE,UAAU,iBAC7BtE,KAAK+O,GAEN/U,KAAKgV,MAAMnH,QAAQ5J,OAAO,QACvBN,KAAK,QAAS,gBACdA,KAAK,UAAU,QACfA,KAAK,YAAY,QACjBA,KAAK,IAAK,SAAAuC,GAAO,OAAOsB,EAAKsL,gBAAgB5M,KAC7CvC,KAAK,IAAK,SAAAuC,GAAO,OAAOsB,EAAKuL,gBAAgB7M,KAC7CvC,KAAK,cAAe,UACpBL,KAAK,SAAA4C,GAAO,OAAOsB,EAAKkL,cAAcxM,KAEzClG,KAAKiV,SAAW,CAACtC,EAAI,WAAYrR,EAAG,QACpC,IAAI4T,EAAY1G,IAAQxO,KAAKiV,UAC7BjV,KAAKmV,cAAgBnV,KAAK2O,EAAErE,UAAU,eACrCtE,KAAKkP,GAENlV,KAAKmV,cAActH,QAAQ5J,OAAO,QAC/BN,KAAK,QAAS,cACdA,KAAK,UAAU,QACfA,KAAK,YAAY,QACjBA,KAAK,IAAK,SAAAuC,GAAO,OAAOsB,EAAKyL,kBAAkB/M,KAC/CvC,KAAK,IAAK,SAAAuC,GAAO,OAAOsB,EAAK0L,kBAAkBhN,KAC/CvC,KAAK,cAAe,UACpBL,KAAK,SAAA4C,GAAO,OAAOsB,EAAKyN,SAAS/O,KACjC0O,OAAO,SAAU1O,GAChB,OAAQ,GAALA,IAKJvC,KAAK,YAAY,QACjBA,KAAK,KAAK,yDAQFyR,GACD,GAAPA,EACDpV,KAAKgU,WAAWE,MAAM,IAAK1F,MAAY2F,SAASnU,KAAKuT,eAAe7P,EAAE1D,KAAKgP,OAAOtL,IAClE,GAAP0R,EACTpV,KAAKgU,WAAWE,MAAM,IAAK1F,MAAY2F,SAASnU,KAAKuT,eAAe7P,EAAE1D,KAAKqV,YAAY/N,KAAKtH,QAC5E,GAAPoV,GACTpV,KAAKgU,WAAWE,MAAM,IAAK1F,MAAY2F,SAASnU,KAAKuT,eAAe7P,EAAE1D,KAAKsV,aAAahO,KAAKtH,QAE/FA,KAAKsT,YAAc8B,EACnBpV,KAAKgU,WAAWuB,MAAM,GAAGC,UACzBxV,KAAKyV,aAAaL,wCAGPA,GACD,GAAPA,EACD5G,IAAa,iBACV7K,KAAK,UAAU,WAElB6K,IAAa,iBACV7K,KAAK,UAAW,QAEX,GAAPyR,EACD5G,IAAa,eACV7K,KAAK,UAAU,WAEhB6K,IAAa,eACV7K,KAAK,UAAU,4CAGZuC,GACV,OAAOlG,KAAK+T,cAAc7N,EAAEyO,UAAUjR,uCAG3BwC,GAEX,IADA,IAAIwP,EAAQxP,EAAEiJ,SACNrL,EAAI,EAAGA,EAAI4R,EAAMxR,OAAQJ,IAC/B,GAAG4R,EAAM5R,IAAM9D,KAAKmT,WAClB,OAAOnT,KAAKgT,aAAa,GAG7B,OAAOhT,KAAKgT,aAAa,kCAEpB9M,GACL,OAAQxD,KAAKiT,IAAIzP,EAAEqM,OAAQ,GAAOvS,KAAKuT,+CAIvCvT,KAAKoT,QAAQzP,KAAK,KAAM,SAAAuC,GAAO,OAAOA,EAAExC,IAC3BC,KAAK,KAAM,SAAAuC,GAAO,OAAOA,EAAE9B,6CAGzBgR,EAAKQ,GACpB5V,KAAKsT,YAAc8B,EACnBpV,KAAKmT,WAAayC,EAClBpH,IAAU,qBAAqBlL,KAAKtD,KAAK8T,gBAAgB8B,IACzD5V,KAAK2T,aAAayB,wFAOLS,GACb,IAAIC,EAAM,CACPC,mBAAkB,EAClBC,UAAc,EACdC,gBAAc,EACdC,uBAAwB,GAEvBC,EAAUN,EAAQ3V,IAAI,SAAUgG,EAAEpC,GACpC,MAAO,CACL+B,GAAK/B,EACLyO,OAAS,GACTsC,aAAc3O,EAAEkQ,aAChBC,MAAuB,GAAhB3T,KAAK4T,SACZnH,SAAWjJ,EAAEqQ,SACb5B,SAAUmB,EAAI5P,EAAEsQ,UAChB9S,EAAmB,IAAhBhB,KAAK4T,SACRlS,EAAmB,IAAhB1B,KAAK4T,YAIZ,OADAH,EAAQrJ,KAAK,SAAUnM,EAAEoM,GAAI,OAAOA,EAAEsJ,MAAQ1V,EAAE0V,QACzCF,8CAIP,IAAMM,EAAcjI,IAAiBxO,KAAKyH,IAAIkK,QAAQJ,EACtDvR,KAAKK,MAAMsM,gBAAgB,CAAC,CAAEhI,EAAG,GAAK8R,EAAalJ,MAAO,gDAIpD,IAAA/B,EAAAxL,KACN,OACEU,EAAAC,EAAAC,cAAA,OAAKE,UAAU,cAAcmN,IAAK,SAAAC,GAAU,OAAI1C,EAAKpC,cAAgB8E,IACnExN,EAAAC,EAAAC,cAAA,OAAKE,UAAU,mBAAmB+E,GAAG,mBAAmBoI,IAAK,SAAAxG,GAAS+D,EAAK9D,OAASD,aAzUrEtG,wCCOjBuV,uBACJ,SAAAA,EAAYrW,GAAO,IAAAN,EAAA,OAAAqF,OAAAC,EAAA,EAAAD,CAAApF,KAAA0W,IACjB3W,EAAAqF,OAAAyB,EAAA,EAAAzB,CAAApF,KAAAoF,OAAA0B,EAAA,EAAA1B,CAAAsR,GAAA3P,KAAA/G,KAAMK,KAED2G,MAAQ,CACX2P,UAAU,GAGZ5W,EAAK6W,aAAe7W,EAAK6W,aAAatP,KAAlBlC,OAAAmC,EAAA,EAAAnC,QAAAmC,EAAA,EAAAnC,CAAArF,KAPHA,4EAUNoI,GACX,IAAM0O,EAjBY,SAAChH,GACrB,IAAMpM,EAAQoM,EAAKiH,UAAU,EAAGjH,EAAK3L,OAAS,GAAGT,MAAM,KACvD,MAAO,CAAE2H,IAAKgC,OAAOC,SAAS5J,EAAM,IAAK4H,IAAK+B,OAAOC,SAAS5J,EAAM,KAejDsT,CAAc5O,EAAMC,OAAOyH,MACtCmH,EAAS5R,OAAAyH,EAAA,EAAAzH,CAAOpF,KAAKK,MAAMgW,OAE3BY,EAAQjX,KAAKK,MAAMgW,MAAMa,UAAU,SAAAC,GAAI,OAAIrO,IAAQ+N,EAAUM,MACpD,IAAXF,GAAcD,EAAUI,OAAOH,EAAO,GACtC9O,EAAMC,OAAOiP,SAASL,EAAUpR,KAAKiR,GAErC7W,KAAKK,MAAMiX,UAAUtX,KAAKK,MAAMiX,SAASN,qCAGrC5L,EAAKC,GACb,OAA4E,IAArErL,KAAKK,MAAMgW,MAAMa,UAAU,SAAAC,GAAI,OAAIrO,IAAQqO,EAAM,CAAE/L,MAAKC,2CAGxD,IAAA7D,EAAAxH,KAcDuX,EAAOvU,YAAM,EAAGwU,GAAUtX,IAAI,SAAAkL,GAAG,OACrC1K,EAAAC,EAAAC,cAAA,MAAIC,IAAKuK,GAdK,SAACA,GACf,OAAOpI,YAAM,EAAGyU,GAAUvX,IAAI,SAAAmL,GAAG,OAC/B3K,EAAAC,EAAAC,cAAA,MAAIC,IArCC,GAqCKuK,EAAM,GAAYC,GAC1B3K,EAAAC,EAAAC,cAAA,SACE8W,KAAK,WACL7H,KAAI,IAAA9O,OAAMqK,EAAN,KAAArK,OAAasK,EAAb,KACJgM,QAAS7P,EAAKmQ,UAAUvM,EAAKC,GAC7BiM,SAAU9P,EAAKoP,aACfgB,SAAUpQ,EAAKnH,MAAMwX,UAAYrQ,EAAKnH,MAAMwX,QAAQzM,GAAKC,QAO5DyM,CAAQ1M,MAIb,OACE1K,EAAAC,EAAAC,cAAA,OAAKE,UAAU,wCACbJ,EAAAC,EAAAC,cAAA,QAAME,UAAU,sBAAhB,6BAGAJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,+BACbJ,EAAAC,EAAAC,cAAA,SAAOE,UAAU,qBACfJ,EAAAC,EAAAC,cAAA,aACG2W,aAtDWpW,cA+D1BuV,GAAYqB,aAAe,CACzB1B,MAAO,IAYMK,qCChFf,SAASsB,KAAsB,QAAAC,EAAA/S,UAAAhB,OAAN8B,EAAM,IAAAkS,MAAAD,GAAAE,EAAA,EAAAA,EAAAF,EAAAE,IAANnS,EAAMmS,GAAAjT,UAAAiT,GAC7B,MAAO,CAAEnS,KAAMoS,KAAapG,WAAb,EAAA5M,OAAAyH,EAAA,EAAAzH,CAAiBY,EAAK9F,IAAI,SAAAgG,GAAC,OAAIA,EAAEF,UAIlD,IAAMqS,GAAW,SAAAC,GAAA,IAAGnB,EAAHmB,EAAGnB,KAAH,OACfzW,EAAAC,EAAAC,cAAA,OAAKE,UAAU,gBACbJ,EAAAC,EAAAC,cAAA,QAAME,UAAU,sBAAsBqW,EAAKtH,MAC3CnP,EAAAC,EAAAC,cAAA,QAAME,UAAU,uBAAuBqW,EAAKoB,SAuYjCC,eAlYb,SAAAA,EAAYnY,GAAO,IAAAN,EAAA,OAAAqF,OAAAC,EAAA,EAAAD,CAAApF,KAAAwY,IACjBzY,EAAAqF,OAAAyB,EAAA,EAAAzB,CAAApF,KAAAoF,OAAA0B,EAAA,EAAA1B,CAAAoT,GAAAzR,KAAA/G,KAAMK,KAED2G,MAAQ,CACXyR,WAAY,CACVC,OAAQrY,EAAM2F,KACd4K,UAAWvQ,EAAM2F,KACjB6N,SAAUxT,EAAM2F,KAChB2S,SAAUtY,EAAM2F,KAChB4S,YAAavY,EAAM2F,MAErB6S,aAAc,CACZH,OAAQ,GACR9H,UAAW,GACXiD,SAAU,GACV8E,SAAU,GACVC,YAAa,IAEf9S,aAAczF,EAAM2F,MAItBjG,EAAK+Y,iBAAmB,KAIxB/Y,EAAKgZ,cAAgB,CACnBL,OAAQ,KACR9H,UAAW,KACXiD,SAAU,KACV8E,SAAU,KACVC,YAAa,MAGf7Y,EAAKiZ,iBAAmB,GACxBjZ,EAAKkZ,gBAAkB,GACvBlZ,EAAKmZ,gBAAkB,GAEvB7Y,EAAM2F,KAAKA,KAAKjC,QAAQ,SAAAmC,GACtBnG,EAAKiZ,iBAAiB9S,EAAEpB,eAAeqB,YAAc,IAAIgT,IACzDjT,EAAEpB,eAAe8L,UAAU7M,QAAQ,SAAAzD,GACjCP,EAAKiZ,iBAAiB9S,EAAEpB,eAAeqB,YAAYiT,IAAI9Y,KAGzDP,EAAKkZ,gBAAgB/S,EAAEpB,eAAeqB,YAAc,IAAIgT,IACxDjT,EAAEpB,eAAeuU,iBAAiBtV,QAAQ,SAAAuV,GACxCvZ,EAAKkZ,gBAAgB/S,EAAEpB,eAAeqB,YAAYiT,IAAIE,KAExDpT,EAAEpB,eAAeyU,iBAAiBxV,QAAQ,SAAAyV,GACxCzZ,EAAKkZ,gBAAgB/S,EAAEpB,eAAeqB,YAAYiT,IAAII,KAGxDzZ,EAAKmZ,gBAAgBhT,EAAEpB,eAAeqB,YAAc,IAAIgT,IACxDjT,EAAEpB,eAAe6T,SAAS5U,QAAQ,SAAA0V,GAChC1Z,EAAKmZ,gBAAgBhT,EAAEpB,eAAeqB,YAAYiT,IAAIK,OAI1D1Z,EAAK2Z,SAAW,CACdhB,OAAQ,SAACA,GACP,OAAKA,EAAOxU,OAEL,CACL8B,KAAMjG,EAAKM,MAAM2F,KAAKA,KAAK4O,OAAO,SAAC1O,GACjC,QAAKwS,EAAOlY,SAAS0F,EAAEpB,eAAeC,kBAJfhF,EAAKM,MAAM2F,MASxC4K,UAAW,SAACA,GACV,OAAKA,EAAU1M,OAER,CACL8B,KAAMjG,EAAKM,MAAM2F,KAAKA,KAAK4O,OAAO,SAAC1O,GACjC,QAAK0K,EAAU+I,KAAK,SAAArZ,GAClB,OAAOP,EAAKiZ,iBAAiB9S,EAAEpB,eAAeqB,YAAYyT,IAAItZ,EAASuP,WAL/C9P,EAAKM,MAAM2F,MAW3C6N,SAAU,SAACA,GACT,OAAKA,EAAS3P,OAEP,CACL8B,KAAMjG,EAAKM,MAAM2F,KAAKA,KAAK4O,OAAO,SAAC1O,GACjC,QAAK2N,EAAS8F,KAAK,SAAAE,GACjB,OAAO9Z,EAAKkZ,gBAAgB/S,EAAEpB,eAAeqB,YAAYyT,IAAIC,EAAQhK,WAL9C9P,EAAKM,MAAM2F,MAW1C2S,SAAU,SAACA,GACT,OAAKA,EAASzU,OAEP,CACL8B,KAAMjG,EAAKM,MAAM2F,KAAKA,KAAK4O,OAAO,SAAC1O,GACjC,QAAKyS,EAASgB,KAAK,SAAAF,GACjB,OAAO1Z,EAAKmZ,gBAAgBhT,EAAEpB,eAAeqB,YAAYyT,IAAIH,EAAQ5J,WAL9C9P,EAAKM,MAAM2F,MAW1C4S,YAAa,SAACA,GACZ,OAAKA,EAAY1U,OAEV,CACL8B,KAAMjG,EAAKM,MAAM2F,KAAKA,KAAK4O,OAAO,SAAC1O,GACjC,QAAK0S,EAAYkB,MAAM,SAAAjD,GACrB,OAAO3Q,EAAEpB,eAAezD,EAAUwV,EAASxL,MAAM7K,SAASwB,EAAU6U,EAASzL,WALnDrL,EAAKM,MAAM2F,OA1G9BjG,uEAyHjB,OAAOqF,OAAO2U,OAAO/Z,KAAKgH,MAAM6R,cAAciB,MAAM,SAAAzD,GAAK,OAAqB,IAAjBA,EAAMnS,qDAGjD0Q,GAClB,OAAOoD,GAAYhG,WAAZ,EAAA5M,OAAAyH,EAAA,EAAAzH,CAAgBA,OAAO4U,QAAQha,KAAKgH,MAAMyR,YAC9C7D,OAAO,SAAAqF,GAAA,IAAAC,EAAA9U,OAAA+U,GAAA,EAAA/U,CAAA6U,EAAA,GAAEpZ,EAAFqZ,EAAA,GAAAA,EAAA,UAAkBrZ,IAAQ+T,IACjC1U,IAAI,SAAAka,GAAA,IAAAC,EAAAjV,OAAA+U,GAAA,EAAA/U,CAAAgV,EAAA,GAAAC,EAAA,UAAAA,EAAA,iDAKP,OADara,KAAKsa,oBAAoB,UAC1BtU,KAAK9F,IAAI,SAAAgG,GAAC,OAAIA,EAAEpB,eAAeC,4DAI3C,IAAMiB,EAAOhG,KAAKsa,oBAAoB,aAEhCC,EAAM,IAAInM,IAOhB,OANApI,EAAKA,KAAKjC,QAAQ,SAAAmC,GAChBA,EAAEpB,eAAe8L,UAAU7M,QAAQ,SAAAzD,GACjCia,EAAIX,IAAItZ,GAAYia,EAAIC,IAAIla,EAAUia,EAAIE,IAAIna,GAAY,GAAKia,EAAIC,IAAIla,EAAU,OAI9E8E,OAAAyH,EAAA,EAAAzH,CAAImV,GACRzN,OACA4N,OAAO,SAACpO,EAADqO,GAAA,IAAAC,EAAAxV,OAAA+U,GAAA,EAAA/U,CAAAuV,EAAA,GAAO9Z,EAAP+Z,EAAA,GAAYvE,EAAZuE,EAAA,UAAAxV,OAAAyH,EAAA,EAAAzH,CAA2BkH,GAA3BvL,OAAA,CAAgC,CAAC8O,KAAMhP,EAAK0X,MAAOlC,MAAS,+CAGrD,IAAA7O,EAAAxH,KACXgG,EAAOhG,KAAKsa,oBAAoB,YAEhCC,EAAM,IAAInM,IAOhB,OANApI,EAAKA,KAAKjC,QAAQ,SAAAmC,GAChBsB,EAAKyR,gBAAgB/S,EAAEpB,eAAeqB,YAAYpC,QAAQ,SAAA8V,GACxDU,EAAIX,IAAIC,GAAWU,EAAIC,IAAIX,EAASU,EAAIE,IAAIZ,GAAW,GAAKU,EAAIC,IAAIX,EAAS,OAI1EzU,OAAAyH,EAAA,EAAAzH,CAAImV,GACRzN,OACA4N,OAAO,SAACpO,EAADuO,GAAA,IAAAC,EAAA1V,OAAA+U,GAAA,EAAA/U,CAAAyV,EAAA,GAAOha,EAAPia,EAAA,GAAYzE,EAAZyE,EAAA,UAAA1V,OAAAyH,EAAA,EAAAzH,CAA2BkH,GAA3BvL,OAAA,CAAgC,CAAC8O,KAAMhP,EAAK0X,MAAOlC,MAAS,+CAItE,IAAMrQ,EAAOhG,KAAKsa,oBAAoB,YAEhCC,EAAM,IAAInM,IAOhB,OANApI,EAAKA,KAAKjC,QAAQ,SAAAmC,GAChBA,EAAEpB,eAAe6T,SAAS5U,QAAQ,SAAA0V,GAChCc,EAAIX,IAAIH,GAAWc,EAAIC,IAAIf,EAASc,EAAIE,IAAIhB,GAAW,GAAKc,EAAIC,IAAIf,EAAS,OAI1ErU,OAAAyH,EAAA,EAAAzH,CAAImV,GACRzN,OACA4N,OAAO,SAACpO,EAADyO,GAAA,IAAAC,EAAA5V,OAAA+U,GAAA,EAAA/U,CAAA2V,EAAA,GAAOla,EAAPma,EAAA,GAAY3E,EAAZ2E,EAAA,UAAA5V,OAAAyH,EAAA,EAAAzH,CAA2BkH,GAA3BvL,OAAA,CAAgC,CAAC8O,KAAMhP,EAAK0X,MAAOlC,MAAS,mDAYtE,IARA,IAAMrQ,EAAOhG,KAAKgH,MAAMlB,aAKlBmV,EAAWjY,YAAM,EAAGyU,GAEpByD,EAAW,GACR9P,EAAM,EAAGA,GANL,IAMoBA,EAAK,CACpC8P,EAAS9P,GAAO,GAChB,IAAK,IAAIC,EAAM,EAAGA,GAPP,IAOsBA,EAC/B6P,EAAS9P,GAAKC,IAAO,EAazB,OATArF,EAAKA,KAAKjC,QAAQ,SAAAmC,GAChB+U,EAASlX,QAAQ,SAAAsH,GACfnF,EAAEpB,eAAezD,EAAUgK,IAAMtH,QAAQ,SAAA6H,GACvC,IAAMR,EAAM1J,EAAUkK,GACjBsP,EAAS9P,GAAKC,KAAM6P,EAAS9P,GAAKC,IAAO,SAK7C6P,gDAIa5W,EAAW6W,GAC/B,OAAKrS,IAAQqS,EAAWnb,KAAKgH,kDAIZ0B,EAAWC,GAAW,IAAA6C,EAAAxL,KACvC,GAAI2I,IAAc3I,KAAKgH,MAAvB,CAEA,IAAK8B,IAAQH,EAAUkQ,aAAc7Y,KAAKgH,MAAM6R,cAAe,CAC7D,IAAMJ,EAAa,GACnBrT,OAAO4E,KAAKhK,KAAK0Z,UAAU3V,QAAQ,SAAA6Q,GAC5B9L,IAAQH,EAAUkQ,aAAajE,GAASpJ,EAAKxE,MAAM6R,aAAajE,MACnE6D,EAAW7D,GAAUpJ,EAAKkO,SAAS9E,GAAQpJ,EAAKxE,MAAM6R,aAAajE,OAGnExP,OAAO4E,KAAKyO,GAAYvU,QAC1BlE,KAAKgJ,SAAS,SAAChC,EAAO3G,GAAR,MAAmB,CAC/BoY,WAAWrT,OAAAqH,EAAA,EAAArH,CAAA,GACN4B,EAAMyR,WACNA,MAMX,IAAK3P,IAAQH,EAAU8P,WAAYzY,KAAKgH,MAAMyR,YAAa,CACzD,IAAM2C,EAAkBpD,GAAYhG,WAAZ,EAAA5M,OAAAyH,EAAA,EAAAzH,CAAgBA,OAAO2U,OAAO/Z,KAAKgH,MAAMyR,cACjEzY,KAAKgJ,SAAS,CACZlD,aAAcsV,IAEhBpb,KAAKK,MAAMgb,mBAAmBD,sCAIzB,IAAApN,EAAAhO,KAaP,OAXIA,KAAKgH,MAAMlB,eAAiB9F,KAAK8Y,mBACnC9Y,KAAK8Y,iBAAmB9Y,KAAKgH,MAAMlB,aACnC9F,KAAK+Y,cAAgB,CACnBL,OAAQ1Y,KAAKsb,kBACb1K,UAAW5Q,KAAKub,oBAChB1H,SAAU7T,KAAKwb,mBACf7C,SAAU3Y,KAAKyb,mBACf7C,YAAa5Y,KAAK0b,yBAKpBhb,EAAAC,EAAAC,cAAA,OAAKE,UAAU,WACbJ,EAAAC,EAAAC,cAAA,oBACAF,EAAAC,EAAAC,cAAA,OAAKE,UAAU,eACbJ,EAAAC,EAAAC,cAAA,QAAME,UAAU,sBAAhB,SAGAJ,EAAAC,EAAAC,cAAC+a,GAAA,YAAD,CACE3V,KAAMhG,KAAK+Y,cAAcL,OACzBpB,SAAU,SAAAoB,GACR1K,EAAKhF,SAAS,CACZ6P,aAAazT,OAAAqH,EAAA,EAAArH,CAAA,GACR4I,EAAKhH,MAAM6R,aADJ,CAEVH,cAINkD,YAAY,uBACZhH,OAAO,WACPyB,MAAOrW,KAAKgH,MAAM6R,aAAaH,UAEnChY,EAAAC,EAAAC,cAAA,OAAKE,UAAU,eACbJ,EAAAC,EAAAC,cAAA,QAAME,UAAU,sBAAhB,SAGAJ,EAAAC,EAAAC,cAAC+a,GAAA,YAAD,CACE3V,KAAMhG,KAAK+Y,cAAcnI,UACzB0G,SAAU,SAAA1G,GACR5C,EAAKhF,SAAS,CACZ6P,aAAazT,OAAAqH,EAAA,EAAArH,CAAA,GACR4I,EAAKhH,MAAM6R,aADJ,CAEVjI,iBAINgL,YAAY,0BACZC,WAAW,OACXC,UAAU,OACVC,cAAe1D,GACfhC,MAAOrW,KAAKgH,MAAM6R,aAAajI,aAEnClQ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,eACbJ,EAAAC,EAAAC,cAAA,QAAME,UAAU,sBAAhB,WAGAJ,EAAAC,EAAAC,cAAC+a,GAAA,YAAD,CACE3V,KAAMhG,KAAK+Y,cAAclF,SACzByD,SAAU,SAAAzD,GACR7F,EAAKhF,SAAS,CACZ6P,aAAazT,OAAAqH,EAAA,EAAArH,CAAA,GACR4I,EAAKhH,MAAM6R,aADJ,CAEVhF,gBAIN+H,YAAY,0BACZhH,OAAO,WACPiH,WAAW,OACXC,UAAU,OACVC,cAAe1D,GACfhC,MAAOrW,KAAKgH,MAAM6R,aAAahF,YAEnCnT,EAAAC,EAAAC,cAAA,OAAKE,UAAU,eACbJ,EAAAC,EAAAC,cAAA,QAAME,UAAU,sBAAhB,aAGAJ,EAAAC,EAAAC,cAAC+a,GAAA,YAAD,CACE3V,KAAMhG,KAAK+Y,cAAcJ,SACzBrB,SAAU,SAAAqB,GACR3K,EAAKhF,SAAS,CACZ6P,aAAazT,OAAAqH,EAAA,EAAArH,CAAA,GACR4I,EAAKhH,MAAM6R,aADJ,CAEVF,gBAINiD,YAAY,0BACZhH,OAAO,WACPiH,WAAW,OACXC,UAAU,OACVC,cAAe1D,GACfhC,MAAOrW,KAAKgH,MAAM6R,aAAaF,YAGnCjY,EAAAC,EAAAC,cAACob,GAAD,CACE3F,MAAOrW,KAAKgH,MAAM6R,aAAaD,YAC/BtB,SAAU,SAAAsB,GACR5K,EAAKhF,SAAS,CACZ6P,aAAazT,OAAAqH,EAAA,EAAArH,CAAA,GACR4I,EAAKhH,MAAM6R,aADJ,CAEVD,mBAINf,QAAS7X,KAAK+Y,cAAcH,eAE5B5Y,KAAKuK,SACL7J,EAAAC,EAAAC,cAACqb,EAAA,SAAD,KACEvb,EAAAC,EAAAC,cAAA,KAAGE,UAAU,wBAAb,SACQJ,EAAAC,EAAAC,cAAA,QAAME,UAAU,gCAAgCd,KAAKgH,MAAMlB,aAAaE,KAAK9B,QAClF,IAFH,OAEWxD,EAAAC,EAAAC,cAAA,QAAME,UAAU,gCAAgCd,KAAKK,MAAM2F,KAAKA,KAAK9B,QAFhF,aAKAxD,EAAAC,EAAAC,cAAA,OAAKE,UAAU,sBACbJ,EAAAC,EAAAC,cAAA,UACEE,UAAU,iBACVob,QAAS,kBAAMlO,EAAKhF,SAAS,CAC3B6P,aAAczT,OAAO4U,QAAQhM,EAAKhH,MAAM6R,cACrC6B,OAAO,SAAChP,EAADyQ,GAAA,IAAAC,EAAAhX,OAAA+U,GAAA,EAAA/U,CAAA+W,EAAA,GAAO5K,EAAP6K,EAAA,GAAAA,EAAA,UAAAhX,OAAAqH,EAAA,EAAArH,CAAA,GAAqBsG,EAArBtG,OAAAiX,GAAA,EAAAjX,CAAA,GAA2BmM,EAAI,MAAM,QAJnD,0BAzWQpQ,6BCLPmb,OAdf,SAAAhE,GAA0C,IAAfhV,EAAegV,EAAfhV,KAAMiZ,EAASjE,EAATiE,MAC/B,OACE7b,EAAAC,EAAAC,cAAA,OAAKE,UAAU,qBACbJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,yBAAyB0D,MAAO,CAACgY,WAAYD,KAC5D7b,EAAAC,EAAAC,cAAA,QAAME,UAAU,2BAA2BwC,KCE3CoP,WAAgB,CACpBC,EAAG,mBACHrR,EAAG,YACHC,EAAG,gBACHC,EAAG,yBAGCoR,GAAe,CACnBD,EAAG,UACHrR,EAAG,UACHC,EAAG,UACHC,EAAG,WAGL,SAASib,GAATnE,GAAsC,IAChCoE,EADgCpE,EAAVqE,OACPzc,IAAI,SAAAqN,GAAK,OAC1B7M,EAAAC,EAAAC,cAAA,MAAIC,IAAK0M,EAAMjK,MACb5C,EAAAC,EAAAC,cAACgc,GAAoBrP,MAIzB,OACE7M,EAAAC,EAAAC,cAAA,OAAKE,UAAU,gBACbJ,EAAAC,EAAAC,cAAA,UACG8b,QAaHG,eACJ,SAAAA,EAAYxc,GAAO,IAAAN,EAAAqF,OAAAC,EAAA,EAAAD,CAAApF,KAAA6c,GACjB9c,EAAAqF,OAAAyB,EAAA,EAAAzB,CAAApF,KAAAoF,OAAA0B,EAAA,EAAA1B,CAAAyX,GAAA9V,KAAA/G,KAAMK,IAEN,IACMyc,EAAeja,EAAa3C,IAAI,SAAAwX,GAAI,MAAK,CAAEpU,KAAMoU,EAAM6E,MAAOzZ,EAAkB4U,MAChFqF,EAAiB/Z,YAAM,GAAG9C,IAAI,SAAA4D,GAAC,MAAK,CAAER,KAAMoP,GAAc5O,GAAIyY,MAAO3J,GAAa9O,MALvE,OAOjB/D,EAAKid,QAAU,CACb9c,IAAMQ,EAAAC,EAAAC,cAAC6b,GAAD,CAAkBE,OALR,CAAC,CAAErZ,KAAM,UAAWiZ,MAAO,cAM3CU,OAASvc,EAAAC,EAAAC,cAAC6b,GAAD,CAAkBE,OAAQG,IACnCjJ,SAAWnT,EAAAC,EAAAC,cAAC6b,GAAD,CAAkBE,OAAQI,KAVtBhd,qFAcGuE,EAAW6W,GAC/B,OAAInb,KAAKK,MAAMC,SAASC,WAAa+D,EAAUhE,SAASC,0CAIjD,IAAAiH,EAAAxH,KACDkd,EAAQ9X,OAAO4E,KAAKhK,KAAKgd,SAAS/W,KAAK,SAAAiX,GAAK,OAAI1V,EAAKnH,MAAMC,SAASC,SAASC,SAAS0c,KAE5F,OACExc,EAAAC,EAAAC,cAACuc,GAAA,EAAD,CACEC,QAAM,EACNV,MAAOQ,EACPG,KAAM,CAAElU,OAAQ,EAAGmU,QAAS,GAC5BzP,MAAO,CAAE1E,OAAQ,OAAQmU,QAAS,GAClCC,MAAO,CAAEpU,OAAQ,EAAGmU,QAAS,IAC5B,SAAAJ,GAAK,YACM/X,IAAV+X,GACG,SAAA7c,GAAK,OACJK,EAAAC,EAAAC,cAACuc,GAAA,EAASK,IAAV,CAAchZ,MAAKY,OAAAqH,EAAA,EAAArH,CAAA,GAAO/E,IACvBmH,EAAKwV,QAAQE,cAlCJ/b,aA0CXC,eAAWyb,ICpFpBvW,WAAmB,SAACC,GAAD,OAAgBA,EAAWC,SAAS,KAAKC,KAAKC,IAAYC,SAAS,MA2I7E8W,+LAvIXzd,KAAK0d,OAASna,YAAOvD,KAAK2d,WAAWnZ,MAAM,QAAS,SACpDxE,KAAKyH,IAAMlE,YAAOvD,KAAK0H,QAAQ/D,KAAK,SAAU,GAE9C3D,KAAK0E,OAAS,CAAED,IAAK,GAAIyC,MAAO,GAAIC,OAAQ,GAAItC,KAAM,IACtD7E,KAAK4d,UAAY,GACjB5d,KAAK6d,WAAa,GAElB7d,KAAK+I,WAAW/I,KAAKK,MAAMyd,8CAGlB9X,GAAM,IAAAjG,EAAAC,KACf,GAAKgG,GAASA,EAAK9B,OAAnB,CAEA,IAAM6Z,EAAY/X,EAAKgY,QAAQ9d,IAAI,SAACgG,EAAGpC,GAAJ,OAAAsB,OAAAqH,EAAA,EAAArH,CAAA,GAAgBc,EAAhB,CAAmBpC,QAAMma,UACtD5T,EAAYrK,KAAKyH,IAAI6C,UAAU,KAAKtE,KAAK+X,GAEzCpB,EAAS3W,EAAK9F,IAAI,SAACwN,EAAQuJ,GAC/B,IAAIpS,EAAOmB,EAAK,GAAGrB,EAAI5E,EAAK2E,OAAOG,KAC/BJ,EAAkB,EAAZuB,EAAK,GAAGrB,EAAmB,EAAX+I,EAAO/I,EAAQ5E,EAAK2E,OAAOD,IACjD6E,EAAQtD,EAAK,GAAGrB,EAAI5E,EAAK6d,UAO7B,OANI3G,IAAUjR,EAAK9B,OAAS,IAC1BW,GAAQ6I,EAAO/I,EACfF,GAAOiJ,EAAO/I,EACd2E,GAASoE,EAAO/I,GAGX,CAAEE,OAAMJ,MAAK6E,WAGhB4U,EAAgBle,KAAKyH,IAAI9D,KAAK,UAC9Bwa,EAAwB,EAAZnY,EAAK,GAAGrB,EAAQ3E,KAAK0E,OAAOD,IAAMzE,KAAK0E,OAAOyC,OAC1DiX,EAAkBD,EAAYD,EAE9BG,EAAkBjR,OAAOC,SAASrN,KAAKyH,IAAIjD,MAAM,SAASgB,QAAQ,KAAM,KACxE8Y,EAA0B,EAAZtY,EAAK,GAAGrB,EAAQ3E,KAAK0E,OAAOG,KAAO7E,KAAK0E,OAAOwC,MAAQlH,KAAK4d,UAAY5d,KAAK6d,WAC3FU,EAAoBD,EAAcD,EAExCre,KAAK0d,OACFnX,aACEQ,KAAKT,IACL9B,MAAM,QAHX,GAAAzD,OAGuBud,EAHvB,OAKAte,KAAKyH,IACFlB,aACEQ,KAAKT,IACL3C,KAAK,SAAUwa,GAEpB9T,EAAUsD,OACL5G,KAAK,SAAA4H,GAAC,OAAIA,EAAEpL,OAAO,QACfI,KAAK,UAAW,KACpBoD,KAAK,SAAA4H,GAAC,OAAIA,EAAEpL,OAAO,QACfI,KAAK,UAAW,KACtB4C,aACEQ,KAAKT,IACLS,KAAK,SAAA4H,GAAC,OAAIA,EAAEpL,OAAO,UACfI,KAAK,KAAMqC,EAAK,GAAGrB,EAAI5E,EAAK2E,OAAOG,MACnClB,KAAK,KAAM,SAAAuC,GAAC,OAAgB,EAAZF,EAAK,GAAGrB,EAAQuB,EAAEvB,EAAI5E,EAAK2E,OAAOD,MAClDd,KAAK,UAAW,KACpBiK,SAELvD,EACG9D,aACEQ,KAAKT,IACLS,KAAK,SAAA4H,GAAC,OAAIA,EAAEpL,OAAO,UACfI,KAAK,IAAK,SAAAuC,GAAC,OAAIA,EAAEvB,IACjBhB,KAAK,KAAMqC,EAAK,GAAGrB,EAAI5E,EAAK2E,OAAOG,MACnClB,KAAK,KAAM,SAAAuC,GAAC,OAAgB,EAAZF,EAAK,GAAGrB,EAAQuB,EAAEvB,EAAI5E,EAAK2E,OAAOD,QACtDsC,KAAK,SAAA4H,GAAC,OAAIA,EAAEpL,OAAO,QACfI,KAAK,KAAM,SAAAuC,GAAC,OAAIyW,EAAOzW,EAAEpC,GAAGe,OAC5BlB,KAAK,KAAM,SAAAuC,GAAC,OAAIyW,EAAOzW,EAAEpC,GAAGe,KAAO8X,EAAOzW,EAAEpC,GAAGwF,QAC/C3F,KAAK,KAAM,SAAAuC,GAAC,OAAIyW,EAAOzW,EAAEpC,GAAGW,MAC5Bd,KAAK,KAAM,SAAAuC,GAAC,OAAIyW,EAAOzW,EAAEpC,GAAGW,QAChCsC,KAAK,SAAA4H,GAAC,OAAIA,EAAEpL,OAAO,QACfI,KAAK,IAAK,SAAAuC,GAAC,OAAIyW,EAAOzW,EAAEpC,GAAGe,KAAO8X,EAAOzW,EAAEpC,GAAGwF,MAAQ,IACtD3F,KAAK,IAAK,SAAAuC,GAAC,OAAIyW,EAAOzW,EAAEpC,GAAGW,MAC3BnB,KAAK,SAAA4C,GAAC,OAAIA,EAAEqH,UAErBlD,EAAUwD,QAAQ5J,OAAO,KACpB8C,KAAK,SAAA4H,GAAC,OAAIA,EAAE1K,OAAO,UACfN,KAAK,IAAK,SAAAuC,GAAC,OAAIA,EAAEvB,IACjBhB,KAAK,KAAMqC,EAAK,GAAGrB,EAAI5E,EAAK2E,OAAOG,KAAO0Z,EAAoB,GAC9D5a,KAAK,KAAM,SAAAuC,GAAC,OAAgB,EAAZF,EAAK,GAAGrB,EAAQuB,EAAEvB,EAAI5E,EAAK2E,OAAOD,IAAM2Z,IACxDza,KAAK,UAAW,KACpBoD,KAAK,SAAA4H,GAAC,OAAIA,EAAE1K,OAAO,QACfN,KAAK,KAAM,SAAAuC,GAAC,OAAIyW,EAAOzW,EAAEpC,GAAGe,KAAO0Z,EAAoB,IACvD5a,KAAK,KAAM,SAAAuC,GAAC,OAAIyW,EAAOzW,EAAEpC,GAAGe,KAAO8X,EAAOzW,EAAEpC,GAAGwF,MAAQiV,EAAoB,IAC3E5a,KAAK,KAAM,SAAAuC,GAAC,OAAIyW,EAAOzW,EAAEpC,GAAGW,IAAM2Z,IAClCza,KAAK,KAAM,SAAAuC,GAAC,OAAIyW,EAAOzW,EAAEpC,GAAGW,IAAM2Z,IAClCza,KAAK,kBAAmB,cACxBA,KAAK,UAAW,KACpBoD,KAAK,SAAA4H,GAAC,OAAIA,EAAE1K,OAAO,QACfN,KAAK,IAAK,SAAAuC,GAAC,OAAIyW,EAAOzW,EAAEpC,GAAGe,KAAO8X,EAAOzW,EAAEpC,GAAGwF,MAAQ,EAAIiV,EAAoB,IAC9E5a,KAAK,IAAK,SAAAuC,GAAC,OAAIyW,EAAOzW,EAAEpC,GAAGW,IAAM2Z,IACjCza,KAAK,qBAAsB,WAC3BL,KAAK,SAAA4C,GAAC,OAAIA,EAAEqH,QACZ5J,KAAK,UAAW,KACtB4C,aACEQ,KAAKT,IACLS,KAAK,SAAA4H,GAAC,OAAIA,EAAEpL,OAAO,UACfI,KAAK,KAAMqC,EAAK,GAAGrB,EAAI5E,EAAK2E,OAAOG,MACnClB,KAAK,KAAM,SAAAuC,GAAC,OAAgB,EAAZF,EAAK,GAAGrB,EAAQuB,EAAEvB,EAAI5E,EAAK2E,OAAOD,MAClDd,KAAK,UAAW,KACpBoD,KAAK,SAAA4H,GAAC,OAAIA,EAAEpL,OAAO,QACfI,KAAK,KAAM,SAAAuC,GAAC,OAAIyW,EAAOzW,EAAEpC,GAAGe,OAC5BlB,KAAK,KAAM,SAAAuC,GAAC,OAAIyW,EAAOzW,EAAEpC,GAAGe,KAAO8X,EAAOzW,EAAEpC,GAAGwF,QAC/C3F,KAAK,KAAM,SAAAuC,GAAC,OAAIyW,EAAOzW,EAAEpC,GAAGW,MAC5Bd,KAAK,KAAM,SAAAuC,GAAC,OAAIyW,EAAOzW,EAAEpC,GAAGW,MAC5Bd,KAAK,UAAW,KACpBoD,KAAK,SAAA4H,GAAC,OAAIA,EAAEpL,OAAO,QACfI,KAAK,IAAK,SAAAuC,GAAC,OAAIyW,EAAOzW,EAAEpC,GAAGe,KAAO8X,EAAOzW,EAAEpC,GAAGwF,MAAQ,IACtD3F,KAAK,IAAK,SAAAuC,GAAC,OAAIyW,EAAOzW,EAAEpC,GAAGW,MAC3Bd,KAAK,UAAW,iDAGR+E,GACbA,EAAUoV,YAAc9d,KAAKK,MAAMyd,WACrC9d,KAAK+I,WAAW/I,KAAKK,MAAMyd,4CAGtB,IAAAtW,EAAAxH,KACP,OACEU,EAAAC,EAAAC,cAAA,OAAKE,UAAU,eAAemN,IAAK,SAAAyP,GAAM,OAAIlW,EAAKmW,UAAYD,IAC5Dhd,EAAAC,EAAAC,cAAA,OAAKqN,IAAK,SAAAxG,GAAG,OAAID,EAAKE,OAASD,GAAK6B,MAAM,iBA5HxBnI,aCeXqd,4LAdX,OACE9d,EAAAC,EAAAC,cAAA,OAAKE,UAAU,WACbJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,gBACbJ,EAAAC,EAAAC,cAAC6d,GAAD,CAASzY,KAAMhG,KAAKK,MAAM2F,KAAMqV,mBAAoBrb,KAAKK,MAAMgb,sBAEjE3a,EAAAC,EAAAC,cAAA,OAAKE,UAAU,mBACbJ,EAAAC,EAAAC,cAAC8d,GAAD,CAAaZ,UAAW9d,KAAKK,MAAMyd,YACnCpd,EAAAC,EAAAC,cAAC+d,GAAD,eATYxd,cC0CPyd,8BA1Cb,SAAAA,EAAYve,GAAO,IAAAN,EAAA,OAAAqF,OAAAC,EAAA,EAAAD,CAAApF,KAAA4e,IACjB7e,EAAAqF,OAAAyB,EAAA,EAAAzB,CAAApF,KAAAoF,OAAA0B,EAAA,EAAA1B,CAAAwZ,GAAA7X,KAAA/G,KAAMK,KAED2G,MAAQ,CACX6X,OAAQxe,EAAMye,aAAc,GAE9B/e,EAAKgf,SAAWhf,EAAKgf,SAASzX,KAAdlC,OAAAmC,EAAA,EAAAnC,QAAAmC,EAAA,EAAAnC,CAAArF,KANCA,0EAUjBC,KAAKgJ,SAAS,SAAAhC,GAAK,MAAK,CAAE6X,QAAS7X,EAAM6X,2CAGlC,IAAArX,EAAAxH,KACP,OACEU,EAAAC,EAAAC,cAAA,OAAKE,UAAS,oBAAAC,OAAsBf,KAAKgH,MAAM6X,OAAS,4BAA8B,KACpFne,EAAAC,EAAAC,cAAA,OAAKE,UAAU,0BAA0Bob,QAASlc,KAAK+e,UACrDre,EAAAC,EAAAC,cAAA,QAAME,UAAU,gCAAgCd,KAAKK,MAAM2e,OAC3Dte,EAAAC,EAAAC,cAAA,QAAME,UAAU,iCAAhB,MAIFJ,EAAAC,EAAAC,cAACuc,GAAA,EAAD,CAAQC,QAAM,EAACC,KAAM,CAAElU,OAAQnJ,KAAKgH,MAAM6X,OAAS,OAAS,GAAK5d,GAAI,CAAEkI,OAAQnJ,KAAKgH,MAAM6X,OAAS,OAAS,IACzG,SAAAxe,GAAK,OACJK,EAAAC,EAAAC,cAACuc,GAAA,EAASK,IAAV,CAAc1c,UAAU,4BAA4B0D,MAAOnE,GACzDK,EAAAC,EAAAC,cAAA,OAAKE,UAAU,mCACZ0G,EAAKnH,MAAM4e,qBA3BC9d,+bCiBd+d,GAAA,CACb5d,EAAG6d,KACH5d,EAAG6d,KACH5d,EAAG6d,KACH5d,EAAG6d,KACHrd,EAAGsd,KACHC,EAAGC,KACHC,EAAGC,KACHC,EAAGC,KACHC,EAAGC,KACHC,GAAIC,KACJC,GAAIC,KACJC,GAAIC,KACJC,GAAIC,KACJC,GAAIC,KACJC,GAAIC,KACJC,GAAIC,KACJC,GAAIC,KACJC,GAAIC,KACJC,GAAIC,KACJC,GAAIC,KACJC,GAAIC,MCiGSC,eAjIb,SAAAA,EAAYnhB,GAAO,IAAAN,EAAA,OAAAqF,OAAAC,EAAA,EAAAD,CAAApF,KAAAwhB,IACjBzhB,EAAAqF,OAAAyB,EAAA,EAAAzB,CAAApF,KAAAoF,OAAA0B,EAAA,EAAA1B,CAAAoc,GAAAza,KAAA/G,KAAMK,KAEDohB,YAAc,KAHF1hB,qFAMGuE,GACpB,OAAIA,EAAUC,UAAYvE,KAAKK,MAAMkE,SAChCD,EAAUhE,WAAaN,KAAKK,MAAMC,+CAI3BohB,GACZ,OAAOA,EACJxhB,IAAI,SAAAyhB,GAAG,OAAKjhB,EAAAC,EAAAC,cAAA,QAAMC,IAAK8gB,EAAK7gB,UAAU,6BAA6B6gB,KACnEjH,OAAO,SAACkH,EAAKC,GAAN,MAAc,CAACD,EAAK,KAAMC,sCAG7B,IAAAra,EAAAxH,KACP,IAAKA,KAAKK,MAAMkE,UAAYvE,KAAKyhB,YAAa,OAAO,KAErD,IAAMld,EAAUvE,KAAKK,MAAMkE,SAAWvE,KAAKyhB,YAChB,OAAvBzhB,KAAKK,MAAMkE,UACbvE,KAAKyhB,YAAczhB,KAAKK,MAAMkE,SALzB,IAAAud,EAoBHvd,EAAQO,eAZVC,EARK+c,EAQL/c,cACAgd,EATKD,EASLC,qBACA5b,EAVK2b,EAUL3b,WACA0F,EAXKiW,EAWLjW,OACAmW,EAZKF,EAYLE,gBACAC,EAbKH,EAaLG,MACAtJ,EAdKmJ,EAcLnJ,SACAU,EAfKyI,EAeLzI,iBACAE,EAhBKuI,EAgBLvI,iBACA2I,EAjBKJ,EAiBLI,YACApU,EAlBKgU,EAkBLhU,aACA8C,EAnBKkR,EAmBLlR,UAGIiD,EAAWzO,OAAAyH,EAAA,EAAAzH,CAAI,IAAI+T,IAAJ/T,OAAAyH,EAAA,EAAAzH,CAAYiU,GAAZtY,OAAAqE,OAAAyH,EAAA,EAAAzH,CAAiCmU,MAAoBzM,OAEpEqV,EAAQ,CACZ/T,IAAK,CAAEgU,KAAI,gBAAArhB,OAAkBoF,GAAc/F,MAAO,QAClDwG,OAAQ,CAAEwb,KAAI,mBAAArhB,OAAqBoF,GAAc/F,MAAO,WACxDqS,SAAU,CAAE2P,KAAI,qBAAArhB,OAAuBoF,GAAc/F,MAAO,cAGxDiiB,EAAWjd,OAAO4E,KAAKmY,GAAOjiB,IAAI,SAAAoiB,GACtC,IAAMniB,EAAOgiB,EAAMG,GACbliB,EAAQoH,EAAKnH,MAAMC,SAASC,SAASC,SAASL,EAAKC,OACzD,OACEM,EAAAC,EAAAC,cAACI,EAAA,EAAD,CACEH,IAAKyhB,EACLrhB,GAAId,EAAKiiB,KACTthB,UAAS,uBAAAC,OAAyBX,EAAQ,8BAAgC,KACzEkiB,KAKP,OACE5hB,EAAAC,EAAAC,cAAA,OAAKE,UAAU,YACbJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,mBAAmB0D,MAAO,CAAE+d,gBAAe,OAAAxhB,OAASme,GAAc/Y,GAAvB,QAC1DzF,EAAAC,EAAAC,cAAA,OAAKE,UAAU,qBACbJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,4BACbJ,EAAAC,EAAAC,cAAA,MAAIE,UAAU,mBAAmBiE,GACjCrE,EAAAC,EAAAC,cAAA,MAAIE,UAAU,sBAAsB8P,EAAUtF,KAAK,QAErD5K,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAC4hB,GAAD,CAAgBxD,MAAM,uBAAuBF,YAAY,GACvDpe,EAAAC,EAAAC,cAAA,UACEF,EAAAC,EAAAC,cAAA,4BACAF,EAAAC,EAAAC,cAAA,UACEF,EAAAC,EAAAC,cAACgc,GAAD,CAAiBtZ,KAAMwK,EAAcyO,MAAOzZ,EAAkBgL,MAGhEpN,EAAAC,EAAAC,cAAA,iCACAF,EAAAC,EAAAC,cAAA,UAAKmhB,GAELrhB,EAAAC,EAAAC,cAAA,2BACAF,EAAAC,EAAAC,cAAA,UAAKohB,GAELthB,EAAAC,EAAAC,cAAA,iCACAF,EAAAC,EAAAC,cAAA,aAAAG,OAAQyM,YAAO,IAAPA,CAAY3B,EAAO4W,YAAYjd,QAAQ,KAAM,KAArD,QAEA9E,EAAAC,EAAAC,cAAA,4BACAF,EAAAC,EAAAC,cAAA,aAAAG,OAAQyM,YAAO,IAAPA,CAAY3B,EAAOC,QAAQtG,QAAQ,KAAM,KAAjD,QAEA9E,EAAAC,EAAAC,cAAA,wBACAF,EAAAC,EAAAC,cAAA,aAAAG,OAAQkhB,EAAMS,MAAd,OAAA3hB,OAAyBkhB,EAAMU,QAKnCjiB,EAAAC,EAAAC,cAAC4hB,GAAD,CAAgBxD,MAAM,aACpBte,EAAAC,EAAAC,cAAA,SACGZ,KAAK4iB,cAAcjK,KAIxBjY,EAAAC,EAAAC,cAAC4hB,GAAD,CAAgBxD,MAAM,YACpBte,EAAAC,EAAAC,cAAA,SACGZ,KAAK4iB,cAAc/O,KAIxBnT,EAAAC,EAAAC,cAAC4hB,GAAD,CAAgBxD,MAAM,eACpBte,EAAAC,EAAAC,cAAA,SACCshB,EAAYze,MAAM,MAAMvD,IAAI,SAACiX,EAAMtW,GAClC,OAAOH,EAAAC,EAAAC,cAACqb,EAAA,SAAD,CAAUpb,IAAKA,GAAMsW,EAAKzW,EAAAC,EAAAC,cAAA,iBAMvCF,EAAAC,EAAAC,cAAA,OAAKE,UAAU,mBACZuhB,YAtHSlhB,aCHhB0hB,yMACkBve,EAAW6W,GAC/B,OAAI7W,EAAU0B,OAAShG,KAAKK,MAAM2F,MAC7B1B,EAAUuB,KAAO7F,KAAKK,MAAMwF,IAC5BvB,EAAUhE,WAAaN,KAAKK,MAAMC,0CAIhC,IAAAP,EAAAC,KACD8iB,EAAiB9iB,KAAKK,MAAM2F,KAAKA,KACpC0U,OAAO,SAACkH,EAAKC,GAAN,OAAAzc,OAAAqH,EAAA,EAAArH,CAAA,GAAoBwc,EAApBxc,OAAAiX,GAAA,EAAAjX,CAAA,GAA0Byc,EAAI/c,eAAeqB,WAAazF,EAAAC,EAAAC,cAACmiB,GAAD,CAASxe,QAASsd,EAAKvhB,SAAUP,EAAKM,MAAMC,cAAiB,IAEjI,OACEI,EAAAC,EAAAC,cAACuc,GAAA,EAAD,CACEC,QAAM,EACNV,MAAO1c,KAAKK,MAAMwF,GAClBwX,KAAM,CAAEC,QAAS,EAAG1O,UAAW,mBAC/Bf,MAAO,CAAEyP,QAAS,EAAG1O,UAAW,iBAChC2O,MAAO,CAAED,QAAS,EAAG1O,UAAW,oBAC/B,SAAA/I,GAAE,OACO,IAARA,GACG,SAAAxF,GAAK,OACJK,EAAAC,EAAAC,cAACuc,GAAA,EAASK,IAAV,CAAc1c,UAAU,qBAAqB0D,MAAKY,OAAAqH,EAAA,EAAArH,CAAA,GAAO/E,IACtDyiB,EAAejd,cAvBF1E,cAoCfC,eAAWyhB,IC6BXG,8BAzDb,SAAAA,EAAY3iB,GAAO,IAAAN,EAAA,OAAAqF,OAAAC,EAAA,EAAAD,CAAApF,KAAAgjB,IACjBjjB,EAAAqF,OAAAyB,EAAA,EAAAzB,CAAApF,KAAAoF,OAAA0B,EAAA,EAAA1B,CAAA4d,GAAAjc,KAAA/G,KAAMK,KAED2G,MAAQ,CACXlB,aAAckK,EACd8N,UAAW,MAGb/d,EAAKsb,mBAAqBtb,EAAKsb,mBAAmB/T,KAAxBlC,OAAAmC,EAAA,EAAAnC,QAAAmC,EAAA,EAAAnC,CAAArF,KAC1BA,EAAK4M,gBAAkB5M,EAAK4M,gBAAgBrF,KAArBlC,OAAAmC,EAAA,EAAAnC,QAAAmC,EAAA,EAAAnC,CAAArF,KATNA,kFAYAkjB,GACjBjjB,KAAKgJ,SAAS,CACZlD,aAAcmd,4CAIFA,GACdjjB,KAAKgJ,SAAS,CACZ8U,UAAWmF,qCAIN,IAAAzb,EAAAxH,KACP,OACEU,EAAAC,EAAAC,cAACsiB,EAAA,EAAD,CAAQC,SAAUC,IAChB1iB,EAAAC,EAAAC,cAAA,OAAKE,UAAU,OACbJ,EAAAC,EAAAC,cAACyiB,EAAD,MACA3iB,EAAAC,EAAAC,cAAA,OAAKE,UAAU,gBACbJ,EAAAC,EAAAC,cAAC0iB,GAAD,CAAStd,KAAMgK,EAAUqL,mBAAoBrb,KAAKqb,mBAAoByC,UAAW9d,KAAKgH,MAAM8W,YAC5Fpd,EAAAC,EAAAC,cAAC2iB,EAAA,EAAD,KACE7iB,EAAAC,EAAAC,cAAC4iB,EAAA,EAAD,CAAO9d,KAAK,IAAIC,OAAK,EAAC8d,OAAQ,SAAApjB,GAAK,OACjCK,EAAAC,EAAAC,cAAC8iB,EAAA,EAAD,CAAUziB,GAAG,eAEfP,EAAAC,EAAAC,cAAC4iB,EAAA,EAAD,CAAO9d,KAAK,OAAO+d,OAAQ,SAAApjB,GAAK,OAC9BK,EAAAC,EAAAC,cAAC+iB,GAAD,CAAK3d,KAAMgK,EAAUlK,aAAc0B,EAAKR,MAAMlB,aAAc6G,gBAAiBnF,EAAKmF,qBAEpFjM,EAAAC,EAAAC,cAAC4iB,EAAA,EAAD,CAAO9d,KAAK,UAAU+d,OAAQ,SAAApjB,GAAK,OACjCK,EAAAC,EAAAC,cAACgjB,EAAD,CAAQ5d,KAAMgK,EAAUlK,aAAc0B,EAAKR,MAAMlB,aAAc6G,gBAAiBnF,EAAKmF,qBAEvFjM,EAAAC,EAAAC,cAAC4iB,EAAA,EAAD,CAAO9d,KAAK,YAAY+d,OAAQ,SAAApjB,GAAK,OACnCK,EAAAC,EAAAC,cAACijB,GAAD,CAAUlX,gBAAiBnF,EAAKmF,sBAGpCjM,EAAAC,EAAAC,cAAC4iB,EAAA,EAAD,CAAOC,OAAQ,SAAApjB,GAAK,OAClBK,EAAAC,EAAAC,cAACkjB,GAAD,CACE9d,KAAMgK,EACNnK,GAAIuH,OAAOC,SAAStH,EAAa1F,EAAMC,0BAjDrCa,cCJE4iB,QACW,cAA7Bvb,OAAOlI,SAAS0jB,UAEe,UAA7Bxb,OAAOlI,SAAS0jB,UAEhBxb,OAAOlI,SAAS0jB,SAAS5jB,MACvB,2DCNN6jB,IAASR,OAAO/iB,EAAAC,EAAAC,cAACsjB,GAAD,MAASC,SAASC,eAAe,SD+G3C,kBAAmBC,WACrBA,UAAUC,cAAcC,MAAMC,KAAK,SAAAC,GACjCA,EAAaC,+ylrBE3HnBhlB,EAAAC,QAAiBC,EAAAC,EAAuB,gFCAxCH,EAAAC,QAAiBC,EAAAC,EAAuB,0ECAxCH,EAAAC,QAAiBC,EAAAC,EAAuB,uFCAxCH,EAAAC,QAAiBC,EAAAC,EAAuB,2ECAxCH,EAAAC,QAAiBC,EAAAC,EAAuB,iECAxCH,EAAAC,QAAiBC,EAAAC,EAAuB,6ECAxCH,EAAAC,QAAiBC,EAAAC,EAAuB,uECAxCH,EAAAC,QAAiBC,EAAAC,EAAuB","file":"static/js/main.7b210e18.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/9-MERiT.483be082.jpg\";","module.exports = __webpack_public_path__ + \"static/media/10-Mo-Bo.87f2f9fc.jpg\";","module.exports = __webpack_public_path__ + \"static/media/11-Matt-och-steg.80797cbb.jpg\";","module.exports = __webpack_public_path__ + \"static/media/12-SAMIR.d14d2eb6.jpg\";","module.exports = __webpack_public_path__ + \"static/media/13-Sensorer-for-luftmiljo.4362eb63.jpg\";","module.exports = __webpack_public_path__ + \"static/media/14-R-energi.05d591b6.JPG\";","module.exports = __webpack_public_path__ + \"static/media/15-Sharing-Cities-Sweden.0c3256df.jpg\";","module.exports = __webpack_public_path__ + \"static/media/16-Matbutik.1f0245a6.jpg\";","module.exports = __webpack_public_path__ + \"static/media/17-Smart-Village.c9934f37.png\";","module.exports = __webpack_public_path__ + \"static/media/18-Smaskalig-elforsorjning.83dc4dda.jpg\";","module.exports = __webpack_public_path__ + \"static/media/19-Urban-ICT-Arena.d10de260.jpg\";","module.exports = __webpack_public_path__ + \"static/media/20-Vardeskapande-med-oppna-data.c4bb7c0c.jpg\";","module.exports = __webpack_public_path__ + \"static/media/21-3De.05da2369.jpg\";","import React, { Component } from 'react';\r\nimport { Link } from \"react-router-dom\";\r\nimport { withRouter } from 'react-router';\r\nimport './Header.css';\r\n\r\nclass Header extends Component {\r\n  render() {\r\n    const views = ['Map', 'Matrix', 'Partners']\r\n    const viewLinks = views.map(view => {\r\n      const match = this.props.location.pathname.includes(view.toLowerCase());\r\n      return (\r\n        <li key={view}\r\n          className={`header-links__item ${match ? 'header-links__item--active' : ''}`}>\r\n          <Link to={`/${view.toLowerCase()}`}>\r\n            {view}\r\n          </Link>\r\n        </li>\r\n      );\r\n    });\r\n\r\n    return (\r\n      <div className=\"header\">\r\n        <div className=\"header-content\">\r\n          <div className=\"header-content__left\">\r\n            <ul className=\"header-links\">\r\n              {viewLinks}\r\n            </ul>\r\n          </div>\r\n          <div className=\"header-content__right\">\r\n            <ul className=\"header-links\">\r\n              <li className=\"header-links__item\"><a href=\"#\">About</a></li>\r\n            </ul>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withRouter(Header);\r\n","import { scaleOrdinal, rgb, packSiblings, packEnclose, select, range, format } from 'd3';\n\nexport const col2focus = {\n  1: 'focus_lifestyle',\n  2: 'focus_planning',\n  3: 'focus_mobility',\n  4: 'focus_infrastructure'\n};\n\nexport const theme2row = {\n  testbeds: 1,\n  innovation: 2,\n  financing: 3,\n  management: 4,\n  intelligence: 5\n};\n\nexport const row2theme = {\n  1: 'testbeds',\n  2: 'innovation',\n  3: 'financing',\n  4: 'management',\n  5: 'intelligence'\n};\n\nexport const focusLabel = {\n  1: 'Livsstil och  konsumtion',\n  2: 'Planering och  byggd miljö',\n  3: 'Mobilitet och  tillgänglighet',\n  4: 'Integrerad  infrastruktur'\n};\n\nexport const themeLabel = {\n  1: 'Testbäddar och  living labs',\n  2: 'Innovation och  entreprenörskap',\n  3: 'Finansierings- och  affärsmodeller',\n  4: 'Styrning',\n  5: 'Intelligens,  cybersäkerhet  och etik'\n};\n\nexport const type2class = {\n  'Forskningsprojekt': 'research',\n  'Innovationsprojekt': 'innovation',\n  'Förstudie': 'prestudy'\n}\n\nexport function circleRadius(area) {\n  return Math.sqrt(area / Math.PI);\n}\n\nexport const projectTypes = ['Forskningsprojekt', 'Innovationsprojekt', 'Förstudie'];\nexport const projectTypeColors = scaleOrdinal()\n  .range([rgb(0, 125, 145), rgb(151, 194, 142), rgb(234, 154, 0)]) // pms 3145, pms 2255, pms 2011\n  .domain(projectTypes);\n\nexport function packData(data, scaleX, scaleY) {\n  // first, group together circles that are\n  // at the same position in the matrix\n  const obj = {};\n  for (let row = 1; row <= 5; ++row) {\n    obj[row] = {};\n    for (let col = 1; col <= 4; ++col) {\n      obj[row][col] = [];\n    }\n  }\n  data.data.forEach(project => {\n    const pins = []; // so that a circle can find its buddies\n    for (let col = 1; col <= 4; ++col) {\n      project.survey_answers[col2focus[col]].forEach(theme => {\n        pins.push({\n          row: theme2row[theme],\n          col\n        });\n        obj[theme2row[theme]][col].push({\n          row: theme2row[theme],\n          col,\n          pins,\n          survey_answers: project.survey_answers,\n          r: circleRadius(project.survey_answers.budget.funded)\n        })\n      });\n    }\n  });\n\n  // first pass: pack circles and find the \"optimal scale\"\n  // and redo the circle radii to use that scale\n  let maxEnclose = 0;\n  for (let row = 1; row <= 5; ++row) {\n    for (let col = 1; col <= 4; ++col) {\n      if (!obj[row][col].length) continue; // if empty continue\n      packSiblings(obj[row][col]);\n      maxEnclose = Math.max(maxEnclose, packEnclose(obj[row][col]).r);\n    }\n  }\n  const optimalEncloseRadius = Math.min(scaleX.step() / 2, scaleY.step() / 2); // * 0.95?\n  const rScale = optimalEncloseRadius / maxEnclose;\n  for (let row = 1; row <= 5; ++row) {\n    for (let col = 1; col <= 4; ++col) {\n      obj[row][col].forEach(pin => {\n        pin.r = circleRadius(pin.survey_answers.budget.funded) * rScale;\n      });\n    }\n  }\n\n  // second pass: pack again, fix positions\n  // and return as a flat list\n  const arr = [];\n  for (let row = 1; row <= 5; ++row) {\n    for (let col = 1; col <= 4; ++col) {\n      packSiblings(obj[row][col]).forEach(pin => {\n        arr.push({\n          ...pin,\n          x: pin.x + scaleX(col),\n          y: pin.y + scaleY(row),\n          rScale\n        })\n      });\n    }\n  }\n  return arr;\n}\n\nexport function buildScaleData(packedData) {\n  if (!packedData.length) return null;\n\n  const sortedPackedData = [...packedData].sort((a, b) => a.survey_answers.budget.funded - b.survey_answers.budget.funded);\n  const minBudget = sortedPackedData[0].survey_answers.budget.funded;\n  const maxBudget = sortedPackedData[sortedPackedData.length - 1].survey_answers.budget.funded;\n  const rScale = packedData[0].rScale;\n\n  const labelNumbers = [];\n  const circleRadii = [];\n\n  labelNumbers[0] = Number.parseInt(maxBudget).toPrecision(1);\n  labelNumbers[1] = Number.parseInt(maxBudget / 2).toPrecision(1);\n  labelNumbers[2] = Number.parseInt(maxBudget / 10).toPrecision(1);\n\n  circleRadii[0] = circleRadius(labelNumbers[0]) * rScale;\n  circleRadii[1] = circleRadius(labelNumbers[1]) * rScale;\n  circleRadii[2] = circleRadius(labelNumbers[2]) * rScale;\n\n  if (Number.parseInt(maxBudget).toPrecision(1) === Number.parseInt(minBudget).toPrecision(1))\n    return [{\n      r: circleRadii[0],\n      label: `${format(',')(labelNumbers[0]).replace(/,/g, ' ')} kr`\n    }];\n\n  return range(3).map(i => ({\n    r: circleRadii[i],\n    label: `${format(',')(labelNumbers[i]).replace(/,/g, ' ')} kr`\n  }));\n}\n\n// inspired by https://bl.ocks.org/mbostock/7555321\n// replaces double spaces in the labels with fake \"newlines\"\n// (tspan elements) and fixes their positions\nexport function parseNewlinesY(texts) {\n  texts.each(function() {\n    const text = select(this);\n    const words = text.text().split(/ {2}/);\n    const x = text.attr('x');\n    const dy = parseFloat(text.attr('dy'));\n    text.text(null);\n    const lineHeight = 1.3; // em\n    let i = 0;\n    words.forEach(word => {\n      text.append('tspan')\n          .text(word)\n          .attr('x', x)\n          .attr('y', `-${(words.length - 1) * lineHeight / 2}em`)\n          .attr('dy', `${dy + (i++ * lineHeight)}em`);\n    });\n  });\n}\nexport function parseNewlinesX(texts) {\n  texts.each(function() {\n    const text = select(this).attr('text-anchor', 'start');\n    const words = text.text().split(/ {2}/);\n    const y = text.attr('y');\n    const dy = parseFloat(text.attr('dy'));\n    text.text(null);\n    const lineHeight = 1.3; // em\n    let i = 0;\n    words.forEach(word => {\n      text.append('tspan')\n          .text(word)\n          .attr('x', 0)\n          .attr('dy', `${dy + (i++ * lineHeight)}em`);\n    });\n    text.attr('transform', `translate(0,${y})rotate(-45)translate(0,${-y})`);\n  });\n}","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport './MatrixTooltip.css';\r\n\r\nconst topOffset = 10;\r\n\r\nclass MatrixTooltip extends Component {\r\n  shouldComponentUpdate(nextProps) {\r\n    if (nextProps.project !== this.props.project) return true;\r\n    return false;\r\n  }\r\n\r\n  render() {\r\n    if (!this.props.project) return null;\r\n\r\n    return (\r\n      <div\r\n        className=\"matrix-tooltip\"\r\n        style={{\r\n          top: this.props.project.y + this.props.margin.top - this.props.project.r - topOffset + this.props.offset.y,\r\n          left: this.props.project.x + this.props.margin.left + this.props.offset.x\r\n        }}>\r\n        {this.props.project.survey_answers.project_title}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nMatrixTooltip.propTypes = {\r\n  project: PropTypes.object,\r\n  margin: PropTypes.shape({\r\n    top: PropTypes.number,\r\n    right: PropTypes.number,\r\n    bottom: PropTypes.number,\r\n    left: PropTypes.number\r\n  }).isRequired,\r\n  offset: PropTypes.shape({\r\n    x: PropTypes.number,\r\n    y: PropTypes.number\r\n  }).isRequired\r\n};\r\n\r\nexport default MatrixTooltip;\r\n","import { matchPath } from 'react-router';\r\n\r\n// NOTE: For all methods that take props as an argument, it assumed that props is an object which contains\r\n// the history property and the filteredData property. If the history property is missing, make sure to \r\n// use the 'withRouter' higher-order-component on whatever component ProjectNavigator is used from.\r\nclass ProjectNavigator {\r\n  constructor(rootPath = '') {\r\n    this.rootPath = rootPath;\r\n    this._hasChangedSinceInit = false;\r\n  }\r\n\r\n  static GetProjectId(location) {\r\n    const match = matchPath(location.pathname, { path: `*/project/:id` });\r\n    if (match !== null)\r\n      return match.params.id;\r\n    return -1;\r\n  }\r\n\r\n  hasChangedSinceInit() {\r\n    return this._hasChangedSinceInit;\r\n  }\r\n\r\n  change() {\r\n    this._hasChangedSinceInit = true;\r\n  }\r\n\r\n  redirectToRoot(history) {\r\n    history.replace(this.rootPath);\r\n  }\r\n\r\n  goToRoot(history, location) {\r\n    if (matchPath(location.pathname, { path: this.rootPath, exact: true }) === null) {\r\n      this._hasChangedSinceInit = true;\r\n      history.push(this.rootPath);\r\n    }\r\n  }\r\n\r\n  goToProject(history, location, id) {\r\n    const path = `${this.rootPath}/project/${id}`;\r\n    if (matchPath(location.pathname, { path }) === null) {\r\n      this._hasChangedSinceInit = true;\r\n      history.push(path);\r\n    }\r\n  }\r\n\r\n  projectExists(location, filteredData) {\r\n    const id = ProjectNavigator.GetProjectId(location);\r\n    if (filteredData.data.find(d => d.survey_answers.project_id === id))\r\n      return true;\r\n    return false;\r\n  }\r\n\r\n  projectHasChanged(location, prevLocation) {\r\n    return ProjectNavigator.GetProjectId(location) !== ProjectNavigator.GetProjectId(prevLocation);\r\n  }\r\n}\r\n\r\nexport const GetProjectId = ProjectNavigator.GetProjectId;\r\nexport default ProjectNavigator;\r\n","import React, { Component } from 'react';\r\nimport { select, axisLeft, axisTop, event, scalePoint, easePolyOut } from 'd3';\r\nimport { themeLabel, focusLabel, packData, buildScaleData, parseNewlinesY, parseNewlinesX, type2class } from './MatrixUtility';\r\nimport { withRouter } from 'react-router-dom';\r\nimport MatrixTooltip from './MatrixTooltip';\r\nimport PropTypes from 'prop-types';\r\nimport isEqual from 'react-fast-compare';\r\nimport debounce from 'lodash.debounce';\r\nimport ProjectNavigator from '../ProjectNavigator';\r\nimport './Matrix.css';\r\n\r\nconst masterTransition = (transition) => transition.duration(800).ease(easePolyOut.exponent(4));\r\n\r\nclass Matrix extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      hoveredProject: null\r\n    };\r\n\r\n    this.margin = { top: 130, right: 20, bottom: 20, left: 160 };\r\n    this.offset = { x: 0,  y: 0 };\r\n    this.projectNavigator = new ProjectNavigator('/matrix');\r\n    this.draw = this.draw.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.svg = select(this.svgRef);\r\n\r\n    // used for transforming the contents of the svg, if necessary\r\n    this.svgInner = this.svg\r\n      .append('g')\r\n        .classed('matrix-svg-inner', true);\r\n\r\n    this.scaleX = scalePoint()\r\n        .domain([1,2,3,4])\r\n        .padding(0.5)\r\n    this.scaleY = scalePoint()\r\n        .domain([1,2,3,4,5])\r\n        .padding(0.5)\r\n\r\n    // y-axis\r\n    this.svgInner.append('g')\r\n        .classed('matrix-y-axis', true);\r\n\r\n    // themes label\r\n    this.svgInner.append('text')\r\n        .classed('themes-label', true)\r\n        .classed('matrix-axis-label', true)\r\n        .text('Teman');\r\n\r\n    // x-axis\r\n    this.svgInner.append('g')\r\n        .classed('matrix-x-axis', true);\r\n\r\n    // focus areas label\r\n    this.svgInner.append('text')\r\n        .classed('focus-areas-label', true)\r\n        .classed('matrix-axis-label', true)\r\n        .text('Fokusområden');\r\n\r\n    // make some circles\r\n    this.circles = this.svgInner.append('g').classed('circles', true);\r\n    this.draw(true);\r\n\r\n    // clear clickedProject when clicking outside of any circle\r\n    this.svg.on('click', () => {\r\n      if (event.target.tagName !== 'circle') {\r\n        this.projectNavigator.goToRoot(this.props.history, this.props.location);\r\n      }\r\n    });\r\n\r\n    this.debounce = debounce(() => this.draw(), 100);\r\n    window.addEventListener('resize', this.debounce);\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    this.updateHovered(this.state.hoveredProject, prevState.hoveredProject);\r\n    this.updateClicked(this.props, prevProps);\r\n\r\n    if (!isEqual(this.props.filteredData, prevProps.filteredData)) {\r\n      this.updateData(this.props.filteredData);\r\n      this.setState({\r\n        hoveredProject: null\r\n      });\r\n      this.projectNavigator.goToRoot(this.props.history, this.props.location);\r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    window.removeEventListener('resize', this.debounce);\r\n    this.svg.on('click', null);\r\n  }\r\n\r\n  draw(init = false) {\r\n    let height = +this.svgWrapperRef.clientHeight - this.margin.top - this.margin.bottom;\r\n    let width = +this.svgWrapperRef.clientWidth - this.margin.left - this.margin.right;\r\n\r\n    // 300 px is the size of the infobox that appears when a project is clicked!\r\n    if (this.projectNavigator.projectExists(this.props.location, this.props.filteredData)) width -= 300;\r\n    \r\n    const stretch = false;\r\n    if (!stretch) {\r\n      const aspectRatio = 5 / 5; // 4 / 5 is \"optimal\"\r\n      const optimalHeight = width * 1 / aspectRatio;\r\n      const optimalWidth = height * aspectRatio;\r\n\r\n      if ((optimalHeight + this.margin.top + this.margin.bottom) <= this.svgWrapperRef.clientHeight) {\r\n        this.offset = { x: 0, y: (height - optimalHeight) / 2 };\r\n        height = optimalHeight;\r\n      } else {\r\n        this.offset = { x: (width - optimalWidth) / 2, y: 0 };\r\n        width = optimalWidth;\r\n      }\r\n    }\r\n\r\n    // update scales\r\n    this.scaleX.range([0, width]);\r\n    this.scaleY.range([0, height]);\r\n\r\n    // set up selectors\r\n    const selectors = {\r\n      svgInner: this.svgInner,\r\n      yAxis: this.svgInner.select('g.matrix-y-axis'),\r\n      themesLabel: this.svgInner.select('text.themes-label'),\r\n      xAxis: this.svgInner.select('g.matrix-x-axis'),\r\n      focusAreasLabel: this.svgInner.select('text.focus-areas-label')\r\n    }\r\n    if (!init)\r\n      Object.keys(selectors).forEach(s => selectors[s] = selectors[s].transition().call(masterTransition));\r\n\r\n    selectors.svgInner\r\n        .attr('transform', `translate(${this.offset.x}, ${this.offset.y})`);\r\n\r\n    // themes label\r\n    selectors.themesLabel\r\n        .attr('transform', `translate(25, ${this.margin.top + height / 2})rotate(-90)`);\r\n\r\n    // focus areas label\r\n    selectors.focusAreasLabel\r\n        .attr('transform', `translate(${this.margin.left + width / 2}, 35)`);\r\n\r\n    /**\r\n     * NOTE: The default text elements (labels) on the axes are hidden and replaced to\r\n     * allow for two things: (1) splitting up the labels into multiple lines and (2)\r\n     * having transitions. The default labels can support (1) and (2) separately but not \r\n     * at the same time! So that's why there's some extra code here\r\n     *\r\n     * We don't want remove the original text element and .domain,\r\n     * if we remove the text element, d3-axis will start fucking with our label\r\n     * (changin text contents, position etc)\r\n     * if we remove .domain, d3-axis will just add it again next draw call.\r\n     */\r\n\r\n    // (equivalent to axis.tickPadding [but hardcoded])\r\n    const tickPadding = 20;\r\n\r\n    // y-axis\r\n    selectors.yAxis\r\n        .attr('transform', `translate(${width + this.margin.left}, ${this.margin.top})`)\r\n        .call(axisLeft(this.scaleY).tickSize(width))\r\n    const yAxisSelection = selectors.yAxis.selection ? selectors.yAxis.selection() : selectors.yAxis;\r\n    if (yAxisSelection.selectAll('.tick text.label').empty()) {\r\n      yAxisSelection\r\n          .call(e => e.selectAll('.tick text').attr('display', 'none'))\r\n          .call(e => e.select('.domain').attr('display', 'none'))\r\n        .selectAll('.tick')\r\n        .append('text')\r\n          .classed('label', true)\r\n          .text(i => themeLabel[i])\r\n          .attr('fill', 'currentColor')\r\n          .attr('x', -width - tickPadding)\r\n          .attr('dy', '0.32em') // see d3-axis source code\r\n          .call(parseNewlinesY);\r\n    } else {\r\n      const x = -width - tickPadding;\r\n      selectors.yAxis.selectAll('.tick text.label')\r\n          .attr('x', x)\r\n        .selectAll('tspan')\r\n          .attr('x', x);\r\n    }\r\n\r\n    // x-axis\r\n    selectors.xAxis\r\n        .attr('transform', `translate(${this.margin.left}, ${height + this.margin.top})`)\r\n        .call(axisTop(this.scaleX).tickSize(height))\r\n    const xAxisSelection = selectors.xAxis.selection ? selectors.xAxis.selection() : selectors.xAxis;\r\n    if (xAxisSelection.selectAll('.tick text.label').empty()) {\r\n      xAxisSelection\r\n          .call(e => e.selectAll('.tick text').attr('display', 'none'))\r\n          .call(e => e.select('.domain').attr('display', 'none'))\r\n        .selectAll('.tick')\r\n        .append('text')\r\n          .classed('label', true)\r\n          .text(i => focusLabel[i])\r\n          .attr('fill', 'currentColor')\r\n          .attr('y', -height - tickPadding)\r\n          .attr('dy', '0em') // see d3-axis source code\r\n          .call(parseNewlinesX);\r\n    } else {\r\n      const y = -height - tickPadding;\r\n      selectors.xAxis.selectAll('.tick text.label')\r\n          .attr('y', y)\r\n          .attr('transform', `translate(0,${y})rotate(-45)translate(0,${-y})`);\r\n    }\r\n\r\n    this.updateData(this.props.filteredData);\r\n  }\r\n\r\n  updateHovered(project, prevProject) {\r\n    if (project === prevProject)\r\n      return;\r\n\r\n    if (prevProject !== null)\r\n      this.circles.selectAll('.hover')\r\n          .classed('hover', false);\r\n\r\n    if (project !== null)\r\n      this.circles.selectAll(`[data-id='${project.survey_answers.project_id}']`)\r\n          .classed('hover', true);\r\n  }\r\n\r\n  updateClicked(props, prevProps) {\r\n    let projectId = ProjectNavigator.GetProjectId(props.location);\r\n    let prevProjectId = ProjectNavigator.GetProjectId(prevProps.location);\r\n\r\n    // if we just started, (i.e. navigated to the site via a permalink with a project id)\r\n    // the projectId and prevProjectId will be identical because of how prevProps.location works\r\n    // so change it to -1.\r\n    if (!this.projectNavigator.hasChangedSinceInit()) {\r\n      prevProjectId = -1;\r\n      this.projectNavigator.change();\r\n    }\r\n\r\n    if (projectId === prevProjectId) return;\r\n\r\n    // necessary only if clicking a project changes svgWrapper size (i.e. infobox takes up more or less space than before)\r\n    if ((projectId === -1 && prevProjectId !== -1) || (projectId !== -1 && prevProjectId === -1))\r\n      this.draw();\r\n\r\n    // clean up from prev\r\n    if (prevProjectId !== -1 && this.svg.classed('clicked')) {\r\n      this.svg.classed('clicked', false);\r\n      this.circles.selectAll('.neighbor')\r\n          .classed('neighbor', false);\r\n      this.circles.selectAll('.clicked')\r\n          .classed('clicked', false);\r\n    }\r\n\r\n    // if no project in path, we done\r\n    if (projectId === -1) return;\r\n\r\n    // if the project from the url doesn't exist in filteredData, redirect to root\r\n    if (!this.projectNavigator.projectExists(props.location, props.filteredData)) {\r\n      this.projectNavigator.redirectToRoot(props.history);\r\n      return;\r\n    }\r\n\r\n    // make a mess with current\r\n    const datum = this.circles.select(`[data-id='${projectId}']`).datum();\r\n    const neighborSelector = datum.pins\r\n      .map(pin => `[data-row='${pin.row}'][data-col='${pin.col}']`)\r\n      .join(', ');\r\n    this.svg.classed('clicked', true);\r\n    this.circles.selectAll(neighborSelector)\r\n        .classed('neighbor', true);\r\n    this.circles.selectAll(`[data-id='${datum.survey_answers.project_id}']`)\r\n        .classed('clicked', true);\r\n  }\r\n\r\n  updateData(data) {\r\n    const packedData = packData(data, this.scaleX, this.scaleY);\r\n    this.props.updateScaleData(buildScaleData(packedData));\r\n    const circle = this.circles\r\n      .selectAll('circle')\r\n      .data(packedData, d => `${d.survey_answers.project_id}[${d.row},${d.col}]`);\r\n\r\n    circle.exit()\r\n        // NOTE: These lines caused a nasty bug when calling updateData more than once in quick succession\r\n        //       with different subsets of data. But they shouldn't be needed regardlessly.\r\n        //.on('mouseover', null)\r\n        //.on('mouseout', null)\r\n        //.on('click', null))\r\n      .transition()\r\n        .call(masterTransition)\r\n        .attr('r', 0)\r\n        .remove();\r\n\r\n    circle\r\n      .transition()\r\n        .call(masterTransition)\r\n        .attr('r', d => d.r)\r\n        .attr('transform', d => `translate(${d.x + this.margin.left},${d.y + this.margin.top})`);\r\n\r\n    circle.enter().append('circle')\r\n        .attr('transform', d => `translate(${d.x + this.margin.left},${d.y + this.margin.top})`)\r\n        .attr('data-id', d => d.survey_answers.project_id)\r\n        .attr('data-row', d => d.row)\r\n        .attr('data-col', d => d.col)\r\n        .attr('class', d => type2class[d.survey_answers.project_type])\r\n        .on('mouseover', d => this.setState({\r\n          hoveredProject: d\r\n        }))\r\n        .on('mouseout', d => this.setState({\r\n          hoveredProject: null\r\n        }))\r\n        .on('click', d => {\r\n          this.projectNavigator.goToProject(this.props.history, this.props.location, d.survey_answers.project_id);\r\n          this.setState({\r\n            hoveredProject: null\r\n          });\r\n        })\r\n        .attr('r', 0)\r\n      .transition()\r\n        .call(masterTransition)\r\n        .attr('r', d => d.r);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"matrix-wrapper\" ref={svgWrapper => { this.svgWrapperRef = svgWrapper; }}>\r\n        <svg className=\"matrix\" width=\"100%\" height=\"100%\" ref={svg => { this.svgRef = svg; }} />\r\n        <MatrixTooltip project={this.state.hoveredProject} margin={this.margin} offset={this.offset} />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nMatrix.propTypes = {\r\n  data: PropTypes.object.isRequired,\r\n  filteredData: PropTypes.object.isRequired,\r\n  updateScaleData: PropTypes.func.isRequired\r\n};\r\n\r\nexport default withRouter(Matrix);\r\n","import React, { Component} from 'react';\nimport PropTypes from 'prop-types';\nimport isEqual from 'react-fast-compare';\nimport * as d3 from 'd3';\nimport * as topojson from 'topojson';\nimport europe from '../assets/data/europe.topo.json';\nimport sweden from '../assets/data/sweden.topo.json';\nimport cities from '../assets/data/cities-v2.json';\nimport mockData from '../assets/data/mock-data-v8.json';\nimport project_coordinates from '../assets/data/project-coordinates.json';\nimport './Map.css';\nimport ProjectNavigator from '../ProjectNavigator';\nimport debounce from 'lodash.debounce';\n\n\nclass Map extends Component {\n\n  constructor(props){\n    super(props);\n    this.margin = { top: 130, right: 20, bottom: 20, left: 160 };\n    this.offset = { x: 0,  y: 0 };\n    this.projectNavigator = new ProjectNavigator('/map');\n\n  }\n\n\n  // Render före compMount\n  componentDidMount(){\n\n    this.height = +this.svgWrapperRef.clientHeight - this.margin.top - this.margin.bottom;\n    this.width = +this.svgWrapperRef.clientWidth - this.margin.left - this.margin.right;\n\n    this.scaleLegendDebounce = debounce(() => this.updateScaleLegend(), 200);\n    this.zoom = d3.zoom()\n        .scaleExtent([1, 100])\n        .on(\"zoom.foo\", this.zoomed2.bind(this))\n        .on(\"zoom.bar\", () => {this.g.attr(\"transform\",  d3.event.transform);})\n        .on(\"zoom.legend\", this.scaleLegendDebounce);\n        // .on(this.updateData, this.zoomed2.bind(this));\n        // console.log(this.zoom);\n    this.projection = d3.geoMercator()\n        .rotate([5,-1])\n        // .scale(500)\n        // .center([15,58])\n        .scale(900)\n        .center([20,63])\n        .translate([this.width / 2, this.height / 2]);\n\n    this.path = d3.geoPath()\n        .projection(this.projection);\n\n    this.svg = d3.select(this.svgRef)\n            .attr(\"width\", this.width)\n            .attr(\"height\", this.height)\n            .call(this.zoom);\n    this.updateScaleLegend();\n\n    this.g = this.svg.append(\"g\");                              // The map itself\n\n    this.cities_container = this.svg.append(\"g\")                // All the black dot cities\n                          .classed(\"circle_box\",true);\n\n    this.projects = this.svg.append(\"g\");                       // All the projects + cities\n\n    // Tooltip for cities popup.\n    this.tooltip = d3.select(this.svgWrapperRef).append(\"div\")\n        .attr(\"class\", \"tooltip_bubble\")\n        .style(\"opacity\", 0);\n\n    // Tooltip for projects popup\n    this.tooltip2 = d3.select(this.svgWrapperRef).append(\"div\")\n        .attr(\"class\", \"tooltip_bubble2\")\n        .style(\"opacity\", 0);\n\n    // Tooltip for multi-proj.\n    this.tooltip3 = d3.select(this.svgWrapperRef).append(\"div\")\n        .attr(\"class\", \"tooltip_bubble3\")\n        .attr(\"id\",\"tooltip_bubble3\")\n        .style(\"opacity\", 0);\n\n    this.tooltip3_showed = 0;\n    this.project_count_city = {};\n\n\n    this.cities_circles = this.cities_container.selectAll(\"circle\")\n       .data(cities).enter()\n       .append(\"circle\")\n       .attr(\"id\",function(d){return\"circle-\"+d.id})\n       .attr(\"cx\", d => {return this.projection([d.coordinates.x, d.coordinates.y])[0]; })\n       .attr(\"cy\", d => { return this.projection([d.coordinates.x, d.coordinates.y])[1]; })\n       .attr(\"r\", 1.2)\n       .attr(\"fill\",\"black\")\n       .on(\"mouseover\", d => {\n         this.tooltip.transition(\"tooltip-1\").style(\"opacity\", .9);\n         this.tooltip.html(\"<b>\"+d.name + \"</b>\")\n            .style(\"left\", (d3.event.offsetX) + \"px\")\n            .style(\"top\", (d3.event.offsetY - 18) + \"px\")\n            .style(\"max-width\",  200 + \"px\");\n       })\n       .on(\"mouseout\", d => { this.tooltip.transition().style(\"opacity\", 0); });\n\n       this.updateData(mockData);\n\n        //Europe\n        this.g.selectAll(\".continent_Europe_subunits\")\n          .data(topojson.feature(europe, europe.objects.europe).features)\n            .enter().append(\"path\")\n            .attr(\"d\", this.path)\n            .attr(\"fill\",'#e4e4e4');\n        // Sweden\n        this.g.selectAll('.continent_Sweden_subnits')\n          .data(topojson.feature(sweden, sweden.objects.subunits).features)\n          .enter().append(\"path\")\n          .attr(\"class\", function(d) {return \"country-\" + d.id;})\n          .attr(\"d\", this.path)\n          .attr(\"fill\", '#a8a8a8'); //https://www.color-hex.com/color/d3d3d3#shades-tints\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    // console.log(prevProps);\n    // console.log(prevState);\n    // console.log(this.props.filteredData);\n    // this.updateHovered(this.state.hoveredProject, prevState.hoveredProject);\n    // this.updateClicked(this.props, prevProps);\n\n    if (!isEqual(this.props.filteredData, prevProps.filteredData)) {\n      this.updateData(this.props.filteredData);\n      // this.setState({\n        // hoveredProject: null\n      // });\n      // this.projectNavigator.goToRoot(this.props.history, this.props.location);\n    }\n  }\n\n  updateData(dat){\n\n    var mockData_real = [];\n    let tetra = dat.data.length;\n    for(var i = 0; i < tetra; i++){\n      var da = dat.data[i].survey_answers;\n      var leng = da.locations.length;\n      for(var j = 0; j < leng; j++){\n        var obj = {};\n        //https://stackoverflow.com/questions/728360/how-do-i-correctly-clone-a-javascript-object\n        obj.survey_answers = JSON.parse(JSON.stringify(da));\n        obj.survey_answers.location = da.locations[j];\n        mockData_real.push(obj);\n      }\n    }\n    var loc_circles = [];\n    let tetr = mockData_real.length;\n    for(var i = 0; i < tetr; i ++){\n      var ob = {};\n      ob.name =  mockData_real[i].survey_answers.location;\n      ob.data = mockData_real[i];\n      loc_circles.push(ob);\n    }\n\n    // My variable names are awful here.\n    this.xx_loc = [];\n    for(var i = 0; i < tetr; i++){\n      var ab = loc_circles[i].name;\n      var xx = false;\n      for(var j = 0; j < this.xx_loc.length; j++){\n        var k = this.xx_loc[j].name;\n        if(ab.match(k)){\n          var tt = this.xx_loc[j].data;\n          tt.push(loc_circles[i].data);\n          this.xx_loc[j].data = tt;\n          xx = true;\n        }\n      }\n      if(xx == false){\n        var obj = {};\n        obj.name = ab;\n        var xxx = loc_circles[i].data;\n        obj.data = [];\n        obj.data.push(xxx);\n        this.xx_loc.push(obj);\n      }\n    }\n\n    this.project_circles = this.projects\n      .selectAll('circle')\n      .data(this.xx_loc, d => { return d.name;});\n    this.project_circles.exit()\n      .transition()\n      .attr('r',0)\n      .remove();\n\n      this.project_circles.transition()\n             .attr(\"r\", d => {\n               let a = d.data.length;\n               let i = d3.interpolateNumber(3+a, 30*a);\n               let x = ((d3.zoomTransform(this.svg.node()).y)*-1) -1000;\n               if(x > 0){\n                 let t = x/21776;\n                 return i(t);\n               }\n               return 3 + a;\n             });\n\n      this.project_circles.enter().append('circle')\n         .attr(\"id\",function(d,i){return\"project-\"+d.name;})\n         .attr(\"cx\", d => { let c = project_coordinates[d.name]; return this.projection([c.x,c.y])[0];})\n         .attr(\"cy\", d => { let c = project_coordinates[d.name]; return this.projection([c.x,c.y])[1];})\n         .attr('transform', d => {\n           // I hate projections.\n           let c = project_coordinates[d.name];\n           let cx = this.projection([c.x,c.y]);\n           var trans = d3.zoomTransform(this.svg.node());\n           var t = trans.apply(cx);\n           let x = [t[0] - cx[0], t[1]-cx[1]];\n           return \"translate(\" + x + \")\";\n         })\n         .classed(\"bubble\",\"true\")\n         .style(\"stroke-width\", .7)\n         .style(\"stroke\",\"#007082\")\n         .attr(\"fill\",\"#007d91\")\n         .on('mouseover', d => {\n           let tx = \"\"\n           if(d.data.length > 1){\n             tx = \"<b>\"+ d.name +\"</b><br>\" + d.data.length+ \" Projects\"\n           } else {\n             tx = \"<b>\" + d.name +\"</b>\\n<br>\" + d.data[0].survey_answers.project_title;\n           }\n             this.tooltip2.transition().style(\"opacity\", .9);\n             this.tooltip2.html(tx)\n                .style(\"left\", (d3.event.offsetX) + \"px\")\n                .style(\"top\", (d3.event.offsetY - 18) + \"px\")\n                .style(\"max-width\",  200 + \"px\");\n              })\n         .on('mouseout', d => { this.tooltip2.transition(\"check\").style(\"opacity\", 0);})\n         .on('click',d => {\n\n         })\n        .transition()\n         .attr(\"r\", d => {\n           let a = d.data.length;\n           let i = d3.interpolateNumber(3+a, 30*a);\n           let x = ((d3.zoomTransform(this.svg.node()).y)*-1) -1000;\n           // console.log(trans);\n           // let x = (d3.event.transform.y * -1)-1000;\n           if(x > 0){\n             let t = x/21776;\n             return i(t);\n           }\n           return 3 + a;\n           // return 3 + d.data.length;\n         })\n         .on(\"end\", d => { });\n// console.log(d3.zoomTransform(this.svg.node()));\n         // console.log(this.zoomIdentity);\n       // this.project_circles.call(this.zoom.transform, d3.zoomIdentity);\n\n  }\n\n  zoomed2(){\n    let afa = this.projects\n      .selectAll('circle')\n      .data(this.xx_loc, d => { return d.name;});\n\n      this.cities_circles.attr(\"transform\",this.circle_transform(d3.event.transform));\n      afa.attr(\"transform\",this.circle_transform(d3.event.transform));\n\n      this.cities_circles.attr(\"r\",this.circle_size_increase.bind(this));\n      afa.attr(\"r\",this.project_size_increase.bind(this));\n\n  }\n\n  circle_size_increase(d){\n    let i = d3.interpolateNumber(2, 20);\n    let x = (d3.event.transform.y * -1)-2000;\n    if(x > 0){\n      let t = x/21776;\n      return i(t);\n    }\n    return 1.3;\n  }\n\n  // Projects increase after zoom in factor X.\n  project_size_increase(d){\n    let a = d.data.length;\n    let i = d3.interpolateNumber(3+a, 30*a);\n    let x = (d3.event.transform.y * -1)-1000;\n    if(x > 0){\n      let t = x/21776;\n      return i(t);\n    }\n    return 3 + a;\n  }\n\n  // Semantic transformation\n  circle_transform(t) {\n    return function(d) {\n      let c = [this.getAttribute('cx'), this.getAttribute('cy')];\n      let r = t.apply(c);\n      let x = [r[0] - c[0], r[1]-c[1]];\n      return \"translate(\" + x + \")\";\n    };\n  }\n\n  updateScaleLegend() {\n    // Just copied this from the lines following \"this.project_circles.transition()...\" \n    // (lines 193-200) at the time of writing this.\n    const radius = (a) => {\n      let i = d3.interpolateNumber(3+a, 30*a);\n      let x = ((d3.zoomTransform(this.svg.node()).y)*-1) -1000;\n      if(x > 0){\n        let t = x/21776;\n        return i(t);\n      }\n      return 3 + a;\n    }\n\n    this.props.updateScaleData([\n      { r: radius(5), label: '5 projekt' },\n      { r: radius(1), label: '1 projekt' }\n    ]);\n  }\n\n  // Efter constructor\n  render() {\n    return (\n      <div className=\"mapWrap\" ref={svgWrapper => this.svgWrapperRef = svgWrapper}>\n        <svg className=\"bubbles_svg_area\" id=\"bubbles_svg_area\" ref={svg => { this.svgRef = svg;}}></svg>\n      </div>\n    );\n  }\n}\n\nMap.propTypes = {\n  data: PropTypes.object.isRequired,\n  filteredData: PropTypes.object.isRequired\n};\n\nexport default Map;\n","import React, {Component} from 'react';\nimport * as d3 from 'd3';\nimport './Bubbles.css';\nimport mockData from '../assets/data/mock-data-v8.json';\nimport partners from '../assets/data/partners.json';\nimport debounce from 'lodash.debounce';\n\n\nclass Partners extends Component {\n\n  constructor(props){\n    super(props);\n    this.omrade_titles = {\n      0: \"Civilsamhälle\",\n      1: \"Forskning\",\n      2: \"Näringsliv\",\n      3: \"Offentlig verksamhet\"\n    };\n\n\n    this.helix_colors = {\n      0 : \"#007d91\",\n      1 : \"#EA9A00\",\n      2 : \"#00A389\",\n      3 : \"#97C28E\"\n    };\n\n    this.helix_colors_borders = {\n      0 : \"#007082\",\n      1 : \"#d28a00\",\n      2 : \"#00927b\",\n      3 : \"#87ae7f\"\n    };\n\n    this.margin = { top: 130, right: 20, bottom: 20, left: 160 };\n    this.offset = { x: 0,  y: 0 };\n    // Hardcoded section titles\n    this.omrade_titles_x = {\n        3: 70,\n        0: 255,\n        1: 400,\n        2: 570\n    };\n    this.omrade_titles_y = {\n      3: 70,\n      0: 70,\n      1: 70,\n      2:50\n    };\n\n    // Location on screen\n    this.projectSpace = {\n      0 : 415,\n      1 : 730\n    };\n    this.projspace_title_x = {\n      0: 410,\n      1: 800\n    };\n    this.projspace_title_y = {\n      0: 10,\n      1: 80\n    };\n\n    this.project_no = -1;\n    this.bubbles = null;   // Bubbles in object.\n    this.nodes = {};            // Bubbles as nodes.\n    this.view_option = 0;\n\n    this.forceStrength = 0.025;\n\n    this.createNewNodes = this.createNewNodes.bind(this);\n\n  }\n\n  componentDidMount(){\n    // console.log(\"heck\");\n    this.height = +this.svgWrapperRef.clientHeight - this.margin.top - this.margin.bottom;\n    this.width = +this.svgWrapperRef.clientWidth - this.margin.left - this.margin.right;\n    // console.log(this.svgWrapperRef.clientHeight);\n    this.tooltip = d3.select(this.svgWrapperRef).append(\"div\")\n        .attr(\"class\", \"tooltip_bubble_partners\")\n        .style(\"opacity\", 0);\n\n    // $(\"#dropdown_menu\").html(str);\n\n    this.button_collection = d3.select(this.svgWrapperRef).append(\"div\")\n        .classed(\"button_collection\",true);\n\n    this.normal_button = this.button_collection.append(\"div\")\n            .classed(\"button\",true)\n            .classed(\"overview_button\",true)\n            .on('click', () => {this.move_bubbles(0);})\n            .text(\"Overview\");\n    this.helix_button = this.button_collection.append(\"div\")\n        .classed(\"button\",true)\n        .classed(\"helix_button\",true)\n        .on('click', () => {this.move_bubbles(1);})\n        .text(\"Quadruple Helix\");\n\n    this.nodes = this.createNewNodes(partners);\n\n    this.projspace_title = {};\n    this.projspace_title[0] = \"Partners\";\n    for(var i = 0; i < mockData.data.length; i++){\n      this.projspace_title[mockData.data[i].survey_answers.project_id] = mockData.data[i].survey_answers.project_title;\n    }\n\n    // !!!!!!!!!!\n    // This is good code. Just needs to be placed elsewhere.\n    // this.project_buttons = this.button_collection.append('div').selectAll('.buttons_here')\n    //   .data(mockData.data);\n    // this.project_buttons.enter().append('div')\n    //   .classed(\"button\",true)\n    //   .classed('project_button',true)\n    //   // .text( d => {console.log(d); return \"gaga\"});\n    //   .on('click', d => {this.change_view_spec(2, d.survey_answers.project_id);})\n    //   .text( d => {return d.survey_answers.project_title;});\n    // !!!!!!!!!!\n    \n    this.omradeCenters = {\n      0: { x: this.width / 3, y: this.height / 2 },\n      1: { x: this.width / 2, y: this.height / 2 },\n      2: { x: 2 * this.width / 3, y: this.height / 2 },\n      3: { x: 150, y:0}\n    };\n\n    this.center = { x: this.width / 2, y: this.height / 2 };\n\n    // this.projspace_title = {};\n    this.scaleLegendDebounce = debounce(() => this.updateScaleLegend(), 200);\n    this.zoom = d3.zoom()\n        .scaleExtent([.2, 20])\n        .on(\"zoom.transform\", () => {this.g.attr(\"transform\", d3.event.transform);})\n        .on(\"zoom.legend\", this.scaleLegendDebounce);\n\n    this.svg = d3.select(this.svgRef)\n          .attr(\"width\",this.width)\n          .attr(\"height\",this.height)\n          .call(this.zoom);\n    this.updateScaleLegend();\n\n    this.g = this.svg.append(\"g\");\n\n    this.simulation = d3.forceSimulation()\n      .velocityDecay(0.2)\n      .force('x', d3.forceX().strength(this.forceStrength).x(this.center.x))\n      .force('y', d3.forceY().strength(this.forceStrength).y(this.center.y))\n      .force('charge', d3.forceManyBody().strength(this.charge.bind(this)))\n      .on('tick', this.ticked.bind(this));\n\n    this.simulation.stop();\n    this.maxAmount = d3.max(mockData, d => { return +d.total_amount; });\n\n    this.radiusScale = d3.scalePow()\n      .exponent(0.5)\n      .range([2, 85])\n      .domain([0, this.maxAmount]);\n\n    // console.log(mockData);\n    this.bubbles = this.g.selectAll('.bubble')\n      .data(this.nodes, d => { return d.id; });\n\n    this.bubblesE = this.bubbles.enter().append('circle')\n      .classed('bubble', true)\n      .attr('r', 0)\n      .style(\"fill\",d => { return this.helix_colors[d.kategori];})\n      .attr('stroke-width', .5)\n      .attr('stroke',d => {return this.helix_colors_borders[d.kategori]})\n      .on(\"mouseover\",d => {\n        let id = d.id;\n        // this.parentNode.appendChild(this);\n        d3.selectAll(\".bubble\")\n          .filter(function(d){if(d.id===id){return false;}return true;})\n          .transition()\n            .style(\"opacity\",\"0.3\");\n\n        this.tooltip.transition().style(\"opacity\", .9);\n        this.tooltip.html(d.organisation) //+ \" \" + omrade_titles[d.kategori])\n          .style(\"left\", (d3.event.offsetX) + \"px\")\n          .style(\"top\", (d3.event.offsetY - 28) + \"px\")\n          .style(\"max-width\",  200 + \"px\");\n      })\n      .on(\"mouseout\",d => {\n          this.tooltip.transition().style(\"opacity\", 0);\n          d3.selectAll(\".bubble\")\n            .transition()\n              .style(\"opacity\",\"1\");\n      });\n\n\n    this.bubbles = this.bubbles.merge(this.bubblesE);\n\n    this.bubbles.transition(\"start\")\n      .duration(2000)\n      .attr('r', d => { return d.radius; });\n\n    // Start simulation\n    this.simulation.nodes(this.nodes);\n    this.move_bubbles(0);\n\n\n    let omradeData = d3.keys(this.omrade_titles);\n    this.years = this.g.selectAll('.omradeTitles')\n    .data(omradeData);\n\n    this.years.enter().append('text')\n      .attr('class', 'omradeTitles')\n      .attr('display','none')\n      .attr('font-size','20px')\n      .attr('x', d => { return this.omrade_titles_x[d]; })\n      .attr('y', d => { return this.omrade_titles_y[d];})\n      .attr('text-anchor', 'middle')\n      .text(d => { return this.omrade_titles[d]; });\n\n    this.temp_str = {0 : \"Partners\", 1: \"temp\"};\n    let projData2 = d3.keys(this.temp_str);\n    this.projTitlesObj = this.g.selectAll('.projTitles')\n    .data(projData2);\n\n    this.projTitlesObj.enter().append('text')\n      .attr('class', 'projTitles')\n      .attr('display','none')\n      .attr('font-size','20px')\n      .attr('x', d => { return this.projspace_title_x[d]; })\n      .attr('y', d => { return this.projspace_title_y[d];})\n      .attr('text-anchor', 'middle')\n      .text(d => { return this.temp_str[d]; })\n      .filter(function (d){\n        if(d == 1){\n          return true;\n        }\n        return false;\n      })\n      .attr('font-size','12px')\n      .attr(\"id\",\"proj_text_change\");\n\n\n    // Move legedn elsewhere.\n    // create_legend();\n  }\n\n\n  move_bubbles(opt){\n    if(opt == 0){\n      this.simulation.force('x', d3.forceX().strength(this.forceStrength).x(this.center.x));\n    } else if (opt == 1){\n      this.simulation.force('x', d3.forceX().strength(this.forceStrength).x(this.omrade_view.bind(this)));\n    } else if (opt == 2){\n      this.simulation.force('x', d3.forceX().strength(this.forceStrength).x(this.project_view.bind(this)));\n    }\n    this.view_option = opt;\n    this.simulation.alpha(1).restart();\n    this.toggle_title(opt);\n  }\n\n  toggle_title(opt){\n    if(opt == 1){\n      d3.selectAll('.omradeTitles')\n        .attr('display','initial');\n    } else {\n      d3.selectAll('.omradeTitles')\n        .attr('display', 'none');\n    }\n    if(opt == 2){\n      d3.selectAll('.projTitles')\n        .attr('display','initial');\n    } else {\n        d3.selectAll('.projTitles')\n          .attr('display','none');\n    }\n  }\n  omrade_view(d){\n    return this.omradeCenters[d.kategori].x;\n  }\n\n  project_view(d){\n    let projs = d.projects;\n    for(var i = 0; i < projs.length; i++){\n      if(projs[i] == this.project_no){\n        return this.projectSpace[1];\n      }\n    }\n    return this.projectSpace[0];\n  }\n  charge(d) {\n    return -Math.pow(d.radius, 2.0) * this.forceStrength;\n  }\n\n  ticked() {\n    this.bubbles.attr('cx', d => { return d.x; })\n                .attr('cy', d => { return d.y; });\n    }\n\n  change_view_spec(opt, proj_opt){\n    this.view_option = opt;\n    this.project_no = proj_opt;\n    d3.select('#proj_text_change').text(this.projspace_title[proj_opt]);\n    this.move_bubbles(opt);\n  }\n\n  componentDidUpdate(){\n\n  }\n\n  createNewNodes(rawData){\n    let q_o = {\n       \"Civilsamhälle\" : 0,\n       \"Forskning\" : 1,\n       \"Näringsliv\": 2,\n       \"Offentlig verksamhet\": 3\n    };\n    let myNodes = rawData.map(function (d,i){\n      return {\n        id: (i),\n        radius : 15,\n        organisation: d.Organisation,\n        value: Math.random() * 10,\n        projects : d.Projects,\n        kategori: q_o[d.Kategori],\n        x: Math.random() * 900,\n        y: Math.random() * 800\n      };\n    });\n    myNodes.sort(function (a,b){ return b.value - a.value; });\n    return myNodes;\n  }\n\n  updateScaleLegend() {\n    const scaleFactor = d3.zoomTransform(this.svg.node()).k;\n    this.props.updateScaleData([{ r: 15 * scaleFactor, label: '1 partner' }]);\n  }\n\n\n  render(){\n    return (\n      <div className=\"partnerWrap\" ref={svgWrapper => this.svgWrapperRef = svgWrapper}>\n        <svg className=\"partner_svg_area\" id=\"partner_svg_area\" ref={svg => { this.svgRef = svg;}}></svg>\n      </div>\n    );\n  }\n}\n\nexport default Partners;\n","import React, { Component } from 'react';\r\nimport { range } from 'd3';\r\nimport isEqual from 'react-fast-compare';\r\nimport PropTypes from 'prop-types';\r\nimport './Matchmaking.css';\r\n\r\nconst ROWS = 5;\r\nconst COLS = 4;\r\n\r\n// input is '[ROW,COL]' where ROW and COL are numbers.\r\nconst parsePosition = (name) => {\r\n  const split = name.substring(1, name.length - 1).split(',');\r\n  return { row: Number.parseInt(split[0]), col: Number.parseInt(split[1]) };\r\n};\r\n\r\nclass Matchmaking extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      expanded: false\r\n    };\r\n\r\n    this.handleChange = this.handleChange.bind(this);\r\n  }\r\n\r\n  handleChange(event) {\r\n    const position = parsePosition(event.target.name);\r\n    const valueCopy = [...this.props.value];\r\n\r\n    const index = this.props.value.findIndex(item => isEqual(position, item));\r\n    if (index !== -1) valueCopy.splice(index, 1);\r\n    if (event.target.checked) valueCopy.push(position);\r\n\r\n    if (this.props.onChange) this.props.onChange(valueCopy);\r\n  }\r\n\r\n  isChecked(row, col) {\r\n    return this.props.value.findIndex(item => isEqual(item, { row, col })) !== -1;\r\n  }\r\n\r\n  render() {\r\n    const columns = (row) => {\r\n      return range(1, COLS + 1).map(col => (\r\n        <td key={(row - 1) * COLS + col}>\r\n          <input\r\n            type=\"checkbox\"\r\n            name={`[${row},${col}]`}\r\n            checked={this.isChecked(row, col)}\r\n            onChange={this.handleChange}\r\n            disabled={this.props.enabled && !this.props.enabled[row][col]} />\r\n        </td>\r\n      ));\r\n    };\r\n\r\n    const rows = range(1, ROWS + 1).map(row => (\r\n      <tr key={row}>\r\n        {columns(row)}\r\n      </tr>\r\n    ));\r\n\r\n    return (\r\n      <div className=\"filters-box filters-box--matchmaking\">\r\n        <span className=\"filters-box__title\">\r\n          Teman och fokusområden\r\n        </span>\r\n        <div className=\"matchmaking-table-container\">\r\n          <table className=\"matchmaking-table\">\r\n            <tbody>\r\n              {rows}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nMatchmaking.defaultProps = {\r\n  value: []\r\n};\r\n\r\nMatchmaking.propTypes = {\r\n  onChange: PropTypes.func,\r\n  value: PropTypes.arrayOf(PropTypes.shape({\r\n    row: PropTypes.number,\r\n    col: PropTypes.number\r\n  })).isRequired,\r\n  enabled: PropTypes.objectOf(PropTypes.objectOf(PropTypes.bool))\r\n};\r\n\r\nexport default Matchmaking;\r\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { range } from 'd3';\nimport { Multiselect } from 'react-widgets'\nimport { col2focus, row2theme, theme2row } from '../matrix/MatrixUtility';\nimport Matchmaking from './Matchmaking';\nimport isEqual from 'react-fast-compare';\nimport _intersection from 'lodash.intersection';\nimport './Filters.css';\n\n// find the intersection of an arbitrary number of subsets of data\nfunction intersection(...data) {\n  return { data: _intersection(...data.map(d => d.data)) };\n}\n\n// presentation of the multiselect options\nconst ListItem = ({ item }) => (\n  <div className=\"filters-item\">\n    <span className=\"filters-item__name\">{item.name}</span>\n    <span className=\"filters-item__count\">{item.count}</span>\n  </div>\n);\n\nclass Filters extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      filteredBy: {\n        titles: props.data,\n        locations: props.data,\n        partners: props.data,\n        keywords: props.data,\n        matchmaking: props.data,\n      },\n      filterValues: {\n        titles: [],\n        locations: [],\n        partners: [],\n        keywords: [],\n        matchmaking: []\n      },\n      filteredData: props.data\n    };\n\n    // used for optimizations\n    this.prevFilteredData = null;\n\n    // data used by filter components when rendering, e.g.\n    // location names, partners, enabled matrix cells etc\n    this.componentData = {\n      titles: null,\n      locations: null,\n      partners: null,\n      keywords: null,\n      matchmaking: null\n    };\n\n    this.projectLocations = {};\n    this.projectPartners = {};\n    this.projectKeywords = {};\n\n    props.data.data.forEach(d => {\n      this.projectLocations[d.survey_answers.project_id] = new Set();\n      d.survey_answers.locations.forEach(location => {\n        this.projectLocations[d.survey_answers.project_id].add(location);\n      });\n\n      this.projectPartners[d.survey_answers.project_id] = new Set();\n      d.survey_answers.other_financiers.forEach(financier => {\n        this.projectPartners[d.survey_answers.project_id].add(financier);\n      });\n      d.survey_answers.other_recipients.forEach(recipient => {\n        this.projectPartners[d.survey_answers.project_id].add(recipient);\n      });\n\n      this.projectKeywords[d.survey_answers.project_id] = new Set();\n      d.survey_answers.keywords.forEach(keyword => {\n        this.projectKeywords[d.survey_answers.project_id].add(keyword);\n      });\n    });\n\n    this.filterBy = {\n      titles: (titles) => {\n        if (!titles.length) return this.props.data;\n\n        return {\n          data: this.props.data.data.filter((d) => {\n            if (!titles.includes(d.survey_answers.project_title)) return false;\n            return true;\n          })\n        };\n      },\n      locations: (locations) => {\n        if (!locations.length) return this.props.data;\n\n        return {\n          data: this.props.data.data.filter((d) => {\n            if (!locations.some(location => {\n              return this.projectLocations[d.survey_answers.project_id].has(location.name);\n            })) return false;\n            return true;\n          })\n        };\n      },\n      partners: (partners) => {\n        if (!partners.length) return this.props.data;\n\n        return {\n          data: this.props.data.data.filter((d) => {\n            if (!partners.some(partner => {\n              return this.projectPartners[d.survey_answers.project_id].has(partner.name);\n            })) return false;\n            return true;\n          })\n        }\n      },\n      keywords: (keywords) => {\n        if (!keywords.length) return this.props.data;\n\n        return {\n          data: this.props.data.data.filter((d) => {\n            if (!keywords.some(keyword => {\n              return this.projectKeywords[d.survey_answers.project_id].has(keyword.name);\n            })) return false;\n            return true;\n          })\n        }\n      },\n      matchmaking: (matchmaking) => {\n        if (!matchmaking.length) return this.props.data;\n\n        return {\n          data: this.props.data.data.filter((d) => {\n            if (!matchmaking.every(position => {\n              return d.survey_answers[col2focus[position.col]].includes(row2theme[position.row])\n            })) return false;\n            return true;\n          })\n        }\n      }\n    };\n  }\n\n  empty() {\n    return Object.values(this.state.filterValues).every(value => value.length === 0);\n  }\n\n  filteredByAllExcept(filter) {\n    return intersection(...Object.entries(this.state.filteredBy)\n      .filter(([key, value]) => key !== filter)\n      .map(([key, value]) => value))\n  }\n\n  buildTitlesList() {\n    const data = this.filteredByAllExcept('titles');\n    return data.data.map(d => d.survey_answers.project_title)\n  }\n\n  buildLocationList() {\n    const data = this.filteredByAllExcept('locations');\n    \n    const ret = new Map();\n    data.data.forEach(d => {\n      d.survey_answers.locations.forEach(location => {\n        ret.has(location) ? ret.set(location, ret.get(location) + 1) : ret.set(location, 1);\n      });\n    });\n\n    return [...ret]\n      .sort()\n      .reduce((arr, [key, value]) => [...arr, {name: key, count: value}], [])\n  }\n\n  buildPartnerList() {\n    const data = this.filteredByAllExcept('partners');\n\n    const ret = new Map();\n    data.data.forEach(d => {\n      this.projectPartners[d.survey_answers.project_id].forEach(partner => {\n        ret.has(partner) ? ret.set(partner, ret.get(partner) + 1) : ret.set(partner, 1);\n      });\n    });\n\n    return [...ret]\n      .sort()\n      .reduce((arr, [key, value]) => [...arr, {name: key, count: value}], [])\n  }\n\n  buildKeywordList() {\n    const data = this.filteredByAllExcept('keywords');\n\n    const ret = new Map();\n    data.data.forEach(d => {\n      d.survey_answers.keywords.forEach(keyword => {\n        ret.has(keyword) ? ret.set(keyword, ret.get(keyword) + 1) : ret.set(keyword, 1);\n      });\n    });\n\n    return [...ret]\n      .sort()\n      .reduce((arr, [key, value]) => [...arr, {name: key, count: value}], [])\n  }\n\n  buildMatchmakingList() {\n    const data = this.state.filteredData;\n\n    const ROWS = 5;\n    const COLS = 4;\n\n    const colRange = range(1, COLS + 1); \n\n    const nonEmpty = {};\n    for (let row = 1; row <= ROWS; ++row) {\n      nonEmpty[row] = {};\n      for (let col = 1; col <= COLS; ++col) {\n        nonEmpty[row][col] = false;\n      }\n    }\n\n    data.data.forEach(d => {\n      colRange.forEach(col => {\n        d.survey_answers[col2focus[col]].forEach(theme => {\n          const row = theme2row[theme];\n          if (!nonEmpty[row][col]) nonEmpty[row][col] = true;\n        })\n      });\n    });\n\n    return nonEmpty;\n  }\n\n  // only render if state changed, ignore props since they shouldn't change anyway\n  shouldComponentUpdate(nextProps, nextState) {\n    if (!isEqual(nextState, this.state)) return true;\n    return false;\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (prevState === this.state) return;\n\n    if (!isEqual(prevState.filterValues, this.state.filterValues)) {\n      const filteredBy = {};\n      Object.keys(this.filterBy).forEach(filter => {\n        if (!isEqual(prevState.filterValues[filter], this.state.filterValues[filter])) {\n          filteredBy[filter] = this.filterBy[filter](this.state.filterValues[filter]);\n        }\n      });\n      if (Object.keys(filteredBy).length) {\n        this.setState((state, props) => ({\n          filteredBy: {\n            ...state.filteredBy,\n            ...filteredBy\n          }\n        }))\n      }\n    }\n\n    if (!isEqual(prevState.filteredBy, this.state.filteredBy)) {\n      const newFilteredData = intersection(...Object.values(this.state.filteredBy));\n      this.setState({\n        filteredData: newFilteredData\n      });\n      this.props.updateFilteredData(newFilteredData);\n    }\n  }\n\n  render() {\n    // load these here, otherwise lazy evaluation can cause some choppiness in the browser\n    if (this.state.filteredData !== this.prevFilteredData) {\n      this.prevFilteredData = this.state.filteredData;\n      this.componentData = {\n        titles: this.buildTitlesList(),\n        locations: this.buildLocationList(),\n        partners: this.buildPartnerList(),\n        keywords: this.buildKeywordList(),\n        matchmaking: this.buildMatchmakingList()\n      }\n    }\n    \n    return (\n      <div className=\"filters\">\n        <h2>Filter</h2>\n        <div className=\"filters-box\">\n          <span className=\"filters-box__title\">\n            Titel\n          </span>\n          <Multiselect\n            data={this.componentData.titles}\n            onChange={titles => {\n              this.setState({\n                filterValues: {\n                  ...this.state.filterValues,\n                  titles\n                }\n              });\n            }}\n            placeholder=\"Filtera efter titlar\"\n            filter=\"contains\"\n            value={this.state.filterValues.titles} />\n        </div>\n        <div className=\"filters-box\">\n          <span className=\"filters-box__title\">\n            Plats\n          </span>\n          <Multiselect\n            data={this.componentData.locations}\n            onChange={locations => {\n              this.setState({\n                filterValues: {\n                  ...this.state.filterValues,\n                  locations\n                }\n              });\n            }}\n            placeholder=\"Filtrera efter kommuner\"\n            valueField=\"name\"\n            textField=\"name\"\n            itemComponent={ListItem}\n            value={this.state.filterValues.locations} />\n        </div>\n        <div className=\"filters-box\">\n          <span className=\"filters-box__title\">\n            Partner\n          </span>\n          <Multiselect\n            data={this.componentData.partners}\n            onChange={partners => {\n              this.setState({\n                filterValues: {\n                  ...this.state.filterValues,\n                  partners\n                }\n              });\n            }}\n            placeholder=\"Filtrera efter partners\"\n            filter=\"contains\"\n            valueField=\"name\"\n            textField=\"name\"\n            itemComponent={ListItem}\n            value={this.state.filterValues.partners} />\n        </div>\n        <div className=\"filters-box\">\n          <span className=\"filters-box__title\">\n            Nyckelord\n          </span>\n          <Multiselect\n            data={this.componentData.keywords}\n            onChange={keywords => {\n              this.setState({\n                filterValues: {\n                  ...this.state.filterValues,\n                  keywords\n                }\n              });\n            }}\n            placeholder=\"Filtera efter nyckelord\"\n            filter=\"contains\"\n            valueField=\"name\"\n            textField=\"name\"\n            itemComponent={ListItem}\n            value={this.state.filterValues.keywords} />\n        </div>\n\n        <Matchmaking\n          value={this.state.filterValues.matchmaking}\n          onChange={matchmaking => {\n            this.setState({\n              filterValues: {\n                ...this.state.filterValues,\n                matchmaking\n              }\n            });\n          }}\n          enabled={this.componentData.matchmaking} />\n\n        {!this.empty() &&\n          <Fragment>\n            <p className='filters-results-text'>\n              Visar <span className=\"filters-results-text__number\">{this.state.filteredData.data.length}</span>\n              {' '} av <span className=\"filters-results-text__number\">{this.props.data.data.length}</span> projekt.\n            </p>\n\n            <div className='filters-button-box'>\n              <button\n                className=\"filters-button\"\n                onClick={() => this.setState({\n                  filterValues: Object.entries(this.state.filterValues)\n                    .reduce((obj, [k,_]) => ({...obj, [k]: []}), {})\n                })}>\n                Rensa filter\n              </button>\n            </div>\n          </Fragment>\n        }\n      </div>\n    );\n  }\n}\n\nFilters.propTypes = {\n  data: PropTypes.object.isRequired,\n  updateFilteredData: PropTypes.func.isRequired,\n  scaleData: PropTypes.shape({\n    rScale: PropTypes.number,\n    minBudget: PropTypes.number,\n    maxBudget: PropTypes.number\n  })\n};\n\nexport default Filters;\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport './ColorLegendItem.css';\r\n\r\nfunction ColorLegendItem({ text, color }) {\r\n  return (\r\n    <div className=\"color-legend-item\">\r\n      <div className=\"color-legend-item__box\" style={{background: color}} />\r\n      <span className=\"color-legend-item__text\">{text}</span>\r\n    </div>\r\n  );\r\n}\r\n\r\nColorLegendItem.propTypes = {\r\n  text: PropTypes.string.isRequired,\r\n  color: PropTypes.any.isRequired\r\n}\r\n\r\nexport default ColorLegendItem;\r\n","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { range } from 'd3';\r\nimport { withRouter } from 'react-router';\r\nimport { Transition, animated } from 'react-spring';\r\nimport ColorLegendItem from './ColorLegendItem';\r\nimport { projectTypes, projectTypeColors } from './matrix/MatrixUtility';\r\nimport './ColorLegend.css';\r\n\r\n// NOTE: Hardcoded for now, but for prettier code these could be imported directly from Partners.jsx\r\nconst omrade_titles = {\r\n  0: \"Civilsamhälle\",\r\n  1: \"Forskning\",\r\n  2: \"Näringsliv\",\r\n  3: \"Offentlig verksamhet\"\r\n};\r\n\r\nconst helix_colors = {\r\n  0: \"#007d91\",\r\n  1: \"#EA9A00\",\r\n  2: \"#00A389\",\r\n  3: \"#97C28E\"\r\n};\r\n\r\nfunction RouteColorLegend({ labels }) {\r\n  let items = labels.map(label => \r\n    <li key={label.text}>\r\n      <ColorLegendItem {...label} />\r\n    </li>\r\n  );\r\n\r\n  return (\r\n    <div className=\"color-legend\">\r\n      <ul>\r\n        {items}\r\n      </ul>\r\n    </div>\r\n  );\r\n};\r\n\r\nRouteColorLegend.propTypes = {\r\n  labels: PropTypes.arrayOf(PropTypes.shape({\r\n    text: PropTypes.string.isRequired,\r\n    color: PropTypes.any.isRequired\r\n  })).isRequired\r\n};\r\n\r\nclass ColorLegend extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    const mapLabels = [{ text: 'Projekt', color: '#007d91'}]; // hard-coded\r\n    const matrixLabels = projectTypes.map(type => ({ text: type, color: projectTypeColors(type) }));\r\n    const partnersLabels = range(4).map(i => ({ text: omrade_titles[i], color: helix_colors[i] }));\r\n\r\n    this.legends = {\r\n      map: (<RouteColorLegend labels={mapLabels} />),\r\n      matrix: (<RouteColorLegend labels={matrixLabels} />),\r\n      partners: (<RouteColorLegend labels={partnersLabels} />)\r\n    };\r\n  }\r\n\r\n  shouldComponentUpdate(nextProps, nextState) {\r\n    if (this.props.location.pathname !== nextProps.location.pathname) return true;\r\n    return false;\r\n  }\r\n\r\n  render() {\r\n    const route = Object.keys(this.legends).find(route => this.props.location.pathname.includes(route));\r\n\r\n    return (\r\n      <Transition\r\n        native\r\n        items={route}\r\n        from={{ height: 0, opacity: 0}}\r\n        enter={{ height: 'auto', opacity: 1 }}\r\n        leave={{ height: 0, opacity: 0}}>\r\n        {route =>\r\n          route !== undefined &&\r\n            (props => \r\n              <animated.div style={{ ...props}}>\r\n                {this.legends[route]}\r\n              </animated.div>)\r\n        }\r\n      </Transition>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withRouter(ColorLegend);\r\n","import React, { Component } from 'react';\r\nimport { select, easePolyOut } from 'd3';\r\nimport PropTypes from 'prop-types';\r\nimport './ScaleLegend.css';\r\n\r\nconst masterTransition = (transition) => transition.duration(800).ease(easePolyOut.exponent(4));\r\n\r\nclass ScaleLegend extends Component {\r\n  componentDidMount() {\r\n    this.parent = select(this.parentRef).style('width', '150px');\r\n    this.svg = select(this.svgRef).attr('height', 0);\r\n\r\n    this.margin = { top: 10, right: 10, bottom: 10, left: 20};\r\n    this.lineWidth = 10;\r\n    this.labelWidth = 60; // hard-coded approximation of label width for centering\r\n\r\n    this.updateData(this.props.scaleData);\r\n  }\r\n\r\n  updateData(data) {\r\n    if (!data || !data.length) return;\r\n\r\n    const fixedData = data.slice().map((d, i) => ({ ...d, i })).reverse();\r\n    const selection = this.svg.selectAll('g').data(fixedData);\r\n\r\n    const labels = data.map((circle, index) => {\r\n      let left = data[0].r + this.margin.left;\r\n      let top = data[0].r * 2 - circle.r * 2 + this.margin.top;\r\n      let width = data[0].r + this.lineWidth;\r\n      if (index === data.length - 1) {\r\n        left += circle.r;\r\n        top += circle.r;\r\n        width -= circle.r;\r\n      }\r\n\r\n      return { left, top, width };\r\n    })\r\n\r\n    const prevSvgHeight = this.svg.attr('height');\r\n    const svgHeight = data[0].r * 2 + this.margin.top + this.margin.bottom;\r\n    const svgHeightChange = svgHeight - prevSvgHeight;\r\n\r\n    const prevParentWidth = Number.parseInt(this.svg.style('width').replace('px', ''));\r\n    const parentWidth = data[0].r * 2 + this.margin.left + this.margin.right + this.lineWidth + this.labelWidth;\r\n    const parentWidthChange = parentWidth - prevParentWidth;\r\n\r\n    this.parent\r\n      .transition()\r\n        .call(masterTransition)\r\n        .style('width', `${parentWidth}px`)\r\n\r\n    this.svg\r\n      .transition()\r\n        .call(masterTransition)\r\n        .attr('height', svgHeight)\r\n\r\n    selection.exit()\r\n        .call(g => g.select('line')\r\n            .attr('opacity', 0))\r\n        .call(g => g.select('text')\r\n            .attr('opacity', 0))\r\n      .transition()\r\n        .call(masterTransition)\r\n        .call(g => g.select('circle')\r\n            .attr('cx', data[0].r + this.margin.left)\r\n            .attr('cy', d => data[0].r * 2 - d.r + this.margin.top)\r\n            .attr('opacity', 0))\r\n        .remove();\r\n\r\n    selection\r\n      .transition()\r\n        .call(masterTransition)\r\n        .call(g => g.select('circle')\r\n            .attr('r', d => d.r)\r\n            .attr('cx', data[0].r + this.margin.left)\r\n            .attr('cy', d => data[0].r * 2 - d.r + this.margin.top))\r\n        .call(g => g.select('line')\r\n            .attr('x1', d => labels[d.i].left)\r\n            .attr('x2', d => labels[d.i].left + labels[d.i].width)\r\n            .attr('y1', d => labels[d.i].top)\r\n            .attr('y2', d => labels[d.i].top))\r\n        .call(g => g.select('text')\r\n            .attr('x', d => labels[d.i].left + labels[d.i].width + 5)\r\n            .attr('y', d => labels[d.i].top)\r\n            .text(d => d.label))\r\n\r\n    selection.enter().append('g')\r\n        .call(g => g.append('circle')\r\n            .attr('r', d => d.r)\r\n            .attr('cx', data[0].r + this.margin.left - parentWidthChange / 2)\r\n            .attr('cy', d => data[0].r * 2 - d.r + this.margin.top - svgHeightChange)\r\n            .attr('opacity', 0))\r\n        .call(g => g.append('line')\r\n            .attr('x1', d => labels[d.i].left - parentWidthChange / 2)\r\n            .attr('x2', d => labels[d.i].left + labels[d.i].width - parentWidthChange / 2)\r\n            .attr('y1', d => labels[d.i].top - svgHeightChange)\r\n            .attr('y2', d => labels[d.i].top - svgHeightChange)\r\n            .attr('shape-rendering', 'crispEdges')\r\n            .attr('opacity', 0))\r\n        .call(g => g.append('text')\r\n            .attr('x', d => labels[d.i].left + labels[d.i].width + 5 - parentWidthChange / 2)\r\n            .attr('y', d => labels[d.i].top - svgHeightChange)\r\n            .attr('alignment-baseline', 'central')\r\n            .text(d => d.label)\r\n            .attr('opacity', 0))\r\n      .transition()\r\n        .call(masterTransition)\r\n        .call(g => g.select('circle')\r\n            .attr('cx', data[0].r + this.margin.left)\r\n            .attr('cy', d => data[0].r * 2 - d.r + this.margin.top)\r\n            .attr('opacity', 1))\r\n        .call(g => g.select('line')\r\n            .attr('x1', d => labels[d.i].left)\r\n            .attr('x2', d => labels[d.i].left + labels[d.i].width)\r\n            .attr('y1', d => labels[d.i].top)\r\n            .attr('y2', d => labels[d.i].top)\r\n            .attr('opacity', 1))\r\n        .call(g => g.select('text')\r\n            .attr('x', d => labels[d.i].left + labels[d.i].width + 5)\r\n            .attr('y', d => labels[d.i].top)\r\n            .attr('opacity', 1))\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (prevProps.scaleData !== this.props.scaleData)\r\n      this.updateData(this.props.scaleData);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"scale-legend\" ref={parent => this.parentRef = parent}>\r\n        <svg ref={svg => this.svgRef = svg} width=\"100%\" />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nScaleLegend.propTypes = {\r\n  scaleData: PropTypes.arrayOf(PropTypes.shape({\r\n    r: PropTypes.number.isRequired,\r\n    label: PropTypes.string.isRequired\r\n  }))\r\n};\r\n\r\nexport default ScaleLegend;","import React, { Component } from 'react';\r\nimport Filters from './filters/Filters';\r\nimport ColorLegend from './ColorLegend';\r\nimport ScaleLegend from './ScaleLegend';\r\nimport './Sidebar.css';\r\n\r\nclass Sidebar extends Component {\r\n  render() {\r\n    return (\r\n      <div className=\"sidebar\">\r\n        <div className=\"sidebar__top\">\r\n          <Filters data={this.props.data} updateFilteredData={this.props.updateFilteredData} />\r\n        </div>\r\n        <div className=\"sidebar__bottom\">\r\n          <ScaleLegend scaleData={this.props.scaleData} />\r\n          <ColorLegend />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Sidebar;\r\n","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Spring, animated } from 'react-spring';\r\nimport './InfoBoxSection.css';\r\n\r\nclass InfoBoxSection extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      toggle: props.initToggle || false\r\n    };\r\n    this.onToggle = this.onToggle.bind(this);\r\n  }\r\n\r\n  onToggle() {\r\n    this.setState(state => ({ toggle: !state.toggle }));\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className={`info-box-section ${this.state.toggle ? 'info-box-section--toggled' : ''}`}>\r\n        <div className=\"info-box-section__title\" onClick={this.onToggle}>\r\n          <span className=\"info-box-section__title-text\">{this.props.title}</span>\r\n          <span className='info-box-section__title-cross'>\r\n            +\r\n          </span>\r\n        </div>\r\n        <Spring native from={{ height: this.state.toggle ? 'auto' : 0 }} to={{ height: this.state.toggle ? 'auto' : 0 }}>\r\n          {props => (\r\n            <animated.div className=\"info-box-section__content\" style={props}>\r\n              <div className=\"info-box-section__inner-content\">\r\n                {this.props.children}\r\n              </div>\r\n            </animated.div>\r\n          )}\r\n        </Spring>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nInfoBoxSection.propTypes = {\r\n  title: PropTypes.string,\r\n  children: PropTypes.node.isRequired,\r\n  initToggle: PropTypes.bool\r\n};\r\n\r\nexport default InfoBoxSection;\r\n","import p1 from '../assets/images/projects/1-Aktivitetsbaserad-modellering.png';\r\nimport p2 from '../assets/images/projects/2-DDS-energieffektiv-vard.jpg';\r\nimport p3 from '../assets/images/projects/3-Digitalt-kontrollerade-odlingssystem.jpg';\r\nimport p4 from '../assets/images/projects/4-Effektiv-energiplanering.jpg';\r\nimport p5 from '../assets/images/projects/5-Hotmodellering.jpg';\r\nimport p6 from '../assets/images/projects/6-Hallbara-urbana-livstillar.jpg';\r\nimport p7 from '../assets/images/projects/7-Klimatkampen-Uppsala.jpg';\r\nimport p8 from '../assets/images/projects/8-Ladda-lagra-lanka.png';\r\nimport p9 from '../assets/images/projects/9-MERiT.jpg';\r\nimport p10 from '../assets/images/projects/10-Mo-Bo.jpg';\r\nimport p11 from '../assets/images/projects/11-Matt-och-steg.jpg';\r\nimport p12 from '../assets/images/projects/12-SAMIR.jpg';\r\nimport p13 from '../assets/images/projects/13-Sensorer-for-luftmiljo.jpg';\r\nimport p14 from '../assets/images/projects/14-R-energi.JPG';\r\nimport p15 from '../assets/images/projects/15-Sharing-Cities-Sweden.jpg';\r\nimport p16 from '../assets/images/projects/16-Matbutik.jpg';\r\nimport p17 from '../assets/images/projects/17-Smart-Village.png';\r\nimport p18 from '../assets/images/projects/18-Smaskalig-elforsorjning.jpg';\r\nimport p19 from '../assets/images/projects/19-Urban-ICT-Arena.jpg';\r\nimport p20 from '../assets/images/projects/20-Vardeskapande-med-oppna-data.jpg';\r\nimport p21 from '../assets/images/projects/21-3De.jpg';\r\n\r\nexport default {\r\n  1: p1,\r\n  2: p2,\r\n  3: p3,\r\n  4: p4,\r\n  5: p5,\r\n  6: p6,\r\n  7: p7,\r\n  8: p8,\r\n  9: p9,\r\n  10: p10,\r\n  11: p11,\r\n  12: p12,\r\n  13: p13,\r\n  14: p15,\r\n  15: p14,\r\n  16: p16,\r\n  17: p17,\r\n  18: p18,\r\n  19: p19,\r\n  20: p20,\r\n  21: p21\r\n};\r\n","import React, { Component, Fragment } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport PropTypes from 'prop-types';\r\nimport { format } from 'd3';\r\nimport './InfoBox.css';\r\nimport ColorLegendItem from '../ColorLegendItem';\r\nimport InfoBoxSection from './InfoBoxSection';\r\nimport projectImages from './projectImages';\r\nimport { projectTypeColors } from '../matrix/MatrixUtility';\r\n\r\nclass InfoBox extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.lastProject = null;\r\n  }\r\n\r\n  shouldComponentUpdate(nextProps) {\r\n    if (nextProps.project !== this.props.project\r\n      || nextProps.location !== this.props.location) return true;\r\n    return false;\r\n  }\r\n\r\n  decorateItems(stringList) {\r\n    return stringList\r\n      .map(str => (<span key={str} className=\"info-box__item-decoration\">{str}</span> ))\r\n      .reduce((acc, cur) => [acc, ', ', cur]);\r\n  }\r\n\r\n  render() {\r\n    if (!this.props.project && !this.lastProject) return null;\r\n\r\n    const project = this.props.project || this.lastProject;\r\n    if (this.props.project !== null)\r\n      this.lastProject = this.props.project;\r\n\r\n    const {\r\n      project_title,\r\n      project_organization,\r\n      project_id,\r\n      budget,\r\n      project_manager,\r\n      dates,\r\n      keywords,\r\n      other_financiers,\r\n      other_recipients,\r\n      description,\r\n      project_type,\r\n      locations\r\n    } = project.survey_answers;\r\n\r\n    const partners = [...new Set([...other_financiers, ...other_recipients])].sort();\r\n\r\n    const views = {\r\n      Map: { link: `/map/project/${project_id}`, match: '/map' },\r\n      Matrix: { link: `/matrix/project/${project_id}`, match: '/matrix' },\r\n      Partners: { link: `/partners/project/${project_id}`, match: '/partners' }\r\n    }\r\n\r\n    const vizViews = Object.keys(views).map(viewName => {\r\n      const view = views[viewName];\r\n      const match = this.props.location.pathname.includes(view.match);\r\n      return (\r\n        <Link\r\n          key={viewName}\r\n          to={view.link}\r\n          className={`info-box__view-link ${match ? 'info-box__view-link--active' : ''}`}>\r\n          {viewName}\r\n        </Link>\r\n      );\r\n    });\r\n\r\n    return (\r\n      <div className=\"info-box\">\r\n        <div className=\"info-box__splash\" style={{ backgroundImage: `url(${projectImages[project_id]})` }} />\r\n        <div className=\"info-box__content\">\r\n          <div className=\"info-box__content-header\">\r\n            <h2 className=\"info-box__title\">{project_title}</h2>\r\n            <h3 className=\"info-box__subtitle\">{locations.join(', ')}</h3>\r\n          </div>\r\n          <div>\r\n            <InfoBoxSection title=\"Generell Information\" initToggle={true}>\r\n              <dl>\r\n                <dt>Typ av projekt</dt>\r\n                <dd>\r\n                  <ColorLegendItem text={project_type} color={projectTypeColors(project_type)} />\r\n                </dd>\r\n\r\n                <dt>Projektorganisation</dt>\r\n                <dd>{project_organization}</dd>\r\n\r\n                <dt>Projektledare</dt>\r\n                <dd>{project_manager}</dd>\r\n\r\n                <dt>Total projektbudget</dt>\r\n                <dd>{`${format(',')(budget.total_cost).replace(/,/g, ' ')} kr`}</dd>\r\n\r\n                <dt>Sökt bidrag</dt>\r\n                <dd>{`${format(',')(budget.funded).replace(/,/g, ' ')} kr`}</dd>\r\n\r\n                <dt>Projekttid</dt>\r\n                <dd>{`${dates.start} - ${dates.end}`}</dd>\r\n\r\n              </dl>\r\n            </InfoBoxSection>\r\n\r\n            <InfoBoxSection title=\"Nyckelord\">\r\n              <p>\r\n                {this.decorateItems(keywords)}\r\n              </p>\r\n            </InfoBoxSection>\r\n\r\n            <InfoBoxSection title=\"Partners\">\r\n              <p>\r\n                {this.decorateItems(partners)}\r\n              </p>\r\n            </InfoBoxSection>\r\n\r\n            <InfoBoxSection title=\"Beskrivning\">\r\n              <p>\r\n              {description.split('\\n').map((item, key) => {\r\n                return <Fragment key={key}>{item}<br/></Fragment>\r\n              })}\r\n            </p>\r\n            </InfoBoxSection>\r\n          </div>\r\n\r\n          <div className=\"info-box__views\">\r\n            {vizViews}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nInfoBox.propTypes = {\r\n  project: PropTypes.object\r\n};\r\n\r\nexport default InfoBox;","import React, { Component } from 'react';\r\nimport { withRouter } from 'react-router';\r\nimport { Transition, animated } from 'react-spring';\r\nimport PropTypes from 'prop-types';\r\nimport InfoBox from './InfoBox';\r\nimport './AnimatedInfoBox.css';\r\n\r\nclass AnimatedInfoBox extends Component {\r\n  shouldComponentUpdate(nextProps, nextState) {\r\n    if (nextProps.data !== this.props.data\r\n      || nextProps.id !== this.props.id\r\n      || nextProps.location !== this.props.location) return true;\r\n    return false;\r\n  }\r\n\r\n  render() {\r\n    const projectDetails = this.props.data.data\r\n      .reduce((acc, cur) => ({ ...acc, [cur.survey_answers.project_id]: <InfoBox project={cur} location={this.props.location} /> }), {});\r\n\r\n    return (\r\n      <Transition\r\n        native\r\n        items={this.props.id}\r\n        from={{ opacity: 0, transform: 'translateX(80%)' }}\r\n        enter={{ opacity: 1, transform: 'translateX(0)' }}\r\n        leave={{ opacity: 0, transform: 'translateX(70%)'}}>\r\n        {id =>\r\n          id !== -1 &&\r\n            (props => \r\n              <animated.div className=\"info-box-container\" style={{ ...props}}>\r\n                {projectDetails[id]}\r\n              </animated.div>)\r\n        }\r\n      </Transition>\r\n    );\r\n  }\r\n}\r\n\r\nAnimatedInfoBox.propTypes = {\r\n  data: PropTypes.object,\r\n  id: PropTypes.number\r\n}\r\n\r\nexport default withRouter(AnimatedInfoBox);\r\n","import React, { Component } from 'react';\nimport { BrowserRouter as Router, Route, Redirect, Switch } from \"react-router-dom\";\nimport Header from './Header';\nimport Matrix from './matrix/Matrix';\nimport Map from './map/Map';\nimport Partners from './partners/Partners'\nimport Sidebar from './Sidebar';\nimport AnimatedInfoBox from './info-box/AnimatedInfoBox';\nimport { GetProjectId } from './ProjectNavigator';\nimport mockData from './assets/data/mock-data-v8.json';\nimport './App.css';\nimport 'react-widgets/dist/css/react-widgets.css';\n\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      filteredData: mockData,\n      scaleData: null\n    };\n\n    this.updateFilteredData = this.updateFilteredData.bind(this);\n    this.updateScaleData = this.updateScaleData.bind(this);\n  }\n\n  updateFilteredData(newData) {\n    this.setState({\n      filteredData: newData\n    });\n  }\n\n  updateScaleData(newData) {\n    this.setState({\n      scaleData: newData\n    });\n  }\n\n  render() {\n    return (\n      <Router basename={process.env.PUBLIC_URL}>\n        <div className=\"App\">\n          <Header />\n          <div className=\"App__content\">\n            <Sidebar data={mockData} updateFilteredData={this.updateFilteredData} scaleData={this.state.scaleData} />\n            <Switch>\n              <Route path=\"/\" exact render={props => (\n                <Redirect to=\"/matrix\" />\n              )}/>\n              <Route path=\"/map\" render={props => (\n                <Map data={mockData} filteredData={this.state.filteredData} updateScaleData={this.updateScaleData} />\n              )}/>\n              <Route path=\"/matrix\" render={props => (\n                <Matrix data={mockData} filteredData={this.state.filteredData} updateScaleData={this.updateScaleData} />\n              )}/>\n              <Route path=\"/partners\" render={props => (\n                <Partners updateScaleData={this.updateScaleData} />\n              )}/>\n            </Switch>\n            <Route render={props => (\n              <AnimatedInfoBox\n                data={mockData}\n                id={Number.parseInt(GetProjectId(props.location))}/>\n            )}/>\n          </div>\n        </div>\n      </Router>\n    );\n  }\n}\n\nexport default App;\n","// In production, we register a service worker to serve assets from local cache.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\n// cached resources are updated in the background.\n\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://goo.gl/SC7cgQ'\n          );\n        });\n      } else {\n        // Is not local host. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the old content will have been purged and\n              // the fresh content will have been added to the cache.\n              // It's the perfect time to display a \"New content is\n              // available; please refresh.\" message in your web app.\n              console.log('New content is available; please refresh.');\n\n              // Execute callback\n              if (config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get('content-type').indexOf('javascript') === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","// NOTE: This polyfill causes gh-pages to not work \"Page build failure\"\n// It's still valuable though, giving browser compatability with ie11.\n// So put it back if the website is ever moved away from github pages.\n//import 'react-app-polyfill/ie11';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","module.exports = __webpack_public_path__ + \"static/media/1-Aktivitetsbaserad-modellering.1074af03.png\";","module.exports = __webpack_public_path__ + \"static/media/2-DDS-energieffektiv-vard.289abdde.jpg\";","module.exports = __webpack_public_path__ + \"static/media/3-Digitalt-kontrollerade-odlingssystem.1d19642a.jpg\";","module.exports = __webpack_public_path__ + \"static/media/4-Effektiv-energiplanering.ea5820f2.jpg\";","module.exports = __webpack_public_path__ + \"static/media/5-Hotmodellering.b9fbeb16.jpg\";","module.exports = __webpack_public_path__ + \"static/media/6-Hallbara-urbana-livstillar.0c4ecf15.jpg\";","module.exports = __webpack_public_path__ + \"static/media/7-Klimatkampen-Uppsala.fba5b34a.jpg\";","module.exports = __webpack_public_path__ + \"static/media/8-Ladda-lagra-lanka.a75f29f3.png\";"],"sourceRoot":""}